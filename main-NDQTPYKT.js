var Oh=Object.defineProperty,Fh=Object.defineProperties;var kh=Object.getOwnPropertyDescriptors;var Qa=Object.getOwnPropertySymbols;var Lh=Object.prototype.hasOwnProperty,jh=Object.prototype.propertyIsEnumerable;var Xa=(t,e,n)=>e in t?Oh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||={})Lh.call(e,n)&&Xa(t,n,e[n]);if(Qa)for(var n of Qa(e))jh.call(e,n)&&Xa(t,n,e[n]);return t},Z=(t,e)=>Fh(t,kh(e));var Ka=null;var as=1,Ja=Symbol("SIGNAL");function L(t){let e=Ka;return Ka=t,e}var el={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vh(t){if(!(cs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===as)){if(!t.producerMustRecompute(t)&&!ls(t)){t.dirty=!1,t.lastCleanEpoch=as;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=as}}function tl(t){return t&&(t.nextProducerIndex=0),L(t)}function nl(t,e){if(L(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(cs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)us(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ls(t){br(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Vh(n),r!==n.version))return!0}return!1}function rl(t){if(br(t),cs(t))for(let e=0;e<t.producerNode.length;e++)us(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function us(t,e){if(Uh(t),br(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)us(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];br(i),i.producerIndexOfThis[r]=e}}function cs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function br(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Uh(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Bh(){throw new Error}var $h=Bh;function il(t){$h=t}function _(t){return typeof t=="function"}function Ft(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Cr=Ft(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function En(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Y=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(_(r))try{r()}catch(s){e=s instanceof Cr?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{sl(s)}catch(o){e=e??[],o instanceof Cr?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Cr(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sl(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&En(n,e)}remove(e){let{_finalizers:n}=this;n&&En(n,e),e instanceof t&&e._removeParent(this)}};Y.EMPTY=(()=>{let t=new Y;return t.closed=!0,t})();var ds=Y.EMPTY;function Er(t){return t instanceof Y||t&&"closed"in t&&_(t.remove)&&_(t.add)&&_(t.unsubscribe)}function sl(t){_(t)?t():t.unsubscribe()}var Me={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var kt={setTimeout(t,e,...n){let{delegate:r}=kt;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=kt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xr(t){kt.setTimeout(()=>{let{onUnhandledError:e}=Me;if(e)e(t);else throw t})}function xn(){}var ol=hs("C",void 0,void 0);function al(t){return hs("E",void 0,t)}function ll(t){return hs("N",t,void 0)}function hs(t,e,n){return{kind:t,value:e,error:n}}var mt=null;function Lt(t){if(Me.useDeprecatedSynchronousErrorHandling){let e=!mt;if(e&&(mt={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=mt;if(mt=null,n)throw r}}else t()}function ul(t){Me.useDeprecatedSynchronousErrorHandling&&mt&&(mt.errorThrown=!0,mt.error=t)}var vt=class extends Y{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Er(e)&&e.add(this)):this.destination=Wh}static create(e,n,r){return new jt(e,n,r)}next(e){this.isStopped?ps(ll(e),this):this._next(e)}error(e){this.isStopped?ps(al(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ps(ol,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Hh=Function.prototype.bind;function fs(t,e){return Hh.call(t,e)}var gs=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ir(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ir(r)}else Ir(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ir(n)}}},jt=class extends vt{constructor(e,n,r){super();let i;if(_(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Me.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fs(e.next,s),error:e.error&&fs(e.error,s),complete:e.complete&&fs(e.complete,s)}):i=e}this.destination=new gs(i)}};function Ir(t){Me.useDeprecatedSynchronousErrorHandling?ul(t):xr(t)}function zh(t){throw t}function ps(t,e){let{onStoppedNotification:n}=Me;n&&kt.setTimeout(()=>n(t,e))}var Wh={closed:!0,next:xn,error:zh,complete:xn};var Vt=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ue(t){return t}function ms(...t){return vs(t)}function vs(t){return t.length===0?ue:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var j=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=qh(n)?n:new jt(n,r,i);return Lt(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=cl(r),new r((i,s)=>{let o=new jt({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Vt](){return this}pipe(...n){return vs(n)(this)}toPromise(n){return n=cl(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function cl(t){var e;return(e=t??Me.Promise)!==null&&e!==void 0?e:Promise}function Gh(t){return t&&_(t.next)&&_(t.error)&&_(t.complete)}function qh(t){return t&&t instanceof vt||Gh(t)&&Er(t)}function ys(t){return _(t?.lift)}function N(t){return e=>{if(ys(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function P(t,e,n,r,i){return new Ds(t,e,n,r,i)}var Ds=class extends vt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ut(){return N((t,e)=>{let n=null;t._refCount++;let r=P(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Bt=class extends j{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ys(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Y;let n=this.getSubject();e.add(this.source.subscribe(P(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Y.EMPTY)}return e}refCount(){return Ut()(this)}};var dl=Ft(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=(()=>{class t extends j{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Mr(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dl}next(n){Lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Lt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ds:(this.currentObservers=null,s.push(n),new Y(()=>{this.currentObservers=null,En(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new j;return n.source=this,n}}return t.create=(e,n)=>new Mr(e,n),t})(),Mr=class extends ie{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ds}};var ee=class extends ie{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ce=new j(t=>t.complete());function hl(t){return t&&_(t.schedule)}function fl(t){return t[t.length-1]}function pl(t){return _(fl(t))?t.pop():void 0}function st(t){return hl(fl(t))?t.pop():void 0}function ml(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function gl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(t){return this instanceof yt?(this.v=t,this):new yt(t)}function vl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,m){s.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{l(r[h](f))}catch(p){d(s[0][3],p)}}function l(h){h.value instanceof yt?Promise.resolve(h.value.v).then(u,c):d(s[0][2],h)}function u(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gl=="function"?gl(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var Sr=t=>t&&typeof t.length=="number"&&typeof t!="function";function Tr(t){return _(t?.then)}function Rr(t){return _(t[Vt])}function Ar(t){return Symbol.asyncIterator&&_(t?.[Symbol.asyncIterator])}function Nr(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Zh(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pr=Zh();function Or(t){return _(t?.[Pr])}function Fr(t){return vl(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield yt(n.read());if(i)return yield yt(void 0);yield yield yt(r)}}finally{n.releaseLock()}})}function kr(t){return _(t?.getReader)}function J(t){if(t instanceof j)return t;if(t!=null){if(Rr(t))return Yh(t);if(Sr(t))return Qh(t);if(Tr(t))return Xh(t);if(Ar(t))return Dl(t);if(Or(t))return Kh(t);if(kr(t))return Jh(t)}throw Nr(t)}function Yh(t){return new j(e=>{let n=t[Vt]();if(_(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Qh(t){return new j(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Xh(t){return new j(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,xr)})}function Kh(t){return new j(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Dl(t){return new j(e=>{ef(t,e).catch(n=>e.error(n))})}function Jh(t){return Dl(Fr(t))}function ef(t,e){var n,r,i,s;return ml(this,void 0,void 0,function*(){try{for(n=yl(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ae(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Lr(t,e=0){return N((n,r)=>{n.subscribe(P(r,i=>ae(r,t,()=>r.next(i),e),()=>ae(r,t,()=>r.complete(),e),i=>ae(r,t,()=>r.error(i),e)))})}function jr(t,e=0){return N((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function wl(t,e){return J(t).pipe(jr(e),Lr(e))}function _l(t,e){return J(t).pipe(jr(e),Lr(e))}function bl(t,e){return new j(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Cl(t,e){return new j(n=>{let r;return ae(n,e,()=>{r=t[Pr](),ae(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>_(r?.return)&&r.return()})}function Vr(t,e){if(!t)throw new Error("Iterable cannot be null");return new j(n=>{ae(n,e,()=>{let r=t[Symbol.asyncIterator]();ae(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function El(t,e){return Vr(Fr(t),e)}function xl(t,e){if(t!=null){if(Rr(t))return wl(t,e);if(Sr(t))return bl(t,e);if(Tr(t))return _l(t,e);if(Ar(t))return Vr(t,e);if(Or(t))return Cl(t,e);if(kr(t))return El(t,e)}throw Nr(t)}function X(t,e){return e?xl(t,e):J(t)}function b(...t){let e=st(t);return X(t,e)}function $t(t,e){let n=_(t)?t:()=>t,r=i=>i.error(n());return new j(e?i=>e.schedule(r,0,i):r)}function ws(t){return!!t&&(t instanceof j||_(t.lift)&&_(t.subscribe))}var We=Ft(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function T(t,e){return N((n,r)=>{let i=0;n.subscribe(P(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:tf}=Array;function nf(t,e){return tf(e)?t(...e):t(e)}function Il(t){return T(e=>nf(t,e))}var{isArray:rf}=Array,{getPrototypeOf:sf,prototype:of,keys:af}=Object;function Ml(t){if(t.length===1){let e=t[0];if(rf(e))return{args:e,keys:null};if(lf(e)){let n=af(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function lf(t){return t&&typeof t=="object"&&sf(t)===of}function Sl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ur(...t){let e=st(t),n=pl(t),{args:r,keys:i}=Ml(t);if(r.length===0)return X([],e);let s=new j(uf(r,e,i?o=>Sl(i,o):ue));return n?s.pipe(Il(n)):s}function uf(t,e,n=ue){return r=>{Tl(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)Tl(e,()=>{let u=X(t[l],e),c=!1;u.subscribe(P(r,d=>{s[l]=d,c||(c=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Tl(t,e,n){t?ae(n,t,e):e()}function Rl(t,e,n,r,i,s,o,a){let l=[],u=0,c=0,d=!1,h=()=>{d&&!l.length&&!u&&e.complete()},f=m=>u<r?p(m):l.push(m),p=m=>{s&&e.next(m),u++;let D=!1;J(n(m,c++)).subscribe(P(e,I=>{i?.(I),s?f(I):e.next(I)},()=>{D=!0},void 0,()=>{if(D)try{for(u--;l.length&&u<r;){let I=l.shift();o?ae(e,o,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(P(e,f,()=>{d=!0,h()})),()=>{a?.()}}function K(t,e,n=1/0){return _(e)?K((r,i)=>T((s,o)=>e(r,s,i,o))(J(t(r,i))),n):(typeof e=="number"&&(n=e),N((r,i)=>Rl(r,i,t,n)))}function _s(t=1/0){return K(ue,t)}function Al(){return _s(1)}function Ht(...t){return Al()(X(t,st(t)))}function Br(t){return new j(e=>{J(t()).subscribe(e)})}function Se(t,e){return N((n,r)=>{let i=0;n.subscribe(P(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ot(t){return N((e,n)=>{let r=null,i=!1,s;r=e.subscribe(P(n,void 0,void 0,o=>{s=J(t(o,ot(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Nl(t,e,n,r,i){return(s,o)=>{let a=n,l=e,u=0;s.subscribe(P(o,c=>{let d=u++;l=a?t(l,c,d):(a=!0,c),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function zt(t,e){return _(e)?K(t,e,1):K(t,1)}function at(t){return N((e,n)=>{let r=!1;e.subscribe(P(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ge(t){return t<=0?()=>ce:N((e,n)=>{let r=0;e.subscribe(P(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bs(t){return T(()=>t)}function $r(t=cf){return N((e,n)=>{let r=!1;e.subscribe(P(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cf(){return new We}function In(t){return N((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Le(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Se((i,s)=>t(i,s,r)):ue,Ge(1),n?at(e):$r(()=>new We))}function Wt(t){return t<=0?()=>ce:N((e,n)=>{let r=[];e.subscribe(P(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Cs(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Se((i,s)=>t(i,s,r)):ue,Wt(1),n?at(e):$r(()=>new We))}function Es(t,e){return N(Nl(t,e,arguments.length>=2,!0))}function xs(...t){let e=st(t);return N((n,r)=>{(e?Ht(t,n,e):Ht(t,n)).subscribe(r)})}function Te(t,e){return N((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(P(r,l=>{i?.unsubscribe();let u=0,c=s++;J(t(l,c)).subscribe(i=P(r,d=>r.next(e?e(l,d,c,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Is(t){return N((e,n)=>{J(t).subscribe(P(n,()=>n.complete(),xn)),!n.closed&&e.subscribe(n)})}function te(t,e,n){let r=_(t)||e||n?{next:t,error:e,complete:n}:t;return r?N((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(P(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ue}var w=class extends Error{constructor(e,n){super(go(e,n)),this.code=e}};function go(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function mo(t){return{toString:t}.toString()}var Ls=globalThis;function U(t){for(let e in t)if(t[e]===U)return e;throw Error("Could not find renamed property on target object.")}function de(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(de).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Pl(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var df=U({__forward_ref__:U});function gu(t){return t.__forward_ref__=gu,t.toString=function(){return de(this())},t}function ve(t){return mu(t)?t():t}function mu(t){return typeof t=="function"&&t.hasOwnProperty(df)&&t.__forward_ref__===gu}function E(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function di(t){return Ol(t,yu)||Ol(t,Du)}function vu(t){return di(t)!==null}function Ol(t,e){return t.hasOwnProperty(e)?t[e]:null}function hf(t){let e=t&&(t[yu]||t[Du]);return e||null}function Fl(t){return t&&(t.hasOwnProperty(kl)||t.hasOwnProperty(ff))?t[kl]:null}var yu=U({\u0275prov:U}),kl=U({\u0275inj:U}),Du=U({ngInjectableDef:U}),ff=U({ngInjectorDef:U}),S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wu(t){return t&&!!t.\u0275providers}var pf=U({\u0275cmp:U}),gf=U({\u0275dir:U}),mf=U({\u0275pipe:U}),vf=U({\u0275mod:U}),Zr=U({\u0275fac:U}),Mn=U({__NG_ELEMENT_ID__:U}),Ll=U({__NG_ENV_ID__:U});function yf(t){return typeof t=="string"?t:t==null?"":String(t)}function Df(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():yf(t)}function wf(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new w(-200,t)}function vo(t,e){throw new w(-201,!1)}var M=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(M||{}),js;function _u(){return js}function me(t){let e=js;return js=t,e}function bu(t,e,n){let r=di(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&M.Optional)return null;if(e!==void 0)return e;vo(t,"Injector")}var _f={},Sn=_f,bf="__NG_DI_FLAG__",Yr="ngTempTokenPath",Cf="ngTokenPath",Ef=/\n/gm,xf="\u0275",jl="__source",Yt;function If(){return Yt}function lt(t){let e=Yt;return Yt=t,e}function Mf(t,e=M.Default){if(Yt===void 0)throw new w(-203,!1);return Yt===null?bu(t,void 0,e):Yt.get(t,e&M.Optional?null:void 0,e)}function R(t,e=M.Default){return(_u()||Mf)(ve(t),e)}function g(t,e=M.Default){return R(t,hi(e))}function hi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vs(t){let e=[];for(let n=0;n<t.length;n++){let r=ve(t[n]);if(Array.isArray(r)){if(r.length===0)throw new w(900,!1);let i,s=M.Default;for(let o=0;o<r.length;o++){let a=r[o],l=Sf(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(R(i,s))}else e.push(R(r))}return e}function Sf(t){return t[bf]}function Tf(t,e,n,r){let i=t[Yr];throw e[jl]&&i.unshift(e[jl]),t.message=Rf(`
`+t.message,i,n,r),t[Cf]=i,t[Yr]=null,t}function Rf(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==xf?t.slice(2):t;let i=de(e);if(Array.isArray(e))i=e.map(de).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):de(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ef,`
  `)}`}function Xt(t,e){let n=t.hasOwnProperty(Zr);return n?t[Zr]:null}function yo(t,e){t.forEach(n=>Array.isArray(n)?yo(n,e):e(n))}function Cu(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Qr(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Tn={},Kt=[],Jt=new S(""),Eu=new S("",-1),xu=new S(""),Xr=class{get(e,n=Sn){if(n===Sn){let r=new Error(`NullInjectorError: No provider for ${de(e)}!`);throw r.name="NullInjectorError",r}return n}},Iu=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Iu||{}),Ue=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ue||{}),en=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(en||{});function Af(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Us(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Pf(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Nf(t){return t===3||t===4||t===6}function Pf(t){return t.charCodeAt(0)===64}function Do(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Vl(t,n,i,null,e[++r]):Vl(t,n,i,null,null))}}return t}function Vl(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Mu="ng-template";function Of(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Af(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(wo(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function wo(t){return t.type===4&&t.value!==Mu}function Ff(t,e,n){let r=t.type===4&&!n?Mu:t.value;return e===r}function kf(t,e,n){let r=4,i=t.attrs,s=i!==null?Vf(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Re(r)&&!Re(l))return!1;if(o&&Re(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!Ff(t,l,n)||l===""&&e.length===1){if(Re(r))return!1;o=!0}}else if(r&8){if(i===null||!Of(t,i,l,n)){if(Re(r))return!1;o=!0}}else{let u=e[++a],c=Lf(l,i,wo(t),n);if(c===-1){if(Re(r))return!1;o=!0;continue}if(u!==""){let d;if(c>s?d="":d=i[c+1].toLowerCase(),r&2&&u!==d){if(Re(r))return!1;o=!0}}}}return Re(r)||o}function Re(t){return(t&1)===0}function Lf(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Uf(e,t)}function jf(t,e,n=!1){for(let r=0;r<e.length;r++)if(kf(t,e[r],n))return!0;return!1}function Vf(t){for(let e=0;e<t.length;e++){let n=t[e];if(Nf(n))return e}return t.length}function Uf(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Ul(t,e){return t?":not("+e.trim()+")":e}function Bf(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Re(o)&&(e+=Ul(s,i),i=""),r=o,s=s||!Re(r);n++}return i!==""&&(e+=Ul(s,i)),e}function $f(t){return t.map(Bf).join(",")}function Hf(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Re(i))break;i=s}r++}return{attrs:e,classes:n}}function fi(t){return mo(()=>{let e=Nu(t),n=Z(y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Iu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ue.Emulated,styles:t.styles||Kt,_:null,schemas:t.schemas||null,tView:null,id:""});Pu(n);let r=t.dependencies;return n.directiveDefs=$l(r,!1),n.pipeDefs=$l(r,!0),n.id=Gf(n),n})}function zf(t){return bt(t)||Su(t)}function Wf(t){return t!==null}function Bl(t,e){if(t==null)return Tn;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=en.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==en.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Un(t){return mo(()=>{let e=Nu(t);return Pu(e),e})}function bt(t){return t[pf]||null}function Su(t){return t[gf]||null}function Tu(t){return t[mf]||null}function Ru(t){let e=bt(t)||Su(t)||Tu(t);return e!==null?e.standalone:!1}function Au(t,e){let n=t[vf]||null;if(!n&&e===!0)throw new Error(`Type ${de(t)} does not have '\u0275mod' property.`);return n}function Nu(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Tn,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bl(t.inputs,e),outputs:Bl(t.outputs),debugInfo:null}}function Pu(t){t.features?.forEach(e=>e(t))}function $l(t,e){if(!t)return null;let n=e?Tu:zf;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Wf)}function Gf(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pi(t){return{\u0275providers:t}}function qf(...t){return{\u0275providers:Ou(!0,t),\u0275fromNgModule:!0}}function Ou(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return yo(e,o=>{let a=o;Bs(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Fu(i,s),n}function Fu(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_o(i,s=>{e(s,r)})}}function Bs(t,e,n,r){if(t=ve(t),!t)return!1;let i=null,s=Fl(t),o=!s&&bt(t);if(!s&&!o){let l=t.ngModule;if(s=Fl(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)Bs(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{yo(s.imports,c=>{Bs(c,e,n,r)&&(u||=[],u.push(c))})}finally{}u!==void 0&&Fu(u,e)}if(!a){let u=Xt(i)||(()=>new i);e({provide:i,useFactory:u,deps:Kt},i),e({provide:xu,useValue:i,multi:!0},i),e({provide:Jt,useValue:()=>R(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=t;_o(l,c=>{e(c,u)})}}else return!1;return i!==t&&t.providers!==void 0}function _o(t,e){for(let n of t)wu(n)&&(n=n.\u0275providers),Array.isArray(n)?_o(n,e):e(n)}var Zf=U({provide:String,useValue:U});function ku(t){return t!==null&&typeof t=="object"&&Zf in t}function Yf(t){return!!(t&&t.useExisting)}function Qf(t){return!!(t&&t.useFactory)}function $s(t){return typeof t=="function"}var gi=new S(""),Hr={},Xf={},Ms;function bo(){return Ms===void 0&&(Ms=new Xr),Ms}var De=class{},Rn=class extends De{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zs(e,o=>this.processProvider(o)),this.records.set(Eu,Gt(void 0,this)),i.has("environment")&&this.records.set(De,Gt(void 0,this));let s=this.records.get(gi);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xu,Kt,M.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=L(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),L(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=lt(this),r=me(void 0),i;try{return e()}finally{lt(n),me(r)}}get(e,n=Sn,r=M.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ll))return e[Ll](this);r=hi(r);let i,s=lt(this),o=me(void 0);try{if(!(r&M.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=rp(e)&&di(e);u&&this.injectableDefInScope(u)?l=Gt(Hs(e),Hr):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&M.Self?bo():this.parent;return n=r&M.Optional&&n===Sn?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Yr]=a[Yr]||[]).unshift(de(e)),s)throw a;return Tf(a,e,"R3InjectorError",this.source)}else throw a}finally{me(o),lt(s)}}resolveInjectorInitializers(){let e=L(null),n=lt(this),r=me(void 0),i;try{let s=this.get(Jt,Kt,M.Self);for(let o of s)o()}finally{lt(n),me(r),L(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(de(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new w(205,!1)}processProvider(e){e=ve(e);let n=$s(e)?e:ve(e&&e.provide),r=Jf(e);if(!$s(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Gt(void 0,Hr,!0),i.factory=()=>Vs(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=L(null);try{return n.value===Hr&&(n.value=Xf,n.value=n.factory()),typeof n.value=="object"&&n.value&&np(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{L(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ve(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hs(t){let e=di(t),n=e!==null?e.factory:Xt(t);if(n!==null)return n;if(t instanceof S)throw new w(204,!1);if(t instanceof Function)return Kf(t);throw new w(204,!1)}function Kf(t){if(t.length>0)throw new w(204,!1);let n=hf(t);return n!==null?()=>n.factory(t):()=>new t}function Jf(t){if(ku(t))return Gt(void 0,t.useValue);{let e=ep(t);return Gt(e,Hr)}}function ep(t,e,n){let r;if($s(t)){let i=ve(t);return Xt(i)||Hs(i)}else if(ku(t))r=()=>ve(t.useValue);else if(Qf(t))r=()=>t.useFactory(...Vs(t.deps||[]));else if(Yf(t))r=()=>R(ve(t.useExisting));else{let i=ve(t&&(t.useClass||t.provide));if(tp(t))r=()=>new i(...Vs(t.deps));else return Xt(i)||Hs(i)}return r}function Gt(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function tp(t){return!!t.deps}function np(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function rp(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function zs(t,e){for(let n of t)Array.isArray(n)?zs(n,e):n&&wu(n)?zs(n.\u0275providers,e):e(n)}function Xe(t,e){t instanceof Rn&&t.assertNotDestroyed();let n,r=lt(t),i=me(void 0);try{return e()}finally{lt(r),me(i)}}function ip(){return _u()!==void 0||If()!=null}function sp(t){return typeof t=="function"}var Ke=0,O=1,C=2,oe=3,Ae=4,Pe=5,Kr=6,An=7,qe=8,tn=9,Ze=10,Ne=11,Nn=12,Hl=13,Bn=14,Be=15,Pn=16,qt=17,mi=18,vi=19,Lu=20,ut=21,Ss=22,Ct=23,Et=25,ju=1;var xt=7,Jr=8,ei=9,ye=10,ti=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ti||{});function wt(t){return Array.isArray(t)&&typeof t[ju]=="object"}function Je(t){return Array.isArray(t)&&t[ju]===!0}function Vu(t){return(t.flags&4)!==0}function Co(t){return t.componentOffset>-1}function Uu(t){return(t.flags&1)===1}function $n(t){return!!t.template}function Ws(t){return(t[C]&512)!==0}var Gs=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Bu(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function yi(){return $u}function $u(t){return t.type.prototype.ngOnChanges&&(t.setInput=ap),op}yi.ngInherit=!0;function op(){let t=zu(this),e=t?.current;if(e){let n=t.previous;if(n===Tn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ap(t,e,n,r,i){let s=this.declaredInputs[r],o=zu(t)||lp(t,{previous:Tn,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new Gs(u&&u.currentValue,n,l===Tn),Bu(t,e,i,n)}var Hu="__ngSimpleChanges__";function zu(t){return t[Hu]||null}function lp(t,e){return t[Hu]=e}var zl=null;var je=function(t,e,n){zl?.(t,e,n)},up="svg",cp="math";function Ye(t){for(;Array.isArray(t);)t=t[Ke];return t}function $e(t,e){return Ye(e[t.index])}function dp(t,e){return t.data[e]}function ln(t,e){let n=e[t];return wt(n)?n:n[Ke]}function Eo(t){return(t[C]&128)===128}function hp(t){return Je(t[oe])}function Wl(t,e){return e==null?null:t[e]}function Wu(t){t[qt]=0}function fp(t){t[C]&1024||(t[C]|=1024,Eo(t)&&Di(t))}function On(t){return!!(t[C]&9216||t[Ct]?.dirty)}function qs(t){t[Ze].changeDetectionScheduler?.notify(7),t[C]&64&&(t[C]|=1024),On(t)&&Di(t)}function Di(t){t[Ze].changeDetectionScheduler?.notify(0);let e=Fn(t);for(;e!==null&&!(e[C]&8192||(e[C]|=8192,!Eo(e)));)e=Fn(e)}function Gu(t,e){if((t[C]&256)===256)throw new w(911,!1);t[ut]===null&&(t[ut]=[]),t[ut].push(e)}function pp(t,e){if(t[ut]===null)return;let n=t[ut].indexOf(e);n!==-1&&t[ut].splice(n,1)}function Fn(t){let e=t[oe];return Je(e)?e[oe]:e}var V={lFrame:tc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qu=!1;function gp(){return V.lFrame.elementDepthCount}function mp(){V.lFrame.elementDepthCount++}function vp(){V.lFrame.elementDepthCount--}function Zu(){return V.bindingsEnabled}function yp(){return V.skipHydrationRootTNode!==null}function Dp(t){return V.skipHydrationRootTNode===t}function wp(){V.skipHydrationRootTNode=null}function we(){return V.lFrame.lView}function wi(){return V.lFrame.tView}function He(){let t=Yu();for(;t!==null&&t.type===64;)t=t.parent;return t}function Yu(){return V.lFrame.currentTNode}function _p(){let t=V.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _i(t,e){let n=V.lFrame;n.currentTNode=t,n.isParent=e}function Qu(){return V.lFrame.isParent}function bp(){V.lFrame.isParent=!1}function Xu(){return qu}function Gl(t){qu=t}function Cp(t){return V.lFrame.bindingIndex=t}function Ep(){return V.lFrame.inI18n}function xp(t,e){let n=V.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zs(e)}function Ip(){return V.lFrame.currentDirectiveIndex}function Zs(t){V.lFrame.currentDirectiveIndex=t}function Ku(t){V.lFrame.currentQueryIndex=t}function Mp(t){let e=t[O];return e.type===2?e.declTNode:e.type===1?t[Pe]:null}function Ju(t,e,n){if(n&M.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&M.Host);)if(i=Mp(s),i===null||(s=s[Bn],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=V.lFrame=ec();return r.currentTNode=e,r.lView=t,!0}function xo(t){let e=ec(),n=t[O];V.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ec(){let t=V.lFrame,e=t===null?null:t.child;return e===null?tc(t):e}function tc(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function nc(){let t=V.lFrame;return V.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var rc=nc;function Io(){let t=nc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Sp(){return V.lFrame.selectedIndex}function It(t){V.lFrame.selectedIndex=t}function Tp(){return V.lFrame.currentNamespace}var ic=!0;function sc(){return ic}function oc(t){ic=t}function Rp(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=$u(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ac(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),c!=null&&(t.destroyHooks??=[]).push(n,c)}}function zr(t,e,n){lc(t,e,3,n)}function Wr(t,e,n,r){(t[C]&3)===n&&lc(t,e,n,r)}function Ts(t,e){let n=t[C];(n&3)===e&&(n&=16383,n+=1,t[C]=n)}function lc(t,e,n,r){let i=r!==void 0?t[qt]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[qt]+=65536),(a<s||s==-1)&&(Ap(t,n,e,l),t[qt]=(t[qt]&4294901760)+l+2),l++}function ql(t,e){je(4,t,e);let n=L(null);try{e.call(t)}finally{L(n),je(5,t,e)}}function Ap(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[C]>>14<t[qt]>>16&&(t[C]&3)===e&&(t[C]+=16384,ql(a,s)):ql(a,s)}var Qt=-1,kn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Np(t){return t instanceof kn}function Pp(t){return(t.flags&8)!==0}function Op(t){return(t.flags&16)!==0}function uc(t){return t!==Qt}function ni(t){return t&32767}function Fp(t){return t>>16}function ri(t,e){let n=Fp(t),r=e;for(;n>0;)r=r[Bn],n--;return r}var Ys=!0;function Zl(t){let e=Ys;return Ys=t,e}var kp=256,cc=kp-1,dc=5,Lp=0,Ve={};function jp(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mn)&&(r=n[Mn]),r==null&&(r=n[Mn]=Lp++);let i=r&cc,s=1<<i;e.data[t+(i>>dc)]|=s}function hc(t,e){let n=fc(t,e);if(n!==-1)return n;let r=e[O];r.firstCreatePass&&(t.injectorIndex=e.length,Rs(r.data,t),Rs(e,null),Rs(r.blueprint,null));let i=Mo(t,e),s=t.injectorIndex;if(uc(i)){let o=ni(i),a=ri(i,e),l=a[O].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function Rs(t,e){t.push(0,0,0,0,0,0,0,0,e)}function fc(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Mo(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=yc(i),r===null)return Qt;if(n++,i=i[Bn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Qt}function Vp(t,e,n){jp(t,e,n)}function pc(t,e,n){if(n&M.Optional||t!==void 0)return t;vo(e,"NodeInjector")}function gc(t,e,n,r){if(n&M.Optional&&r===void 0&&(r=null),!(n&(M.Self|M.Host))){let i=t[tn],s=me(void 0);try{return i?i.get(e,r,n&M.Optional):bu(e,r,n&M.Optional)}finally{me(s)}}return pc(r,e,n)}function mc(t,e,n,r=M.Default,i){if(t!==null){if(e[C]&2048&&!(r&M.Self)){let o=zp(t,e,n,r,Ve);if(o!==Ve)return o}let s=vc(t,e,n,r,Ve);if(s!==Ve)return s}return gc(e,n,r,i)}function vc(t,e,n,r,i){let s=$p(n);if(typeof s=="function"){if(!Ju(e,t,r))return r&M.Host?pc(i,n,r):gc(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&M.Optional))vo(n);else return o}finally{rc()}}else if(typeof s=="number"){let o=null,a=fc(t,e),l=Qt,u=r&M.Host?e[Be][Pe]:null;for((a===-1||r&M.SkipSelf)&&(l=a===-1?Mo(t,e):e[a+8],l===Qt||!Ql(r,!1)?a=-1:(o=e[O],a=ni(l),e=ri(l,e)));a!==-1;){let c=e[O];if(Yl(s,a,c.data)){let d=Up(a,e,n,o,r,u);if(d!==Ve)return d}l=e[a+8],l!==Qt&&Ql(r,e[O].data[a+8]===u)&&Yl(s,a,e)?(o=c,a=ni(l),e=ri(l,e)):a=-1}}return i}function Up(t,e,n,r,i,s){let o=e[O],a=o.data[t+8],l=r==null?Co(a)&&Ys:r!=o&&(a.type&3)!==0,u=i&M.Host&&s===a,c=Bp(a,o,n,l,u);return c!==null?Ln(e,o,c,a):Ve}function Bp(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,u=t.directiveEnd,c=s>>20,d=r?a:a+c,h=i?a+c:u;for(let f=d;f<h;f++){let p=o[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(i){let f=o[l];if(f&&$n(f)&&f.type===n)return l}return null}function Ln(t,e,n,r){let i=t[n],s=e.data;if(Np(i)){let o=i;o.resolving&&wf(Df(s[n]));let a=Zl(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?me(o.injectImpl):null,c=Ju(t,r,M.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Rp(n,s[n],e)}finally{u!==null&&me(u),Zl(a),o.resolving=!1,rc()}}return i}function $p(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Mn)?t[Mn]:void 0;return typeof e=="number"?e>=0?e&cc:Hp:e}function Yl(t,e,n){let r=1<<t;return!!(n[e+(t>>dc)]&r)}function Ql(t,e){return!(t&M.Self)&&!(t&M.Host&&e)}var _t=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return mc(this._tNode,this._lView,e,hi(r),n)}};function Hp(){return new _t(He(),we())}function So(t){return mo(()=>{let e=t.prototype.constructor,n=e[Zr]||Qs(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Zr]||Qs(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Qs(t){return mu(t)?()=>{let e=Qs(ve(t));return e&&e()}:Xt(t)}function zp(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[C]&2048&&!(o[C]&512);){let a=vc(s,o,n,r|M.Self,Ve);if(a!==Ve)return a;let l=s.parent;if(!l){let u=o[Lu];if(u){let c=u.get(n,Ve,r);if(c!==Ve)return c}l=yc(o),o=o[Bn]}s=l}return i}function yc(t){let e=t[O],n=e.type;return n===2?e.declTNode:n===1?t[Pe]:null}function Xl(t,e=null,n=null,r){let i=Dc(t,e,n,r);return i.resolveInjectorInitializers(),i}function Dc(t,e=null,n=null,r,i=new Set){let s=[n||Kt,qf(t)];return r=r||(typeof t=="object"?void 0:de(t)),new Rn(s,e||bo(),r||null,i)}var Dt=class Dt{static create(e,n){if(Array.isArray(e))return Xl({name:""},n,e,"");{let r=e.name??"";return Xl({name:r},e.parent,e.providers,r)}}};Dt.THROW_IF_NOT_FOUND=Sn,Dt.NULL=new Xr,Dt.\u0275prov=E({token:Dt,providedIn:"any",factory:()=>R(Eu)}),Dt.__NG_ELEMENT_ID__=-1;var Mt=Dt;var Wp=new S("");Wp.__NG_ELEMENT_ID__=t=>{let e=He();if(e===null)throw new w(204,!1);if(e.type&2)return e.value;if(t&M.Optional)return null;throw new w(204,!1)};var Gp="ngOriginalError";function As(t){return t[Gp]}var Qe=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&As(e);for(;n&&As(n);)n=As(n);return n||null}},wc=new S("",{providedIn:"root",factory:()=>g(Qe).handleError.bind(void 0)}),_c=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qp,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Xs=class extends _c{constructor(e){super(),this._lView=e}onDestroy(e){return Gu(this._lView,e),()=>pp(this._lView,e)}};function qp(){return new Xs(we())}function Zp(){return To(He(),we())}function To(t,e){return new bi($e(t,e))}var bi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Zp;let t=e;return t})();var Ks=class extends ie{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,ip()&&(this.destroyRef=g(_c,{optional:!0})??void 0)}emit(e){let n=L(null);try{super.next(e)}finally{L(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Ns(s),i&&(i=Ns(i)),o&&(o=Ns(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Y&&e.add(a),a}};function Ns(t){return e=>{setTimeout(t,void 0,e)}}var se=Ks;function bc(t){return(t.flags&128)===128}var Cc=new Map,Yp=0;function Qp(){return Yp++}function Xp(t){Cc.set(t[vi],t)}function Kp(t){Cc.delete(t[vi])}var Kl="__ngContext__";function nn(t,e){wt(e)?(t[Kl]=e[vi],Xp(e)):t[Kl]=e}function Ec(t){return Ic(t[Nn])}function xc(t){return Ic(t[Ae])}function Ic(t){for(;t!==null&&!Je(t);)t=t[Ae];return t}var Js;function Mc(t){Js=t}function Jp(){if(Js!==void 0)return Js;if(typeof document<"u")return document;throw new w(210,!1)}var Ro=new S("",{providedIn:"root",factory:()=>eg}),eg="ng",Ao=new S(""),un=new S("",{providedIn:"platform",factory:()=>"unknown"});var No=new S("",{providedIn:"root",factory:()=>Jp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tg="h",ng="b";var rg=()=>null;function Po(t,e,n=!1){return rg(t,e,n)}var Sc=!1,ig=new S("",{providedIn:"root",factory:()=>Sc});function Tc(t){return t.ownerDocument.defaultView}function Rc(t){return t instanceof Function?t():t}var St=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(St||{}),sg;function Oo(t,e){return sg(t,e)}function Zt(t,e,n,r,i){if(r!=null){let s,o=!1;Je(r)?s=r:wt(r)&&(o=!0,r=r[Ke]);let a=Ye(r);t===0&&n!==null?i==null?Fc(e,n,a):ii(e,n,a,i||null,!0):t===1&&n!==null?ii(e,n,a,i||null,!0):t===2?wg(e,a,o):t===3&&e.destroyNode(a),s!=null&&bg(e,t,s,n,i)}}function og(t,e){return t.createText(e)}function Ac(t,e,n){return t.createElement(e,n)}function ag(t,e){Nc(t,e),e[Ke]=null,e[Pe]=null}function lg(t,e,n,r,i,s){r[Ke]=i,r[Pe]=e,Ci(t,r,n,1,i,s)}function Nc(t,e){e[Ze].changeDetectionScheduler?.notify(8),Ci(t,e,e[Ne],2,null,null)}function ug(t){let e=t[Nn];if(!e)return Ps(t[O],t);for(;e;){let n=null;if(wt(e))n=e[Nn];else{let r=e[ye];r&&(n=r)}if(!n){for(;e&&!e[Ae]&&e!==t;)wt(e)&&Ps(e[O],e),e=e[oe];e===null&&(e=t),wt(e)&&Ps(e[O],e),n=e&&e[Ae]}e=n}}function cg(t,e,n,r){let i=ye+r,s=n.length;r>0&&(n[i-1][Ae]=e),r<s-ye?(e[Ae]=n[i],Cu(n,ye+r,e)):(n.push(e),e[Ae]=null),e[oe]=n;let o=e[Pn];o!==null&&n!==o&&Pc(o,e);let a=e[mi];a!==null&&a.insertView(t),qs(e),e[C]|=128}function Pc(t,e){let n=t[ei],r=e[oe];if(wt(r))t[C]|=ti.HasTransplantedViews;else{let i=r[oe][Be];e[Be]!==i&&(t[C]|=ti.HasTransplantedViews)}n===null?t[ei]=[e]:n.push(e)}function Fo(t,e){let n=t[ei],r=n.indexOf(e);n.splice(r,1)}function eo(t,e){if(t.length<=ye)return;let n=ye+e,r=t[n];if(r){let i=r[Pn];i!==null&&i!==t&&Fo(i,r),e>0&&(t[n-1][Ae]=r[Ae]);let s=Qr(t,ye+e);ag(r[O],r);let o=s[mi];o!==null&&o.detachView(s[O]),r[oe]=null,r[Ae]=null,r[C]&=-129}return r}function Oc(t,e){if(!(e[C]&256)){let n=e[Ne];n.destroyNode&&Ci(t,e,n,3,null,null),ug(e)}}function Ps(t,e){if(e[C]&256)return;let n=L(null);try{e[C]&=-129,e[C]|=256,e[Ct]&&rl(e[Ct]),hg(t,e),dg(t,e),e[O].type===1&&e[Ne].destroy();let r=e[Pn];if(r!==null&&Je(e[oe])){r!==e[oe]&&Fo(r,e);let i=e[mi];i!==null&&i.detachView(t)}Kp(e)}finally{L(n)}}function dg(t,e){let n=t.cleanup,r=e[An];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[An]=null);let i=e[ut];if(i!==null){e[ut]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function hg(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof kn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];je(4,a,l);try{l.call(a)}finally{je(5,a,l)}}else{je(4,i,s);try{s.call(i)}finally{je(5,i,s)}}}}}function fg(t,e,n){return pg(t,e.parent,n)}function pg(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ke];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ue.None||s===Ue.Emulated)return null}return $e(r,n)}}function ii(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Fc(t,e,n){t.appendChild(e,n)}function Jl(t,e,n,r,i){r!==null?ii(t,e,n,r,i):Fc(t,e,n)}function gg(t,e,n,r){t.removeChild(e,n,r)}function ko(t,e){return t.parentNode(e)}function mg(t,e){return t.nextSibling(e)}function vg(t,e,n){return Dg(t,e,n)}function yg(t,e,n){return t.type&40?$e(t,n):null}var Dg=yg,eu;function kc(t,e,n,r){let i=fg(t,r,e),s=e[Ne],o=r.parent||e[Pe],a=vg(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Jl(s,i,n[l],a,!1);else Jl(s,i,n,a,!1);eu!==void 0&&eu(s,r,e,n,i)}function Gr(t,e){if(e!==null){let n=e.type;if(n&3)return $e(e,t);if(n&4)return to(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Gr(t,r);{let i=t[e.index];return Je(i)?to(-1,i):Ye(i)}}else{if(n&32)return Oo(e,t)()||Ye(t[e.index]);{let r=Lc(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fn(t[Be]);return Gr(i,r)}else return Gr(t,e.next)}}}return null}function Lc(t,e){if(e!==null){let r=t[Be][Pe],i=e.projection;return r.projection[i]}return null}function to(t,e){let n=ye+t+1;if(n<e.length){let r=e[n],i=r[O].firstChild;if(i!==null)return Gr(r,i)}return e[xt]}function wg(t,e,n){let r=ko(t,e);r&&gg(t,r,e,n)}function Lo(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],l=n.type;if(o&&e===0&&(a&&nn(Ye(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Lo(t,e,n.child,r,i,s,!1),Zt(e,t,i,a,s);else if(l&32){let u=Oo(n,r),c;for(;c=u();)Zt(e,t,i,c,s);Zt(e,t,i,a,s)}else l&16?_g(t,e,r,n,i,s):Zt(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ci(t,e,n,r,i,s){Lo(n,r,t.firstChild,e,i,s,!1)}function _g(t,e,n,r,i,s){let o=n[Be],l=o[Pe].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let c=l[u];Zt(e,t,i,c,s)}else{let u=l,c=o[oe];bc(r)&&(u.flags|=128),Lo(t,e,u,c,i,s,!0)}}function bg(t,e,n,r,i){let s=n[xt],o=Ye(n);s!==o&&Zt(e,t,r,s,i);for(let a=ye;a<n.length;a++){let l=n[a];Ci(l[O],l,t,e,r,s)}}function Cg(t,e,n){t.setAttribute(e,"style",n)}function jc(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Vc(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Us(t,e,r),i!==null&&jc(t,e,i),s!==null&&Cg(t,e,s)}var Uc={};function Eg(t,e,n,r){if(!r)if((e[C]&3)===3){let s=t.preOrderCheckHooks;s!==null&&zr(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Wr(e,s,0,n)}It(n)}function jo(t,e=M.Default){let n=we();if(n===null)return R(t,e);let r=He();return mc(r,n,ve(t),e)}function Bc(t,e,n,r,i,s){let o=L(null);try{let a=null;i&en.SignalBased&&(a=e[r][Ja]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&en.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Bu(e,a,r,s)}finally{L(o)}}function xg(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)It(~i);else{let s=i,o=n[++r],a=n[++r];xp(o,s);let l=e[s];a(2,l)}}}finally{It(-1)}}function Vo(t,e,n,r,i,s,o,a,l,u,c){let d=e.blueprint.slice();return d[Ke]=i,d[C]=r|4|128|8|64,(u!==null||t&&t[C]&2048)&&(d[C]|=2048),Wu(d),d[oe]=d[Bn]=t,d[qe]=n,d[Ze]=o||t&&t[Ze],d[Ne]=a||t&&t[Ne],d[tn]=l||t&&t[tn]||null,d[Pe]=s,d[vi]=Qp(),d[Kr]=c,d[Lu]=u,d[Be]=e.type==2?t[Be]:d,d}function Uo(t,e,n,r,i){let s=t.data[e];if(s===null)s=Ig(t,e,n,r,i),Ep()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=_p();s.injectorIndex=o===null?-1:o.injectorIndex}return _i(s,!0),s}function Ig(t,e,n,r,i){let s=Yu(),o=Qu(),a=o?s:s&&s.parent,l=t.data[e]=Pg(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function $c(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Hc(t,e,n,r,i){let s=Sp(),o=r&2;try{It(-1),o&&e.length>Et&&Eg(t,e,Et,!1),je(o?2:0,i),n(r,i)}finally{It(s),je(o?3:1,i)}}function zc(t,e,n){if(Vu(e)){let r=L(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{L(r)}}}function Mg(t,e,n){Zu()&&(jg(t,e,n,$e(n,e)),(n.flags&64)===64&&Zc(t,e,n))}function Sg(t,e,n=$e){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Wc(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Gc(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Gc(t,e,n,r,i,s,o,a,l,u,c){let d=Et+r,h=d+i,f=Tg(d,h),p=typeof u=="function"?u():u;return f[O]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}function Tg(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Uc);return n}function Rg(t,e,n,r){let s=r.get(ig,Sc)||n===Ue.ShadowDom,o=t.selectRootElement(e,s);return Ag(o),o}function Ag(t){Ng(t)}var Ng=()=>null;function Pg(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return yp()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function tu(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=en.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?nu(r,n,u,a,l):nu(r,n,u,a)}return r}function nu(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Og(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,u=null;for(let c=r;c<i;c++){let d=s[c],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=tu(0,d.inputs,c,l,f),u=tu(1,d.outputs,c,u,p);let m=l!==null&&o!==null&&!wo(e)?qg(l,c,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function Fg(t,e,n,r){if(Zu()){let i=r===null?null:{"":-1},s=Ug(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&qc(t,e,n,o,i,a),i&&Bg(n,r,i)}n.mergedAttrs=Do(n.mergedAttrs,n.attrs)}function qc(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Vp(hc(n,e),t,r[u].type);Hg(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let c=r[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=$c(t,e,r.length,null);for(let u=0;u<r.length;u++){let c=r[u];n.mergedAttrs=Do(n.mergedAttrs,c.hostAttrs),zg(t,n,e,l,c),$g(l,c,i),c.contentQueries!==null&&(n.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(n.flags|=64);let d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Og(t,n,s)}function kg(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Lg(o)!=a&&o.push(a),o.push(n,r,s)}}function Lg(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jg(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Co(n)&&Wg(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||hc(n,e),nn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],u=Ln(e,t,a,n);if(nn(u,e),o!==null&&Gg(e,a-i,u,l,n,o),$n(l)){let c=ln(n.index,e);c[qe]=Ln(e,t,a,n)}}}function Zc(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ip();try{It(s);for(let a=r;a<i;a++){let l=t.data[a],u=e[a];Zs(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Vg(l,u)}}finally{It(-1),Zs(o)}}function Vg(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Ug(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(jf(e,o.selectors,!1))if(r||(r=[]),$n(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;no(t,e,l)}else r.unshift(o),no(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function no(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Bg(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new w(-301,!1);r.push(e[i],s)}}}function $g(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;$n(e)&&(n[""]=t)}}function Hg(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zg(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Xt(i.type,!0)),o=new kn(s,$n(i),jo);t.blueprint[r]=o,n[r]=o,kg(t,e,r,$c(t,n,i.hostVars,Uc),i)}function Wg(t,e,n){let r=$e(e,t),i=Wc(n),s=t[Ze].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Bo(t,Vo(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Gg(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],c=o[a++],d=o[a++];Bc(r,n,l,u,c,d)}}function qg(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Zg(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Yc(t,e){let n=t.contentQueries;if(n!==null){let r=L(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Ku(s),a.contentQueries(2,e[o],o)}}}finally{L(r)}}}function Bo(t,e){return t[Nn]?t[Hl][Ae]=e:t[Nn]=e,t[Hl]=e,e}function ro(t,e,n){Ku(0);let r=L(null);try{e(t,n)}finally{L(r)}}function Yg(t){return t[An]||(t[An]=[])}function Qg(t){return t.cleanup||(t.cleanup=[])}function Qc(t,e){let n=t[tn],r=n?n.get(Qe,null):null;r&&r.handleError(e)}function Xc(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],u=e[o],c=t.data[o];Bc(c,u,r,a,l,i)}}function Xg(t,e){let n=ln(e,t),r=n[O];Kg(r,n);let i=n[Ke];i!==null&&n[Kr]===null&&(n[Kr]=Po(i,n[tn])),Kc(r,n,n[qe])}function Kg(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Kc(t,e,n){xo(e);try{let r=t.viewQuery;r!==null&&ro(1,r,n);let i=t.template;i!==null&&Hc(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[mi]?.finishViewCreation(t),t.staticContentQueries&&Yc(t,e),t.staticViewQueries&&ro(2,t.viewQuery,n);let s=t.components;s!==null&&Jg(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[C]&=-5,Io()}}function Jg(t,e){for(let n=0;n<e.length;n++)Xg(t,e[n])}function ru(t,e){return!e||e.firstChild===null||bc(t)}function em(t,e,n,r=!0){let i=e[O];if(cg(i,e,t,n),r){let o=to(n,t),a=e[Ne],l=ko(a,t[xt]);l!==null&&lg(i,t[Pe],a,e,l,o)}let s=e[Kr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function si(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Ye(s)),Je(s)&&tm(s,r);let o=n.type;if(o&8)si(t,e,n.child,r);else if(o&32){let a=Oo(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=Lc(e,n);if(Array.isArray(a))r.push(...a);else{let l=Fn(e[Be]);si(l[O],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function tm(t,e){for(let n=ye;n<t.length;n++){let r=t[n],i=r[O].firstChild;i!==null&&si(r[O],r,i,e)}t[xt]!==t[Ke]&&e.push(t[xt])}var Jc=[];function nm(t){return t[Ct]??rm(t)}function rm(t){let e=Jc.pop()??Object.create(sm);return e.lView=t,e}function im(t){t.lView[Ct]!==t&&(t.lView=null,Jc.push(t))}var sm=Z(y({},el),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Di(t.lView)},consumerOnSignalRead(){this.lView[Ct]=this}}),om=100;function ed(t,e=!0,n=0){let r=t[Ze],i=r.rendererFactory,s=!1;s||i.begin?.();try{am(t,n)}catch(o){throw e&&Qc(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function am(t,e){let n=Xu();try{Gl(!0),io(t,e);let r=0;for(;On(t);){if(r===om)throw new w(103,!1);r++,io(t,1)}}finally{Gl(n)}}function lm(t,e,n,r){let i=e[C];if((i&256)===256)return;let s=!1;!s&&e[Ze].inlineEffectRunner?.flush(),xo(e);let o=null,a=null;!s&&um(t)&&(a=nm(e),o=tl(a));try{Wu(e),Cp(t.bindingStartIndex),n!==null&&Hc(t,e,n,2,r);let l=(i&3)===3;if(!s)if(l){let d=t.preOrderCheckHooks;d!==null&&zr(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Wr(e,d,0,null),Ts(e,0)}if(cm(e),td(e,0),t.contentQueries!==null&&Yc(t,e),!s)if(l){let d=t.contentCheckHooks;d!==null&&zr(e,d)}else{let d=t.contentHooks;d!==null&&Wr(e,d,1),Ts(e,1)}xg(t,e);let u=t.components;u!==null&&rd(e,u,0);let c=t.viewQuery;if(c!==null&&ro(2,c,r),!s)if(l){let d=t.viewCheckHooks;d!==null&&zr(e,d)}else{let d=t.viewHooks;d!==null&&Wr(e,d,2),Ts(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ss]){for(let d of e[Ss])d();e[Ss]=null}s||(e[C]&=-73)}catch(l){throw s||Di(e),l}finally{a!==null&&(nl(a,o),im(a)),Io()}}function um(t){return t.type!==2}function td(t,e){for(let n=Ec(t);n!==null;n=xc(n))for(let r=ye;r<n.length;r++){let i=n[r];nd(i,e)}}function cm(t){for(let e=Ec(t);e!==null;e=xc(e)){if(!(e[C]&ti.HasTransplantedViews))continue;let n=e[ei];for(let r=0;r<n.length;r++){let i=n[r];fp(i)}}}function dm(t,e,n){let r=ln(e,t);nd(r,n)}function nd(t,e){Eo(t)&&io(t,e)}function io(t,e){let r=t[O],i=t[C],s=t[Ct],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&ls(s)),o||=!1,s&&(s.dirty=!1),t[C]&=-9217,o)lm(r,t,r.template,t[qe]);else if(i&8192){td(t,1);let a=r.components;a!==null&&rd(t,a,1)}}function rd(t,e,n){for(let r=0;r<e.length;r++)dm(t,e[r],n)}function $o(t,e){let n=Xu()?64:1088;for(t[Ze].changeDetectionScheduler?.notify(e);t;){t[C]|=n;let r=Fn(t);if(Ws(t)&&!r)return t;t=r}return null}var rn=class{get rootNodes(){let e=this._lView,n=e[O];return si(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qe]}set context(e){this._lView[qe]=e}get destroyed(){return(this._lView[C]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[oe];if(Je(e)){let n=e[Jr],r=n?n.indexOf(this):-1;r>-1&&(eo(e,r),Qr(n,r))}this._attachedToViewContainer=!1}Oc(this._lView[O],this._lView)}onDestroy(e){Gu(this._lView,e)}markForCheck(){$o(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[C]&=-129}reattach(){qs(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,ed(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ws(this._lView),n=this._lView[Pn];n!==null&&!e&&Fo(n,this._lView),Nc(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=e;let n=Ws(this._lView),r=this._lView[Pn];r!==null&&!n&&Pc(r,this._lView),qs(this._lView)}};var Bx=new RegExp(`^(\\d+)*(${ng}|${tg})*(.*)`);var hm=()=>null;function iu(t,e){return hm(t,e)}var sn=class{},Ei=new S("",{providedIn:"root",factory:()=>!1}),id=new S(""),so=class{},oi=class{};function fm(t){let e=Error(`No component factory found for ${de(t)}.`);return e[pm]=t,e}var pm="ngComponent";var oo=class{resolveComponentFactory(e){throw fm(e)}},Qo=class Qo{};Qo.NULL=new oo;var on=Qo,an=class{};var gm=(()=>{let e=class e{};e.\u0275prov=E({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Os={};var su=new Set;function Ho(t){su.has(t)||(su.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function sd(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Ls.requestAnimationFrame=="function"&&Ls.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function ou(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function au(...t){}var Q=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new se(!1),this.onMicrotaskEmpty=new se(!1),this.onStable=new se(!1),this.onError=new se(!1),typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,ym(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new w(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,mm,au,au);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},mm={};function zo(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vm(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{sd(()=>{t.callbackScheduled=!1,ao(t),t.isCheckStableRunning=!0,zo(t),t.isCheckStableRunning=!1})}),ao(t))}function ym(t){let e=()=>{vm(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(Dm(a))return n.invokeTask(i,s,o,a);try{return lu(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),uu(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return lu(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!wm(a)&&e(),uu(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,ao(t),zo(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function ao(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function lu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uu(t){t._nesting--,zo(t)}var ai=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new se,this.onMicrotaskEmpty=new se,this.onStable=new se,this.onError=new se}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Dm(t){return od(t,"__ignore_ng_zone__")}function wm(t){return od(t,"__scheduler_tick__")}function od(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ad=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function lo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Pl(i,a);else if(s==2){let l=a,u=e[++o];r=Pl(r,l+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var li=class extends on{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=bt(e);return new jn(n,this.ngModule)}};function cu(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function _m(t){let e=t.toLowerCase();return e==="svg"?up:e==="math"?cp:null}var uo=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=hi(r);let i=this.injector.get(e,Os,r);return i!==Os||n===Os?i:this.parentInjector.get(e,n,r)}},jn=class extends oi{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=cu(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return cu(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$f(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=L(null);try{i=i||this.ngModule;let o=i instanceof De?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new uo(e,o):e,l=a.get(an,null);if(l===null)throw new w(407,!1);let u=a.get(gm,null),c=a.get(ad,null),d=a.get(sn,null),h={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:d},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?Rg(f,r,this.componentDef.encapsulation,a):Ac(f,p,_m(p)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let I=null;m!==null&&(I=Po(m,a,!0));let F=Gc(0,null,null,1,0,null,null,null,null,null,null),A=Vo(null,F,null,D,null,null,h,f,a,null,I);xo(A);let H,G;try{let $=this.componentDef,q,le=null;$.findHostDirectiveDefs?(q=[],le=new Map,$.findHostDirectiveDefs($,q,le),q.push($)):q=[$];let pe=bm(A,m),ge=Cm(pe,m,$,q,A,h,f);G=dp(F,Et),m&&Im(f,$,m,r),n!==void 0&&Mm(G,this.ngContentSelectors,n),H=xm(ge,$,q,le,A,[Sm]),Kc(F,A,null)}finally{Io()}return new co(this.componentType,H,To(G,A),A,G)}finally{L(s)}}},co=class extends so{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new rn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Xc(s[O],s,i,e,n),this.previousInputValues.set(e,n);let o=ln(this._tNode.index,s);$o(o,1)}}get injector(){return new _t(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bm(t,e){let n=t[O],r=Et;return t[r]=e,Uo(n,r,2,"#host",null)}function Cm(t,e,n,r,i,s,o){let a=i[O];Em(r,t,e,o);let l=null;e!==null&&(l=Po(e,i[tn]));let u=s.rendererFactory.createRenderer(e,n),c=16;n.signals?c=4096:n.onPush&&(c=64);let d=Vo(i,Wc(n),null,c,i[t.index],t,s,u,null,null,l);return a.firstCreatePass&&no(a,t,r.length-1),Bo(i,d),i[t.index]=d}function Em(t,e,n,r){for(let i of t)e.mergedAttrs=Do(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(lo(e,e.mergedAttrs,!0),n!==null&&Vc(r,n,e))}function xm(t,e,n,r,i,s){let o=He(),a=i[O],l=$e(o,i);qc(a,i,o,n,null,r);for(let c=0;c<n.length;c++){let d=o.directiveStart+c,h=Ln(i,a,d,o);nn(h,i)}Zc(a,i,o),l&&nn(l,i);let u=Ln(i,a,o.directiveStart+o.componentOffset,o);if(t[qe]=i[qe]=u,s!==null)for(let c of s)c(u,e);return zc(a,o,i),u}function Im(t,e,n,r){if(r)Us(t,n,["ng-version","18.0.0-rc.1"]);else{let{attrs:i,classes:s}=Hf(e.selectors[0]);i&&Us(t,n,i),s&&s.length>0&&jc(t,n,s.join(" "))}}function Mm(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Sm(){let t=He();ac(we()[O],t)}var xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Tm;let t=e;return t})();function Tm(){let t=He();return Am(t,we())}var Rm=xi,ld=class extends Rm{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return To(this._hostTNode,this._hostLView)}get injector(){return new _t(this._hostTNode,this._hostLView)}get parentInjector(){let e=Mo(this._hostTNode,this._hostLView);if(uc(e)){let n=ri(e,this._hostLView),r=ni(e),i=n[O].data[r+8];return new _t(i,n)}else return new _t(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=du(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ye}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=iu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,ru(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!sp(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new jn(bt(e)),u=r||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?u:this.parentInjector).get(De,null);m&&(s=m)}let c=bt(l.componentType??{}),d=iu(this._lContainer,c?.id??null),h=d?.firstChild??null,f=l.create(u,i,h,s);return this.insertImpl(f.hostView,a,ru(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hp(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[oe],u=new ld(l,l[Pe],l[oe]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return em(o,i,s,r),e.attachToViewContainerRef(),Cu(Fs(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=du(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=eo(this._lContainer,n);r&&(Qr(Fs(this._lContainer),n),Oc(r[O],r))}detach(e){let n=this._adjustIndex(e,-1),r=eo(this._lContainer,n);return r&&Qr(Fs(this._lContainer),n)!=null?new rn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function du(t){return t[Jr]}function Fs(t){return t[Jr]||(t[Jr]=[])}function Am(t,e){let n,r=e[t.index];return Je(r)?n=r:(n=Zg(r,e,null,t),e[t.index]=n,Bo(e,n)),Pm(n,e,t,r),new ld(n,t,e)}function Nm(t,e){let n=t[Ne],r=n.createComment(""),i=$e(e,t),s=ko(n,i);return ii(n,s,r,mg(n,i),!1),r}var Pm=Om;function Om(t,e,n,r){if(t[xt])return;let i;n.type&8?i=Ye(r):i=Nm(e,n),t[xt]=i}var ct=class{},Vn=class{};var ho=class extends ct{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new li(this);let i=Au(e);this._bootstrapComponents=Rc(i.bootstrap),this._r3Injector=Dc(e,n,[{provide:ct,useValue:this},{provide:on,useValue:this.componentFactoryResolver},...r],de(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fo=class extends Vn{constructor(e){super(),this.moduleType=e}create(e){return new ho(this.moduleType,e,[])}};var ui=class extends ct{constructor(e){super(),this.componentFactoryResolver=new li(this),this.instance=null;let n=new Rn([...e.providers,{provide:ct,useValue:this},{provide:on,useValue:this.componentFactoryResolver}],e.parent||bo(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wo(t,e,n=null){return new ui({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Hn=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ee(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Fm(t){return(t.flags&32)===32}function hu(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Xc(t,n,s[o],o,r)}function km(t,e,n,r,i,s){let o=e.consts,a=Wl(o,i),l=Uo(e,t,2,r,a);return Fg(e,n,l,Wl(o,s)),l.attrs!==null&&lo(l,l.attrs,!1),l.mergedAttrs!==null&&lo(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function dt(t,e,n,r){let i=we(),s=wi(),o=Et+t,a=i[Ne],l=s.firstCreatePass?km(o,s,i,e,n,r):s.data[o],u=Lm(s,i,l,a,e,t);i[o]=u;let c=Uu(l);return _i(l,!0),Vc(a,u,l),!Fm(l)&&sc()&&kc(s,i,u,l),gp()===0&&nn(u,i),mp(),c&&(Mg(s,i,l),zc(s,l,i)),r!==null&&Sg(i,l),dt}function zn(){let t=He();Qu()?bp():(t=t.parent,_i(t,!1));let e=t;Dp(e)&&wp(),vp();let n=wi();return n.firstCreatePass&&(ac(n,t),Vu(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Pp(e)&&hu(n,e,we(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Op(e)&&hu(n,e,we(),e.stylesWithoutHost,!1),zn}function Tt(t,e,n,r){return dt(t,e,n,r),zn(),Tt}var Lm=(t,e,n,r,i,s)=>(oc(!0),Ac(r,i,Tp()));var ci="en-US";var jm=ci;function Vm(t){typeof t=="string"&&(jm=t.toLowerCase().replace(/_/g,"-"))}var Um=t=>{};function Ii(t,e,n,r){let i=we(),s=wi(),o=He();return $m(s,i,i[Ne],o,t,e,r),Ii}function Bm(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[An],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function $m(t,e,n,r,i,s,o){let a=Uu(r),u=t.firstCreatePass&&Qg(t),c=e[qe],d=Yg(e),h=!0;if(r.type&3||o){let m=$e(r,e),D=o?o(m):m,I=d.length,F=o?H=>o(Ye(H[r.index])):r.index;Um(m);let A=null;if(!o&&a&&(A=Bm(t,e,i,r.index)),A!==null){let H=A.__ngLastListenerFn__||A;H.__ngNextListenerFn__=s,A.__ngLastListenerFn__=s,h=!1}else{s=pu(r,e,c,s,!1);let H=n.listen(D,i,s);d.push(s,H),u&&u.push(i,F,I,I+1)}}else s=pu(r,e,c,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let m=p.length;if(m)for(let D=0;D<m;D+=2){let I=p[D],F=p[D+1],G=e[I][F].subscribe(s),$=d.length;d.push(s,G),u&&u.push(i,r.index,$,-($+1))}}}function fu(t,e,n,r){let i=L(null);try{return je(6,e,n),n(r)!==!1}catch(s){return Qc(t,s),!1}finally{je(7,e,n),L(i)}}function pu(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?ln(t.index,e):e;$o(a,5);let l=fu(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)l=fu(e,n,u,o)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&o.preventDefault(),l}}function Go(t,e=""){let n=we(),r=wi(),i=t+Et,s=r.firstCreatePass?Uo(r,i,1,e,null):r.data[i],o=Hm(r,n,s,e,t);n[i]=o,sc()&&kc(r,n,o,s),_i(s,!1)}var Hm=(t,e,n,r,i)=>(oc(!0),og(e[Ne],r));var zm=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Ou(!1,r.type),s=i.length>0?Wo([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(R(De))});let t=e;return t})();function Mi(t){Ho("NgStandalone"),t.getStandaloneInjector=e=>e.get(zm).getOrCreateStandaloneInjector(t)}var Si=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var ud=new S("");function Wn(t){return!!t&&typeof t.then=="function"}function cd(t){return!!t&&typeof t.subscribe=="function"}var dd=new S(""),hd=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=g(dd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Wn(o))r.push(o);else if(cd(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qo=new S("");function Wm(){il(()=>{throw new w(600,!1)})}function Gm(t){return t.isBoundToModule}var qm=10;function Zm(t,e,n){try{let r=n();return Wn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var cn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=g(wc),this.afterRenderEffectManager=g(ad),this.zonelessEnabled=g(Ei),this.externalTestViews=new Set,this.beforeRender=new ie,this.afterTick=new ie,this.componentTypes=[],this.components=[],this.isStable=g(Hn).hasPendingTasks.pipe(T(r=>!r)),this._injector=g(De)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof oi;if(!this._injector.get(hd).done){let f=!s&&Ru(r),p=!1;throw new w(405,p)}let a;s?a=r:a=this._injector.get(on).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=Gm(a)?void 0:this._injector.get(ct),u=i||a.selector,c=a.create(Mt.NULL,[],u,l),d=c.location.nativeElement,h=c.injector.get(ud,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),ks(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new w(101,!1);let i=L(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,L(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(an,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<qm;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:u}of this._views)Ym(l,u,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>On(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>On(l))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;ks(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(qo,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ks(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new w(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ks(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ym(t,e,n,r){if(!n&&!On(t))return;ed(t,e,n&&!r?0:1)}var po=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Zo=(()=>{let e=class e{compileModuleSync(r){return new fo(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Au(r),o=Rc(s.declarations).reduce((a,l)=>{let u=bt(l);return u&&a.push(new jn(u)),a},[]);return new po(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qm=!0;var fd=(()=>{let e=class e{constructor(){this.appRef=g(cn),this.taskService=g(Hn),this.ngZone=g(Q),this.zonelessEnabled=g(Ei),this.disableScheduling=g(id,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Y,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ai||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?ou:sd;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Q.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ou(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pd(){return Ho("NgZoneless"),pi([{provide:sn,useExisting:fd},{provide:Q,useClass:ai},{provide:Ei,useValue:!0}])}var Xm=(()=>{let e=class e{constructor(){this.zone=g(Q),this.changeDetectionScheduler=g(sn,{optional:!0}),this.applicationRef=g(cn),this.zonelessEnabled=g(Ei)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler?.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Km({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Q(ev()),[{provide:Q,useFactory:t},{provide:Jt,multi:!0,useFactory:()=>{let n=g(Xm,{optional:!0});return()=>n.initialize()}},{provide:Jt,multi:!0,useFactory:()=>{let n=g(tv);return()=>{n.initialize()}}},{provide:wc,useFactory:Jm},e===!0?{provide:id,useValue:!0}:[],Qm||e===!1?{provide:sn,useExisting:fd}:[]]}function Jm(){let t=g(Q),e=g(Qe);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ev(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var tv=(()=>{let e=class e{constructor(){this.subscription=new Y,this.initialized=!1,this.zone=g(Q),this.pendingTasks=g(Hn)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Q.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Q.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nv(){return typeof $localize<"u"&&$localize.locale||ci}var Yo=new S("",{providedIn:"root",factory:()=>g(Yo,M.Optional|M.SkipSelf)||nv()});var gd=new S("");var qr=null;function rv(t=[],e){return Mt.create({name:e,providers:[{provide:gi,useValue:"platform"},{provide:gd,useValue:new Set([()=>qr=null])},...t]})}function iv(t=[]){if(qr)return qr;let e=rv(t);return qr=e,Wm(),sv(e),e}function sv(t){t.get(Ao,null)?.forEach(n=>n())}var Gn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ov;let t=e;return t})();function ov(t){return av(He(),we(),(t&16)===16)}function av(t,e,n){if(Co(t)&&!n){let r=ln(t.index,e);return new rn(r,r)}else if(t.type&47){let r=e[Be];return new rn(r,e)}return null}function md(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=iv(r),s=[Km({}),...n||[]],a=new ui({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Q);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Qe,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(gd);return h.add(d),a.onDestroy(()=>{c.unsubscribe(),h.delete(d)}),Zm(u,l,()=>{let f=a.get(hd);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(Yo,ci);Vm(p||ci);let m=a.get(cn);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var Cd=null;function dn(){return Cd}function Ed(t){Cd??=t}var Ti=class{};var _e=new S(""),xd=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>g(hv),providedIn:"platform"});let t=e;return t})();var hv=(()=>{let e=class e extends xd{constructor(){super(),this._doc=g(_e),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dn().getBaseHref(this._doc)}onPopState(r){let i=dn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=dn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Id(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function vd(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Rt(t){return t&&t[0]!=="?"?"?"+t:t}var Ai=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>g(Md),providedIn:"root"});let t=e;return t})(),fv=new S(""),Md=(()=>{let e=class e extends Ai{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??g(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Id(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Rt(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Rt(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Rt(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(R(xd),R(fv,8))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zn=(()=>{let e=class e{constructor(r){this._subject=new se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=mv(vd(yd(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Rt(i))}normalize(r){return e.stripTrailingSlash(gv(this._basePath,yd(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rt(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rt(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Rt,e.joinWithSlash=Id,e.stripTrailingSlash=vd,e.\u0275fac=function(i){return new(i||e)(R(Ai))},e.\u0275prov=E({token:e,factory:()=>pv(),providedIn:"root"});let t=e;return t})();function pv(){return new Zn(R(Ai))}function gv(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function yd(t){return t.replace(/\/index.html$/,"")}function mv(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Sd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Td="browser",vv="server";function Xo(t){return t===vv}var Ri=class{};var ea=class extends Ti{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ta=class t extends ea{static makeCurrent(){Ed(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Dv();return n==null?null:wv(n)}resetBaseElement(){Yn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sd(document.cookie,e)}},Yn=null;function Dv(){return Yn=Yn||document.querySelector("base"),Yn?Yn.getAttribute("href"):null}function wv(t){return new URL(t,document.baseURI).pathname}var _v=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),na=new S(""),Pd=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new w(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(R(na),R(Q))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),Ni=class{constructor(e){this._doc=e}},Ko="ng-app-id",Od=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xo(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ko}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Ko),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ko,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(R(_e),R(Ro),R(No,8),R(un))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),Jo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ia=/%COMP%/g,Fd="%COMP%",bv=`_nghost-${Fd}`,Cv=`_ngcontent-${Fd}`,Ev=!0,xv=new S("",{providedIn:"root",factory:()=>Ev});function Iv(t){return Cv.replace(ia,t)}function Mv(t){return bv.replace(ia,t)}function kd(t,e){return e.map(n=>n.replace(ia,t))}var Rd=(()=>{let e=class e{constructor(r,i,s,o,a,l,u,c=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Xo(l),this.defaultRenderer=new Qn(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ue.ShadowDom&&(i=Z(y({},i),{encapsulation:Ue.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Pi?s.applyToHost(r):s instanceof Xn&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Ue.Emulated:o=new Pi(u,c,i,this.appId,d,a,l,h);break;case Ue.ShadowDom:return new ra(u,c,r,i,a,l,this.nonce,h);default:o=new Xn(u,c,i,d,a,l,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(R(Pd),R(Od),R(Ro),R(xv),R(_e),R(un),R(Q),R(No))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),Qn=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Jo[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ad(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ad(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new w(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Jo[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Jo[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(St.DashCase|St.Important)?e.style.setProperty(n,r,i&St.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&St.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=dn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Ad(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ra=class extends Qn{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=kd(i.id,i.styles);for(let c of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xn=class extends Qn{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?kd(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pi=class extends Xn{constructor(e,n,r,i,s,o,a,l){let u=i+"-"+r.id;super(e,n,r,s,o,a,l,u),this.contentAttr=Iv(u),this.hostAttr=Mv(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Sv=(()=>{let e=class e extends Ni{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(R(_e))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),Nd=["alt","control","meta","shift"],Tv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rv={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Av=(()=>{let e=class e extends Ni{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),Nd.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),a+=c+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=Tv[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Nd.forEach(a=>{if(a!==s){let l=Rv[a];l(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(R(_e))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})();function Ld(t,e){return md(y({rootComponent:t},Nv(e)))}function Nv(t){return{appProviders:[...Lv,...t?.providers??[]],platformProviders:kv}}function Pv(){ta.makeCurrent()}function Ov(){return new Qe}function Fv(){return Mc(document),document}var kv=[{provide:un,useValue:Td},{provide:Ao,useValue:Pv,multi:!0},{provide:_e,useFactory:Fv,deps:[]}];var Lv=[{provide:gi,useValue:"root"},{provide:Qe,useFactory:Ov,deps:[]},{provide:na,useClass:Sv,multi:!0,deps:[_e,Q,un]},{provide:na,useClass:Av,multi:!0,deps:[_e]},Rd,Od,Pd,{provide:an,useExisting:Rd},{provide:Ri,useClass:_v,deps:[]},[]];var jd=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(R(_e))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var x="primary",pr=Symbol("RouteTitle"),ua=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vn(t){return new ua(t)}function Vv(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Uv(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}function ze(t,e){let n=t?ca(t):void 0,r=e?ca(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Gd(t[i],e[i]))return!1;return!0}function ca(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Gd(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function qd(t){return t.length>0?t[t.length-1]:null}function ft(t){return ws(t)?t:Wn(t)?X(Promise.resolve(t)):b(t)}var Bv={exact:Yd,subset:Qd},Zd={exact:$v,subset:Hv,ignored:()=>!0};function Vd(t,e,n){return Bv[n.paths](t.root,e.root,n.matrixParams)&&Zd[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function $v(t,e){return ze(t,e)}function Yd(t,e,n){if(!Nt(t.segments,e.segments)||!ki(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Yd(t.children[r],e.children[r],n))return!1;return!0}function Hv(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Gd(t[n],e[n]))}function Qd(t,e,n){return Xd(t,e,e.segments,n)}function Xd(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Nt(i,n)||e.hasChildren()||!ki(i,n,r))}else if(t.segments.length===n.length){if(!Nt(t.segments,n)||!ki(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Qd(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Nt(t.segments,i)||!ki(t.segments,i,r)||!t.children[x]?!1:Xd(t.children[x],e,s,r)}}function ki(t,e,n){return e.every((r,i)=>Zd[n](t[i].parameters,r.parameters))}var ht=class{constructor(e=new k([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vn(this.queryParams),this._queryParamMap}toString(){return Gv.serialize(this)}},k=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Li(this)}},At=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=vn(this.parameters),this._parameterMap}toString(){return Jd(this)}};function zv(t,e){return Nt(t,e)&&t.every((n,r)=>ze(n.parameters,e[r].parameters))}function Nt(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Wv(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===x&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==x&&(n=n.concat(e(i,r)))}),n}var ka=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>new ir,providedIn:"root"});let t=e;return t})(),ir=class{parse(e){let n=new ha(e);return new ht(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Kn(e.root,!0)}`,r=Yv(e.queryParams),i=typeof e.fragment=="string"?`#${qv(e.fragment)}`:"";return`${n}${r}${i}`}},Gv=new ir;function Li(t){return t.segments.map(e=>Jd(e)).join("/")}function Kn(t,e){if(!t.hasChildren())return Li(t);if(e){let n=t.children[x]?Kn(t.children[x],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==x&&r.push(`${i}:${Kn(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Wv(t,(r,i)=>i===x?[Kn(t.children[x],!1)]:[`${i}:${Kn(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[x]!=null?`${Li(t)}/${n[0]}`:`${Li(t)}/(${n.join("//")})`}}function Kd(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oi(t){return Kd(t).replace(/%3B/gi,";")}function qv(t){return encodeURI(t)}function da(t){return Kd(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ji(t){return decodeURIComponent(t)}function Ud(t){return ji(t.replace(/\+/g,"%20"))}function Jd(t){return`${da(t.path)}${Zv(t.parameters)}`}function Zv(t){return Object.entries(t).map(([e,n])=>`;${da(e)}=${da(n)}`).join("")}function Yv(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Oi(n)}=${Oi(i)}`).join("&"):`${Oi(n)}=${Oi(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Qv=/^[^\/()?;#]+/;function sa(t){let e=t.match(Qv);return e?e[0]:""}var Xv=/^[^\/()?;=#]+/;function Kv(t){let e=t.match(Xv);return e?e[0]:""}var Jv=/^[^=?&#]+/;function ey(t){let e=t.match(Jv);return e?e[0]:""}var ty=/^[^&#]+/;function ny(t){let e=t.match(ty);return e?e[0]:""}var ha=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new k([],{}):new k([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[x]=new k(e,n)),r}parseSegment(){let e=sa(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new w(4009,!1);return this.capture(e),new At(ji(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Kv(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=sa(this.remaining);i&&(r=i,this.capture(r))}e[ji(n)]=ji(r)}parseQueryParam(e){let n=ey(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=ny(this.remaining);o&&(r=o,this.capture(r))}let i=Ud(n),s=Ud(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sa(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new w(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=x);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[x]:new k([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new w(4011,!1)}};function eh(t){return t.segments.length>0?new k([],{[x]:t}):t}function th(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=th(i);if(r===x&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new k(t.segments,e);return ry(n)}function ry(t){if(t.numberOfChildren===1&&t.children[x]){let e=t.children[x];return new k(t.segments.concat(e.segments),e.children)}return t}function sr(t){return t instanceof ht}function iy(t,e,n=null,r=null){let i=nh(t);return rh(i,e,n,r)}function nh(t){let e;function n(s){let o={};for(let l of s.children){let u=n(l);o[l.outlet]=u}let a=new k(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=eh(r);return e??i}function rh(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return oa(i,i,i,n,r);let s=sy(e);if(s.toRoot())return oa(i,i,new k([],{}),n,r);let o=oy(s,i,t),a=o.processChildren?tr(o.segmentGroup,o.index,s.commands):sh(o.segmentGroup,o.index,s.commands);return oa(i,o.segmentGroup,a,n,r)}function Vi(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function or(t){return typeof t=="object"&&t!=null&&t.outlets}function oa(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`});let o;t===e?o=n:o=ih(t,e,n);let a=eh(th(o));return new ht(a,s,i)}function ih(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=ih(s,e,n)}),new k(t.segments,r)}var Ui=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Vi(r[0]))throw new w(4003,!1);let i=r.find(or);if(i&&i!==qd(r))throw new w(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sy(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ui(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ui(n,e,r)}var pn=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function oy(t,e,n){if(t.isAbsolute)return new pn(e,!0,0);if(!n)return new pn(e,!1,NaN);if(n.parent===null)return new pn(n,!0,0);let r=Vi(t.commands[0])?0:1,i=n.segments.length-1+r;return ay(n,i,t.numberOfDoubleDots)}function ay(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new w(4005,!1);i=r.segments.length}return new pn(r,!1,i-s)}function ly(t){return or(t[0])?t[0].outlets:{[x]:t}}function sh(t,e,n){if(t??=new k([],{}),t.segments.length===0&&t.hasChildren())return tr(t,e,n);let r=uy(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new k(t.segments.slice(0,r.pathIndex),{});return s.children[x]=new k(t.segments.slice(r.pathIndex),t.children),tr(s,0,i)}else return r.match&&i.length===0?new k(t.segments,{}):r.match&&!t.hasChildren()?fa(t,e,n):r.match?tr(t,0,i):fa(t,e,n)}function tr(t,e,n){if(n.length===0)return new k(t.segments,{});{let r=ly(n),i={};if(Object.keys(r).some(s=>s!==x)&&t.children[x]&&t.numberOfChildren===1&&t.children[x].segments.length===0){let s=tr(t.children[x],e,n);return new k(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=sh(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new k(t.segments,i)}}function uy(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(or(a))break;let l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!$d(l,u,o))return s;r+=2}else{if(!$d(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fa(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(or(s)){let l=cy(s.outlets);return new k(r,l)}if(i===0&&Vi(n[0])){let l=t.segments[e];r.push(new At(l.path,Bd(n[0]))),i++;continue}let o=or(s)?s.outlets[x]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Vi(a)?(r.push(new At(o,Bd(a))),i+=2):(r.push(new At(o,{})),i++)}return new k(r,{})}function cy(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=fa(new k([],{}),0,r))}),e}function Bd(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function $d(t,e,n){return t==n.path&&ze(e,n.parameters)}var nr="imperative",ne=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ne||{}),be=class{constructor(e,n){this.id=e,this.url=n}},ar=class extends be{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ne.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pt=class extends be{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ne.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fe=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(fe||{}),pa=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(pa||{}),et=class extends be{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ne.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ot=class extends be{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ne.NavigationSkipped}},lr=class extends be{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ne.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Bi=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ne.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ga=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ne.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ma=class extends be{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ne.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},va=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ne.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ya=class extends be{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ne.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Da=class{constructor(e){this.route=e,this.type=ne.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wa=class{constructor(e){this.route=e,this.type=ne.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_a=class{constructor(e){this.snapshot=e,this.type=ne.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ba=class{constructor(e){this.snapshot=e,this.type=ne.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ca=class{constructor(e){this.snapshot=e,this.type=ne.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ea=class{constructor(e){this.snapshot=e,this.type=ne.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ur=class{},yn=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var xa=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Zi(this.injector),this.attachRef=null}},Zi=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new xa(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(R(De))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$i=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ia(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ia(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ma(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ma(e,this._root).map(n=>n.value)}};function Ia(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ia(t,n);if(r)return r}return null}function Ma(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ma(t,n);if(r.length)return r.unshift(e),r}return[]}var he=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fn(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Hi=class extends $i{constructor(e,n){super(e),this.snapshot=n,La(this,e)}toString(){return this.snapshot.toString()}};function oh(t){let e=dy(t),n=new ee([new At("",{})]),r=new ee({}),i=new ee({}),s=new ee({}),o=new ee(""),a=new Dn(n,r,s,o,i,x,t,e.root);return a.snapshot=e.root,new Hi(new he(a,[]),e)}function dy(t){let e={},n={},r={},i="",s=new gn([],e,r,i,n,x,t,null,{});return new Wi("",new he(s,[]))}var Dn=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(T(u=>u[pr]))??b(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(T(e=>vn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(T(e=>vn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zi(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&lh(i)&&(r.resolve[pr]=i.title),r}var gn=class{get title(){return this.data?.[pr]}constructor(e,n,r,i,s,o,a,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Wi=class extends $i{constructor(e,n){super(n),this.url=e,La(this,n)}toString(){return ah(this._root)}};function La(t,e){e.value._routerState=t,e.children.forEach(n=>La(t,n))}function ah(t){let e=t.children.length>0?` { ${t.children.map(ah).join(", ")} } `:"";return`${t.value}${e}`}function aa(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ze(e.params,n.params)||t.paramsSubject.next(n.params),Uv(e.url,n.url)||t.urlSubject.next(n.url),ze(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Sa(t,e){let n=ze(t.params,e.params)&&zv(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Sa(t.parent,e.parent))}function lh(t){return typeof t.title=="string"||t.title===null}var hy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=x,this.activateEvents=new se,this.deactivateEvents=new se,this.attachEvents=new se,this.detachEvents=new se,this.parentContexts=g(Zi),this.location=g(xi),this.changeDetector=g(Gn),this.inputBinder=g(ja,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new w(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Ta(r,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Un({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yi]});let t=e;return t})(),Ta=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Dn?this.route:e===Zi?this.childContexts:this.parent.get(e,n)}},ja=new S("");function fy(t,e,n){let r=cr(t,e._root,n?n._root:void 0);return new Hi(r,e)}function cr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=py(t,e,n);return new he(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cr(t,a)),o}}let r=gy(e.value),i=e.children.map(s=>cr(t,s));return new he(r,i)}}function py(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cr(t,r,i);return cr(t,r)})}function gy(t){return new Dn(new ee(t.url),new ee(t.params),new ee(t.queryParams),new ee(t.fragment),new ee(t.data),t.outlet,t.component,t)}var dr=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},uh="ngNavigationCancelingError";function Gi(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=sr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ch(!1,fe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ch(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[uh]=!0,n.cancellationCode=e,n}function my(t){return dh(t)&&sr(t.url)}function dh(t){return!!t&&t[uh]}var vy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fi({type:e,selectors:[["ng-component"]],standalone:!0,features:[Mi],decls:1,vars:0,template:function(i,s){i&1&&Tt(0,"router-outlet")},dependencies:[hy],encapsulation:2});let t=e;return t})();function yy(t,e){return t.providers&&!t._injector&&(t._injector=Wo(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Va(t){let e=t.children&&t.children.map(Va),n=e?Z(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==x&&(n.component=vy),n}function Oe(t){return t.outlet||x}function Dy(t,e){let n=t.filter(r=>Oe(r)===e);return n.push(...t.filter(r=>Oe(r)!==e)),n}function gr(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var wy=(t,e,n,r)=>T(i=>(new Ra(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ra=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),aa(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=fn(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=fn(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ea(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ba(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(aa(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),aa(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=gr(i.snapshot);o.attachRef=null,o.route=i,o.injector=a??o.injector,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},qi=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},mn=class{constructor(e,n){this.component=e,this.route=n}};function _y(t,e,n){let r=t._root,i=e?e._root:null;return Jn(r,i,n,[r.value])}function by(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _n(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!vu(t)?t:e.get(t):r}function Jn(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fn(e);return t.children.forEach(o=>{Cy(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>rr(a,n.getContext(o),i)),i}function Cy(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Ey(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new qi(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Jn(t,e,a?a.children:null,r,i):Jn(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mn(a.outlet.component,o))}else o&&rr(e,a,i),i.canActivateChecks.push(new qi(r)),s.component?Jn(t,null,a?a.children:null,r,i):Jn(t,null,n,r,i);return i}function Ey(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Nt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Nt(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sa(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Sa(t,e)}}function rr(t,e,n){let r=fn(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?rr(o,e.children.getContext(s),n):rr(o,null,n):rr(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new mn(e.outlet.component,i)):n.canDeactivateChecks.push(new mn(null,i)):n.canDeactivateChecks.push(new mn(null,i))}function mr(t){return typeof t=="function"}function xy(t){return typeof t=="boolean"}function Iy(t){return t&&mr(t.canLoad)}function My(t){return t&&mr(t.canActivate)}function Sy(t){return t&&mr(t.canActivateChild)}function Ty(t){return t&&mr(t.canDeactivate)}function Ry(t){return t&&mr(t.canMatch)}function hh(t){return t instanceof We||t?.name==="EmptyError"}var Fi=Symbol("INITIAL_VALUE");function wn(){return Te(t=>Ur(t.map(e=>e.pipe(Ge(1),xs(Fi)))).pipe(T(e=>{for(let n of e)if(n!==!0){if(n===Fi)return Fi;if(n===!1||Ay(n))return n}return!0}),Se(e=>e!==Fi),Ge(1)))}function Ay(t){return sr(t)||t instanceof dr}function Ny(t,e){return K(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?b(Z(y({},n),{guardsResult:!0})):Py(o,r,i,t).pipe(K(a=>a&&xy(a)?Oy(r,s,t,e):b(a)),T(a=>Z(y({},n),{guardsResult:a})))})}function Py(t,e,n,r){return X(t).pipe(K(i=>Vy(i.component,i.route,n,e,r)),Le(i=>i!==!0,!0))}function Oy(t,e,n,r){return X(e).pipe(zt(i=>Ht(ky(i.route.parent,r),Fy(i.route,r),jy(t,i.path,n),Ly(t,i.route,n))),Le(i=>i!==!0,!0))}function Fy(t,e){return t!==null&&e&&e(new Ca(t)),b(!0)}function ky(t,e){return t!==null&&e&&e(new _a(t)),b(!0)}function Ly(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return b(!0);let i=r.map(s=>Br(()=>{let o=gr(e)??n,a=_n(s,o),l=My(a)?a.canActivate(e,t):Xe(o,()=>a(e,t));return ft(l).pipe(Le())}));return b(i).pipe(wn())}function jy(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>by(o)).filter(o=>o!==null).map(o=>Br(()=>{let a=o.guards.map(l=>{let u=gr(o.node)??n,c=_n(l,u),d=Sy(c)?c.canActivateChild(r,t):Xe(u,()=>c(r,t));return ft(d).pipe(Le())});return b(a).pipe(wn())}));return b(s).pipe(wn())}function Vy(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return b(!0);let o=s.map(a=>{let l=gr(e)??i,u=_n(a,l),c=Ty(u)?u.canDeactivate(t,e,n,r):Xe(l,()=>u(t,e,n,r));return ft(c).pipe(Le())});return b(o).pipe(wn())}function Uy(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return b(!0);let s=i.map(o=>{let a=_n(o,t),l=Iy(a)?a.canLoad(e,n):Xe(t,()=>a(e,n));return ft(l)});return b(s).pipe(wn(),fh(r))}function fh(t){return ms(te(e=>{if(typeof e!="boolean")throw Gi(t,e)}),T(e=>e===!0))}function By(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return b(!0);let s=i.map(o=>{let a=_n(o,t),l=Ry(a)?a.canMatch(e,n):Xe(t,()=>a(e,n));return ft(l)});return b(s).pipe(wn(),fh(r))}var hr=class{constructor(e){this.segmentGroup=e||null}},fr=class extends Error{constructor(e){super(),this.urlTree=e}};function hn(t){return $t(new hr(t))}function $y(t){return $t(new w(4e3,!1))}function Hy(t){return $t(ch(!1,fe.GuardRejected))}var Aa=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return b(r);if(i.numberOfChildren>1||!i.children[x])return $y(`${e.redirectTo}`);i=i.children[x]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:u,routeConfig:c,url:d,outlet:h,params:f,data:p,title:m}=i,D=Xe(s,()=>a({params:f,data:p,queryParams:l,fragment:u,routeConfig:c,url:d,outlet:h,title:m}));if(D instanceof ht)throw new fr(D);n=D}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new fr(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ht(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new k(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new w(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Na={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zy(t,e,n,r,i){let s=Ua(t,e,n);return s.matched?(r=yy(e,r),By(r,e,n,i).pipe(T(o=>o===!0?s:y({},Na)))):b(s)}function Ua(t,e,n){if(e.path==="**")return Wy(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},Na):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Vv)(n,t,e);if(!i)return y({},Na);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?y(y({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Wy(t){return{matched:!0,parameters:t.length>0?qd(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Hd(t,e,n,r){return n.length>0&&Zy(t,n,r)?{segmentGroup:new k(e,qy(r,new k(n,t.children))),slicedSegments:[]}:n.length===0&&Yy(t,n,r)?{segmentGroup:new k(t.segments,Gy(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new k(t.segments,t.children),slicedSegments:n}}function Gy(t,e,n,r){let i={};for(let s of n)if(Yi(t,e,s)&&!r[Oe(s)]){let o=new k([],{});i[Oe(s)]=o}return y(y({},r),i)}function qy(t,e){let n={};n[x]=e;for(let r of t)if(r.path===""&&Oe(r)!==x){let i=new k([],{});n[Oe(r)]=i}return n}function Zy(t,e,n){return n.some(r=>Yi(t,e,r)&&Oe(r)!==x)}function Yy(t,e,n){return n.some(r=>Yi(t,e,r))}function Yi(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Qy(t,e,n,r){return Oe(t)!==r&&(r===x||!Yi(e,n,t))?!1:Ua(e,t,n).matched}function Xy(t,e,n){return e.length===0&&!t.children[n]}var Pa=class{};function Ky(t,e,n,r,i,s,o="emptyOnly"){return new Oa(t,e,n,r,i,o,s).recognize()}var Jy=31,Oa=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Aa(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new w(4002,`'${e.segmentGroup}'`)}recognize(){let e=Hd(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(T(({children:n,rootSnapshot:r})=>{let i=new he(r,n),s=new Wi("",i),o=iy(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new gn([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),x,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,x,n).pipe(T(r=>({children:r,rootSnapshot:n})),ot(r=>{if(r instanceof fr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hr?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(T(o=>o instanceof he?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return X(s).pipe(zt(o=>{let a=r.children[o],l=Dy(n,o);return this.processSegmentGroup(e,l,a,o,i)}),Es((o,a)=>(o.push(...a),o)),at(null),Cs(),K(o=>{if(o===null)return hn(r);let a=ph(o);return eD(a),b(a)}))}processSegment(e,n,r,i,s,o,a){return X(n).pipe(zt(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(ot(u=>{if(u instanceof hr)return b(null);throw u}))),Le(l=>!!l),ot(l=>{if(hh(l))return Xy(r,i,s)?b(new Pa):hn(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return Qy(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):hn(i):hn(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:u,consumedSegments:c,positionalParamSegments:d,remainingSegments:h}=Ua(n,i,s);if(!l)return hn(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Jy&&(this.allowRedirects=!1));let f=new gn(s,u,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,zd(i),Oe(i),i.component??i._loadedComponent??null,i,Wd(i)),p=zi(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(K(D=>this.processSegment(e,r,n,D.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=zy(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Te(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Te(({routes:u})=>{let c=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new gn(h,d,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,zd(r),Oe(r),r.component??r._loadedComponent??null,r,Wd(r)),m=zi(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:D,slicedSegments:I}=Hd(n,h,f,u);if(I.length===0&&D.hasChildren())return this.processChildren(c,u,D,p).pipe(T(A=>new he(p,A)));if(u.length===0&&I.length===0)return b(new he(p,[]));let F=Oe(r)===s;return this.processSegment(c,u,D,I,F?x:s,!0,p).pipe(T(A=>new he(p,A instanceof he?[A]:[])))}))):hn(n)))}getChildConfig(e,n,r){return n.children?b({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?b({routes:n._loadedRoutes,injector:n._loadedInjector}):Uy(e,n,r,this.urlSerializer).pipe(K(i=>i?this.configLoader.loadChildren(e,n).pipe(te(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Hy(n))):b({routes:[],injector:e})}};function eD(t){t.sort((e,n)=>e.value.outlet===x?-1:n.value.outlet===x?1:e.value.outlet.localeCompare(n.value.outlet))}function tD(t){let e=t.value.routeConfig;return e&&e.path===""}function ph(t){let e=[],n=new Set;for(let r of t){if(!tD(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ph(r.children);e.push(new he(r.value,i))}return e.filter(r=>!n.has(r))}function zd(t){return t.data||{}}function Wd(t){return t.resolve||{}}function nD(t,e,n,r,i,s){return K(o=>Ky(t,e,n,r,o.extractedUrl,i,s).pipe(T(({state:a,tree:l})=>Z(y({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function rD(t,e){return K(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return b(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of gh(l))o.add(u);let a=0;return X(o).pipe(zt(l=>s.has(l)?iD(l,r,t,e):(l.data=zi(l,l.parent,t).resolve,b(void 0))),te(()=>a++),Wt(1),K(l=>a===o.size?b(n):ce))})}function gh(t){let e=t.children.map(n=>gh(n)).flat();return[t,...e]}function iD(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!lh(i)&&(s[pr]=i.title),sD(s,t,e,r).pipe(T(o=>(t._resolvedData=o,t.data=zi(t,t.parent,n).resolve,null)))}function sD(t,e,n,r){let i=ca(t);if(i.length===0)return b({});let s={};return X(i).pipe(K(o=>oD(t[o],e,n,r).pipe(Le(),te(a=>{if(a instanceof dr)throw Gi(new ir,a);s[o]=a}))),Wt(1),bs(s),ot(o=>hh(o)?ce:$t(o)))}function oD(t,e,n,r){let i=gr(e)??r,s=_n(t,i),o=s.resolve?s.resolve(e,n):Xe(i,()=>s(e,n));return ft(o)}function la(t){return Te(e=>{let n=t(e);return n?X(n).pipe(T(()=>e)):b(e)})}var mh=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===x);return i}getResolvedTitleForRoute(r){return r.data[pr]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>g(aD),providedIn:"root"});let t=e;return t})(),aD=(()=>{let e=class e extends mh{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(R(jd))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ba=new S("",{providedIn:"root",factory:()=>({})}),$a=new S(""),lD=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=g(Zo)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return b(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ft(r.loadComponent()).pipe(T(vh),te(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),In(()=>{this.componentLoaders.delete(r)})),s=new Bt(i,()=>new ie).pipe(Ut());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return b({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=uD(i,this.compiler,r,this.onLoadEndListener).pipe(In(()=>{this.childrenLoaders.delete(i)})),a=new Bt(o,()=>new ie).pipe(Ut());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uD(t,e,n,r){return ft(t.loadChildren()).pipe(T(vh),K(i=>i instanceof Vn||Array.isArray(i)?b(i):X(e.compileModuleAsync(i))),T(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get($a,[],{optional:!0,self:!0}).flat()),{routes:o.map(Va),injector:s}}))}function cD(t){return t&&typeof t=="object"&&"default"in t}function vh(t){return cD(t)?t.default:t}var Ha=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>g(dD),providedIn:"root"});let t=e;return t})(),dD=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hD=new S("");var fD=new S(""),pD=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ie,this.transitionAbortSubject=new ie,this.configLoader=g(lD),this.environmentInjector=g(De),this.urlSerializer=g(ka),this.rootContexts=g(Zi),this.location=g(Zn),this.inputBindingEnabled=g(ja,{optional:!0})!==null,this.titleStrategy=g(mh),this.options=g(Ba,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=g(Ha),this.createViewTransition=g(hD,{optional:!0}),this.navigationErrorHandler=g(fD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>b(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Da(s)),i=s=>this.events.next(new wa(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Z(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ee({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:nr,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Se(o=>o.id!==0),T(o=>Z(y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Te(o=>{let a=!1,l=!1;return b(o).pipe(Te(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",fe.SupersededByNewNavigation),ce;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Z(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!c&&d!=="reload"){let h="";return this.events.next(new Ot(u.id,this.urlSerializer.serialize(u.rawUrl),h,pa.IgnoredSameUrlNavigation)),u.resolve(!1),ce}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return b(u).pipe(Te(h=>{let f=this.transitions?.getValue();return this.events.next(new ar(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ce:Promise.resolve(h)}),nD(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),te(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Z(y({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Bi(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:m,extras:D}=u,I=new ar(h,this.urlSerializer.serialize(f),p,m);this.events.next(I);let F=oh(this.rootComponentType).snapshot;return this.currentTransition=o=Z(y({},u),{targetSnapshot:F,urlAfterRedirects:f,extras:Z(y({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,b(o)}else{let h="";return this.events.next(new Ot(u.id,this.urlSerializer.serialize(u.extractedUrl),h,pa.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ce}}),te(u=>{let c=new ga(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),T(u=>(this.currentTransition=o=Z(y({},u),{guards:_y(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),Ny(this.environmentInjector,u=>this.events.next(u)),te(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Gi(this.urlSerializer,u.guardsResult);let c=new ma(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),Se(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",fe.GuardRejected),!1)),la(u=>{if(u.guards.canActivateChecks.length)return b(u).pipe(te(c=>{let d=new va(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Te(c=>{let d=!1;return b(c).pipe(rD(this.paramsInheritanceStrategy,this.environmentInjector),te({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",fe.NoDataFromResolver)}}))}),te(c=>{let d=new ya(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),la(u=>{let c=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(te(f=>{d.component=f}),T(()=>{})));for(let f of d.children)h.push(...c(f));return h};return Ur(c(u.targetSnapshot.root)).pipe(at(null),Ge(1))}),la(()=>this.afterPreactivation()),Te(()=>{let{currentSnapshot:u,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return d?X(d).pipe(T(()=>o)):b(o)}),T(u=>{let c=fy(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Z(y({},u),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),te(()=>{this.events.next(new ur)}),wy(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ge(1),te({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pt(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Is(this.transitionAbortSubject.pipe(te(u=>{throw u}))),In(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",fe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ot(u=>{if(l=!0,dh(u))this.events.next(new et(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),my(u)?this.events.next(new yn(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let c=new lr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let d=Xe(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof dr){let{message:h,cancellationCode:f}=Gi(this.urlSerializer,d);this.events.next(new et(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new yn(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(c);let h=r.errorHandler(u);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return ce}))}))}cancelNavigationTransition(r,i,s){let o=new et(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gD(t){return t!==nr}var mD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>g(vD),providedIn:"root"});let t=e;return t})(),Fa=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},vD=(()=>{let e=class e extends Fa{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=So(e)))(s||e)}})(),e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>g(yD),providedIn:"root"});let t=e;return t})(),yD=(()=>{let e=class e extends yh{constructor(){super(...arguments),this.location=g(Zn),this.urlSerializer=g(ka),this.options=g(Ba,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=g(Ha),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ht,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=oh(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ar)this.stateMemento=this.createStateMemento();else if(r instanceof Ot)this.rawUrlTree=i.initialUrl;else if(r instanceof Bi){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ur?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof et&&(r.code===fe.GuardRejected||r.code===fe.NoDataFromResolver)?this.restoreHistory(i):r instanceof lr?this.restoreHistory(i,!0):r instanceof Pt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=So(e)))(s||e)}})(),e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),er=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(er||{});function DD(t,e){t.events.pipe(Se(n=>n instanceof Pt||n instanceof et||n instanceof lr||n instanceof Ot),T(n=>n instanceof Pt||n instanceof Ot?er.COMPLETE:(n instanceof et?n.code===fe.Redirect||n.code===fe.SupersededByNewNavigation:!1)?er.REDIRECTING:er.FAILED),Se(n=>n!==er.REDIRECTING),Ge(1)).subscribe(()=>{e()})}function wD(t){throw t}var _D={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Dh=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=g(Si),this.stateManager=g(yh),this.options=g(Ba,{optional:!0})||{},this.pendingTasks=g(Hn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=g(pD),this.urlSerializer=g(ka),this.location=g(Zn),this.urlHandlingStrategy=g(Ha),this._events=new ie,this.errorHandler=this.options.errorHandler||wD,this.navigated=!1,this.routeReuseStrategy=g(mD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=g($a,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!g(ja,{optional:!0}),this.eventsSubscription=new Y,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof et&&i.code!==fe.Redirect&&i.code!==fe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Pt)this.navigated=!0;else if(i instanceof yn){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u=y({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||gD(s.source)},a);this.scheduleNavigation(l,nr,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ED(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),nr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=y({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Va),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,c=u?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=y(y({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=nh(f)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),h=this.currentUrlTree.root}return rh(h,r,d,c??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=sr(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,nr,null,i)}navigate(r,i={skipLocationChange:!1}){return CD(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=y({},_D):i===!1?s=y({},bD):s=i,sr(r))return Vd(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Vd(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,c;a?(l=a.resolve,u=a.reject,c=a.promise):c=new Promise((h,f)=>{l=h,u=f});let d=this.pendingTasks.add();return DD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CD(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new w(4008,!1)}function ED(t){return!(t instanceof ur)&&!(t instanceof yn)}var xD=new S("");function wh(t,...e){return pi([{provide:$a,multi:!0,useValue:t},[],{provide:Dn,useFactory:ID,deps:[Dh]},{provide:qo,multi:!0,useFactory:MD},e.map(n=>n.\u0275providers)])}function ID(t){return t.routerState.root}function MD(){let t=g(Mt);return e=>{let n=t.get(cn);if(e!==n.components[0])return;let r=t.get(Dh),i=t.get(SD);t.get(TD)===1&&r.initialNavigation(),t.get(RD,null,M.Optional)?.setUpPreloading(),t.get(xD,null,M.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var SD=new S("",{factory:()=>new ie}),TD=new S("",{providedIn:"root",factory:()=>1});var RD=new S("");var _h=[];var bh={providers:[pd(),wh(_h)]};var za=0;function v(){if(!(za>100)){if(za===100)console.warn("Curtains: too many warnings thrown, stop logging.");else{let t=Array.prototype.slice.call(arguments);console.warn.apply(console,t)}za++}}function z(){let t=Array.prototype.slice.call(arguments);console.error.apply(console,t)}function vr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16).toUpperCase()})}function Fe(t){return(t&t-1)===0}function Ch(t,e,n){return(1-n)*t+n*e}var Qi=class{constructor(e){if(this.type="Scene",!e||e.type!=="Renderer")z(this.type+": Renderer not passed as first argument",e);else if(!e.gl){z(this.type+": Renderer WebGL context is undefined",e);return}this.renderer=e,this.gl=e.gl,this.initStacks()}initStacks(){this.stacks={pingPong:[],renderTargets:[],opaque:[],transparent:[],renderPasses:[],scenePasses:[]}}resetPlaneStacks(){this.stacks.pingPong=[],this.stacks.renderTargets=[],this.stacks.opaque=[],this.stacks.transparent=[];for(let e=0;e<this.renderer.planes.length;e++)this.addPlane(this.renderer.planes[e])}resetShaderPassStacks(){this.stacks.scenePasses=[],this.stacks.renderPasses=[];for(let e=0;e<this.renderer.shaderPasses.length;e++)this.renderer.shaderPasses[e].index=e,this.renderer.shaderPasses[e]._isScenePass?this.stacks.scenePasses.push(this.renderer.shaderPasses[e]):this.stacks.renderPasses.push(this.renderer.shaderPasses[e]);this.stacks.scenePasses.length===0&&(this.renderer.state.scenePassIndex=null)}addToRenderTargetsStack(e){let n=this.renderer.planes.filter(i=>i.type!=="PingPongPlane"&&i.target&&i.uuid!==e.uuid),r=-1;if(e.target._depth){for(let i=n.length-1;i>=0;i--)if(n[i].target.uuid===e.target.uuid){r=i+1;break}}else r=n.findIndex(i=>i.target.uuid===e.target.uuid);r=Math.max(0,r),n.splice(r,0,e),e.target._depth?(n.sort((i,s)=>i.index-s.index),n.sort((i,s)=>s.renderOrder-i.renderOrder)):(n.sort((i,s)=>s.index-i.index),n.sort((i,s)=>i.renderOrder-s.renderOrder)),n.sort((i,s)=>i.target.index-s.target.index),this.stacks.renderTargets=n}addToRegularPlaneStack(e){let n=this.renderer.planes.filter(i=>i.type!=="PingPongPlane"&&!i.target&&i._transparent===e._transparent&&i.uuid!==e.uuid),r=-1;for(let i=n.length-1;i>=0;i--)if(n[i]._geometry.definition.id===e._geometry.definition.id){r=i+1;break}return r=Math.max(0,r),n.splice(r,0,e),n.sort((i,s)=>i.index-s.index),n}addPlane(e){if(e.type==="PingPongPlane")this.stacks.pingPong.push(e);else if(e.target)this.addToRenderTargetsStack(e);else if(e._transparent){let n=this.addToRegularPlaneStack(e);n.sort((r,i)=>i.relativeTranslation.z-r.relativeTranslation.z),n.sort((r,i)=>i.renderOrder-r.renderOrder),this.stacks.transparent=n}else{let n=this.addToRegularPlaneStack(e);n.sort((r,i)=>i.renderOrder-r.renderOrder),this.stacks.opaque=n}}removePlane(e){e.type==="PingPongPlane"?this.stacks.pingPong=this.stacks.pingPong.filter(n=>n.uuid!==e.uuid):e.target?this.stacks.renderTargets=this.stacks.renderTargets.filter(n=>n.uuid!==e.uuid):e._transparent?this.stacks.transparent=this.stacks.transparent.filter(n=>n.uuid!==e.uuid):this.stacks.opaque=this.stacks.opaque.filter(n=>n.uuid!==e.uuid)}setPlaneRenderOrder(e){if(e.type==="ShaderPass")this.sortShaderPassStack(e._isScenePass?this.stacks.scenePasses:this.stacks.renderPasses);else if(e.type==="PingPongPlane")return;if(e.target)e.target._depth?(this.stacks.renderTargets.sort((n,r)=>n.index-r.index),this.stacks.renderTargets.sort((n,r)=>r.renderOrder-n.renderOrder)):(this.stacks.renderTargets.sort((n,r)=>r.index-n.index),this.stacks.renderTargets.sort((n,r)=>n.renderOrder-r.renderOrder)),this.stacks.renderTargets.sort((n,r)=>n.target.index-r.target.index);else{let n=e._transparent?this.stacks.transparent:this.stacks.opaque,r=this.stacks.scenePasses.find((i,s)=>i._isScenePass&&!i._depth&&s===0);!this.renderer.depth||r?(n.sort((i,s)=>s.index-i.index),e._transparent&&n.sort((i,s)=>i.relativeTranslation.z-s.relativeTranslation.z),n.sort((i,s)=>i.renderOrder-s.renderOrder)):(n.sort((i,s)=>i.index-s.index),e._transparent&&n.sort((i,s)=>s.relativeTranslation.z-i.relativeTranslation.z),n.sort((i,s)=>s.renderOrder-i.renderOrder))}}addShaderPass(e){e._isScenePass?(this.stacks.scenePasses.push(e),this.sortShaderPassStack(this.stacks.scenePasses)):(this.stacks.renderPasses.push(e),this.sortShaderPassStack(this.stacks.renderPasses))}removeShaderPass(e){this.resetShaderPassStacks()}sortShaderPassStack(e){e.sort((n,r)=>n.index-r.index),e.sort((n,r)=>n.renderOrder-r.renderOrder)}enableShaderPass(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length===0&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target))}drawRenderPasses(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target));for(let e=0;e<this.stacks.renderPasses.length;e++)this.stacks.renderPasses[e]._startDrawing(),this.renderer.clearDepth()}drawScenePasses(){for(let e=0;e<this.stacks.scenePasses.length;e++)this.stacks.scenePasses[e]._startDrawing()}drawPingPongStack(){for(let e=0;e<this.stacks.pingPong.length;e++){let n=this.stacks.pingPong[e];n&&n._startDrawing()}}drawStack(e){for(let n=0;n<this.stacks[e].length;n++){let r=this.stacks[e][n];r&&r._startDrawing()}}draw(){this.drawPingPongStack(),this.enableShaderPass(),this.drawStack("renderTargets"),this.drawRenderPasses(),this.renderer.setBlending(!1),this.drawStack("opaque"),this.stacks.transparent.length&&(this.renderer.setBlending(!0),this.drawStack("transparent")),this.drawScenePasses()}};var Xi=class{constructor(){this.geometries=[],this.clear()}clear(){this.textures=[],this.programs=[]}getGeometryFromID(e){return this.geometries.find(n=>n.id===e)}addGeometry(e,n,r){this.geometries.push({id:e,vertices:n,uvs:r})}isSameShader(e,n){return e.localeCompare(n)===0}getProgramFromShaders(e,n){return this.programs.find(r=>this.isSameShader(r.vsCode,e)&&this.isSameShader(r.fsCode,n))}addProgram(e){this.programs.push(e)}getTextureFromSource(e){let n=typeof e=="string"?e:e.src;return this.textures.find(r=>r.source&&r.source.src===n)}addTexture(e){this.getTextureFromSource(e.source)||this.textures.push(e)}removeTexture(e){this.textures=this.textures.filter(n=>n.uuid!==e.uuid)}};var Ki=class{constructor(){this.clear()}clear(){this.queue=[]}add(e,n=!1){let r={callback:e,keep:n,timeout:null};return r.timeout=setTimeout(()=>{this.queue.push(r)},0),r}execute(){this.queue.map(e=>{e.callback&&e.callback(),clearTimeout(this.queue.timeout)}),this.queue=this.queue.filter(e=>e.keep)}};var Ji=class{constructor({alpha:e,antialias:n,premultipliedAlpha:r,depth:i,failIfMajorPerformanceCaveat:s,preserveDrawingBuffer:o,stencil:a,container:l,pixelRatio:u,renderingScale:c,production:d,onError:h,onSuccess:f,onContextLost:p,onContextRestored:m,onDisposed:D,onSceneChange:I}){this.type="Renderer",this.alpha=e,this.antialias=n,this.premultipliedAlpha=r,this.depth=i,this.failIfMajorPerformanceCaveat=s,this.preserveDrawingBuffer=o,this.stencil=a,this.container=l,this.pixelRatio=u,this._renderingScale=c,this.production=d,this.onError=h,this.onSuccess=f,this.onContextLost=p,this.onContextRestored=m,this.onDisposed=D,this.onSceneChange=I,this.initState(),this.canvas=document.createElement("canvas");let F={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil};if(this.gl=this.canvas.getContext("webgl2",F),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.canvas.getContext("webgl",F)||this.canvas.getContext("experimental-webgl",F)),this.gl)this.onSuccess&&this.onSuccess();else{this.production||v(this.type+": WebGL context could not be created"),this.state.isActive=!1,this.onError&&this.onError();return}this.initRenderer()}initState(){this.state={isActive:!0,isContextLost:!0,drawingEnabled:!0,forceRender:!1,currentProgramID:null,currentGeometryID:null,forceBufferUpdate:!1,depthTest:null,blending:null,cullFace:null,frameBufferID:null,scenePassIndex:null,activeTexture:null,unpackAlignment:null,flipY:null,premultiplyAlpha:null}}initCallbackQueueManager(){this.nextRender=new Ki}initRenderer(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this.state.isContextLost=!1,this.state.maxTextureSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.initCallbackQueueManager(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache=new Xi,this.scene=new Qi(this),this.getExtensions(),this._contextLostHandler=this.contextLost.bind(this),this.canvas.addEventListener("webglcontextlost",this._contextLostHandler,!1),this._contextRestoredHandler=this.contextRestored.bind(this),this.canvas.addEventListener("webglcontextrestored",this._contextRestoredHandler,!1)}getExtensions(){this.extensions=[],this._isWebGL2?(this.extensions.EXT_color_buffer_float=this.gl.getExtension("EXT_color_buffer_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context")):(this.extensions.OES_vertex_array_object=this.gl.getExtension("OES_vertex_array_object"),this.extensions.OES_texture_float=this.gl.getExtension("OES_texture_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.OES_texture_half_float=this.gl.getExtension("OES_texture_half_float"),this.extensions.OES_texture_half_float_linear=this.gl.getExtension("OES_texture_half_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.OES_element_index_uint=this.gl.getExtension("OES_element_index_uint"),this.extensions.OES_standard_derivatives=this.gl.getExtension("OES_standard_derivatives"),this.extensions.EXT_sRGB=this.gl.getExtension("EXT_sRGB"),this.extensions.WEBGL_depth_texture=this.gl.getExtension("WEBGL_depth_texture"),this.extensions.WEBGL_draw_buffers=this.gl.getExtension("WEBGL_draw_buffers"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context"))}contextLost(e){this.state.isContextLost=!0,this.state.isActive&&(e.preventDefault(),this.nextRender.add(()=>this.onContextLost&&this.onContextLost()))}restoreContext(){this.state.isActive&&(this.initState(),this.gl&&this.extensions.WEBGL_lose_context?this.extensions.WEBGL_lose_context.restoreContext():(!this.gl&&!this.production?v(this.type+": Could not restore the context because the context is not defined"):!this.extensions.WEBGL_lose_context&&!this.production&&v(this.type+": Could not restore the context because the restore context extension is not defined"),this.onError&&this.onError()))}isContextexFullyRestored(){let e=!0;for(let n=0;n<this.renderTargets.length;n++){this.renderTargets[n].textures[0]._canDraw||(e=!1);break}if(e)for(let n=0;n<this.planes.length;n++)if(this.planes[n]._canDraw){for(let r=0;r<this.planes[n].textures.length;r++)if(!this.planes[n].textures[r]._canDraw){e=!1;break}}else{e=!1;break}if(e)for(let n=0;n<this.shaderPasses.length;n++)if(this.shaderPasses[n]._canDraw){for(let r=0;r<this.shaderPasses[n].textures.length;r++)if(!this.shaderPasses[n].textures[r]._canDraw){e=!1;break}}else{e=!1;break}return e}contextRestored(){this.getExtensions(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache.clear(),this.scene.initStacks();for(let n=0;n<this.renderTargets.length;n++)this.renderTargets[n]._restoreContext();for(let n=0;n<this.planes.length;n++)this.planes[n]._restoreContext();for(let n=0;n<this.shaderPasses.length;n++)this.shaderPasses[n]._restoreContext();let e=this.nextRender.add(()=>{this.isContextexFullyRestored()&&(e.keep=!1,this.state.isContextLost=!1,this.onContextRestored&&this.onContextRestored(),this.onSceneChange(),this.needRender())},!0)}setPixelRatio(e){this.pixelRatio=e}setSize(){if(!this.gl)return;let e=this.container.getBoundingClientRect();this._boundingRect={width:e.width*this.pixelRatio,height:e.height*this.pixelRatio,top:e.top*this.pixelRatio,left:e.left*this.pixelRatio};let n=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(n&&r){let s=function(o){let a=0;for(;o&&!isNaN(o.offsetTop);)a+=o.offsetTop-o.scrollTop,o=o.offsetParent;return a};var i=s;this._boundingRect.top=s(this.container)*this.pixelRatio}this.canvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+"px",this.canvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+"px",this.canvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.canvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}resize(){for(let e=0;e<this.planes.length;e++)this.planes[e]._canDraw&&this.planes[e].resize();for(let e=0;e<this.shaderPasses.length;e++)this.shaderPasses[e]._canDraw&&this.shaderPasses[e].resize();for(let e=0;e<this.renderTargets.length;e++)this.renderTargets[e].resize();this.needRender()}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}clearDepth(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)}clearColor(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}bindFrameBuffer(e,n){let r=null;e?(r=e.index,r!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e._frameBuffer),this.gl.viewport(0,0,e._size.width,e._size.height),e._shouldClear&&!n&&this.clear())):this.state.frameBufferID!==null&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this.state.frameBufferID=r}setDepthTest(e){e&&!this.state.depthTest?(this.state.depthTest=e,this.gl.enable(this.gl.DEPTH_TEST)):!e&&this.state.depthTest&&(this.state.depthTest=e,this.gl.disable(this.gl.DEPTH_TEST))}setDepthFunc(){this.gl.depthFunc(this.gl.LEQUAL)}setBlending(e=!1){e&&!this.state.blending?(this.state.blending=e,this.gl.enable(this.gl.BLEND)):!e&&this.state.blending&&(this.state.blending=e,this.gl.disable(this.gl.BLEND))}setBlendFunc(){this.gl.enable(this.gl.BLEND),this.premultipliedAlpha?this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}setFaceCulling(e){if(this.state.cullFace!==e)if(this.state.cullFace=e,e==="none")this.gl.disable(this.gl.CULL_FACE);else{let n=e==="front"?this.gl.FRONT:this.gl.BACK;this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(n)}}useProgram(e){(this.state.currentProgramID===null||this.state.currentProgramID!==e.id)&&(this.gl.useProgram(e.program),this.state.currentProgramID=e.id)}removePlane(e){this.gl&&(this.planes=this.planes.filter(n=>n.uuid!==e.uuid),this.scene.removePlane(e),e=null,this.gl&&this.clear(),this.onSceneChange())}removeRenderTarget(e){if(!this.gl)return;let n=this.planes.find(r=>r.type!=="PingPongPlane"&&r.target&&r.target.uuid===e.uuid);for(let r=0;r<this.planes.length;r++)this.planes[r].target&&this.planes[r].target.uuid===e.uuid&&(this.planes[r].target=null);this.renderTargets=this.renderTargets.filter(r=>r.uuid!==e.uuid);for(let r=0;r<this.renderTargets.length;r++)this.renderTargets[r].index=r;e=null,this.gl&&this.clear(),n&&this.scene.resetPlaneStacks(),this.onSceneChange()}removeShaderPass(e){this.gl&&(this.shaderPasses=this.shaderPasses.filter(n=>n.uuid!==e.uuid),this.scene.removeShaderPass(e),e=null,this.gl&&this.clear(),this.onSceneChange())}enableDrawing(){this.state.drawingEnabled=!0}disableDrawing(){this.state.drawingEnabled=!1}needRender(){this.state.forceRender=!0}render(){this.gl&&(this.clear(),this.state.currentGeometryID=null,this.scene.draw())}deletePrograms(){for(let e=0;e<this.cache.programs.length;e++){let n=this.cache.programs[e];this.gl.deleteProgram(n.program)}}dispose(){if(!this.gl)return;for(this.state.isActive=!1;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);let e=this.nextRender.add(()=>{this.planes.length===0&&this.shaderPasses.length===0&&this.renderTargets.length===0&&(e.keep=!1,this.deletePrograms(),this.clear(),this.canvas.removeEventListener("webgllost",this._contextLostHandler,!1),this.canvas.removeEventListener("webglrestored",this._contextRestoredHandler,!1),this.gl&&this.extensions.WEBGL_lose_context&&this.extensions.WEBGL_lose_context.loseContext(),this.canvas.width=this.canvas.width,this.gl=null,this.container.removeChild(this.canvas),this.container=null,this.canvas=null,this.onDisposed&&this.onDisposed())},!0)}};var es=class{constructor({xOffset:e=0,yOffset:n=0,lastXDelta:r=0,lastYDelta:i=0,shouldWatch:s=!0,onScroll:o=()=>{}}={}){this.xOffset=e,this.yOffset=n,this.lastXDelta=r,this.lastYDelta=i,this.shouldWatch=s,this.onScroll=o,this.handler=this.scroll.bind(this,!0),this.shouldWatch&&window.addEventListener("scroll",this.handler,{passive:!0})}scroll(){this.updateScrollValues(window.pageXOffset,window.pageYOffset)}updateScrollValues(e,n){let r=this.xOffset;this.xOffset=e,this.lastXDelta=r-this.xOffset;let i=this.yOffset;this.yOffset=n,this.lastYDelta=i-this.yOffset,this.onScroll&&this.onScroll(this.lastXDelta,this.lastYDelta)}dispose(){this.shouldWatch&&window.removeEventListener("scroll",this.handler,{passive:!0})}};var AD="8.1.6",yr=class{constructor({container:e,alpha:n=!0,premultipliedAlpha:r=!1,antialias:i=!0,depth:s=!0,failIfMajorPerformanceCaveat:o=!0,preserveDrawingBuffer:a=!1,stencil:l=!1,autoResize:u=!0,autoRender:c=!0,watchScroll:d=!0,pixelRatio:h=window.devicePixelRatio||1,renderingScale:f=1,production:p=!1}={}){this.type="Curtains",this._autoResize=u,this._autoRender=c,this._watchScroll=d,this.pixelRatio=h,f=isNaN(f)?1:parseFloat(f),this._renderingScale=Math.max(.25,Math.min(1,f)),this.premultipliedAlpha=r,this.alpha=n,this.antialias=i,this.depth=s,this.failIfMajorPerformanceCaveat=o,this.preserveDrawingBuffer=a,this.stencil=l,this.production=p,this.errors=!1,e?this.setContainer(e):this.production||v(this.type+": no container provided in the initial parameters. Use setContainer() method to set one later and initialize the WebGL context")}setContainer(e){if(e)if(typeof e=="string")if(e=document.getElementById(e),e)this.container=e;else{let n=document.createElement("div");n.setAttribute("id","curtains-canvas"),document.body.appendChild(n),this.container=n,this.production||v('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}else e instanceof Element&&(this.container=e);else{let n=document.createElement("div");n.setAttribute("id","curtains-canvas"),document.body.appendChild(n),this.container=n,this.production||v('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}this._initCurtains()}_initCurtains(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._initRenderer(),this.gl&&(this._initScroll(),this._setSize(),this._addListeners(),this.container.appendChild(this.canvas),console.log("curtains.js - v"+AD),this._animationFrameID=null,this._autoRender&&this._animate())}_initRenderer(){this.renderer=new Ji({alpha:this.alpha,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil,container:this.container,pixelRatio:this.pixelRatio,renderingScale:this._renderingScale,production:this.production,onError:()=>this._onRendererError(),onSuccess:()=>this._onRendererSuccess(),onContextLost:()=>this._onRendererContextLost(),onContextRestored:()=>this._onRendererContextRestored(),onDisposed:()=>this._onRendererDisposed(),onSceneChange:()=>this._keepSync()}),this.gl=this.renderer.gl,this.canvas=this.renderer.canvas}restoreContext(){this.renderer.restoreContext()}_animate(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))}enableDrawing(){this.renderer.enableDrawing()}disableDrawing(){this.renderer.disableDrawing()}needRender(){this.renderer.needRender()}nextRender(e,n=!1){return this.renderer.nextRender.add(e,n)}clear(){this.renderer&&this.renderer.clear()}clearDepth(){this.renderer&&this.renderer.clearDepth()}clearColor(){this.renderer&&this.renderer.clearColor()}isWebGL2(){return this.gl?this.renderer._isWebGL2:!1}render(){this.renderer.nextRender.execute(),!(!this.renderer.state.drawingEnabled&&!this.renderer.state.forceRender)&&(this.renderer.state.forceRender&&(this.renderer.state.forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this.renderer.render())}_addListeners(){this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener("resize",this._resizeHandler,!1))}setPixelRatio(e,n){this.pixelRatio=parseFloat(Math.max(e,1))||1,this.renderer.setPixelRatio(e),this.resize(n)}_setSize(){this.renderer.setSize(),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)}getBoundingRect(){return this.renderer._boundingRect}resize(e){this.gl&&(this._setSize(),this.renderer.resize(),this.nextRender(()=>{this._onAfterResizeCallback&&e&&this._onAfterResizeCallback()}))}_initScroll(){this._scrollManager=new es({xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0,shouldWatch:this._watchScroll,onScroll:(e,n)=>this._updateScroll(e,n)})}_updateScroll(e,n){for(let r=0;r<this.planes.length;r++)this.planes[r].watchScroll&&this.planes[r].updateScrollPosition(e,n);this.renderer.needRender(),this._onScrollCallback&&this._onScrollCallback()}updateScrollValues(e,n){this._scrollManager.updateScrollValues(e,n)}getScrollDeltas(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}}getScrollValues(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}}_keepSync(){this.planes=this.renderer.planes,this.shaderPasses=this.renderer.shaderPasses,this.renderTargets=this.renderer.renderTargets}lerp(e,n,r){return Ch(e,n,r)}onAfterResize(e){return e&&(this._onAfterResizeCallback=e),this}onError(e){return e&&(this._onErrorCallback=e),this}_onRendererError(){setTimeout(()=>{this._onErrorCallback&&!this.errors&&this._onErrorCallback(),this.errors=!0},0)}onSuccess(e){return e&&(this._onSuccessCallback=e),this}_onRendererSuccess(){setTimeout(()=>{this._onSuccessCallback&&this._onSuccessCallback()},0)}onContextLost(e){return e&&(this._onContextLostCallback=e),this}_onRendererContextLost(){this._onContextLostCallback&&this._onContextLostCallback()}onContextRestored(e){return e&&(this._onContextRestoredCallback=e),this}_onRendererContextRestored(){this._onContextRestoredCallback&&this._onContextRestoredCallback()}onRender(e){return e&&(this._onRenderCallback=e),this}onScroll(e){return e&&(this._onScrollCallback=e),this}dispose(){this.renderer.dispose()}_onRendererDisposed(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler,!1),this._scrollManager&&this._scrollManager.dispose()}};var ts=class{constructor(e,n,r){if(this.type="Uniforms",!e||e.type!=="Renderer")z(this.type+": Renderer not passed as first argument",e);else if(!e.gl){z(this.type+": Renderer WebGL context is undefined",e);return}if(this.renderer=e,this.gl=e.gl,this.program=n,this.uniforms={},r)for(let i in r){let s=r[i];this.uniforms[i]={name:s.name,type:s.type,value:s.value.clone&&typeof s.value.clone=="function"?s.value.clone():s.value,update:null}}}handleUniformSetting(e){switch(e.type){case"1i":e.update=this.setUniform1i.bind(this);break;case"1iv":e.update=this.setUniform1iv.bind(this);break;case"1f":e.update=this.setUniform1f.bind(this);break;case"1fv":e.update=this.setUniform1fv.bind(this);break;case"2i":e.update=this.setUniform2i.bind(this);break;case"2iv":e.update=this.setUniform2iv.bind(this);break;case"2f":e.update=this.setUniform2f.bind(this);break;case"2fv":e.update=this.setUniform2fv.bind(this);break;case"3i":e.update=this.setUniform3i.bind(this);break;case"3iv":e.update=this.setUniform3iv.bind(this);break;case"3f":e.update=this.setUniform3f.bind(this);break;case"3fv":e.update=this.setUniform3fv.bind(this);break;case"4i":e.update=this.setUniform4i.bind(this);break;case"4iv":e.update=this.setUniform4iv.bind(this);break;case"4f":e.update=this.setUniform4f.bind(this);break;case"4fv":e.update=this.setUniform4fv.bind(this);break;case"mat2":e.update=this.setUniformMatrix2fv.bind(this);break;case"mat3":e.update=this.setUniformMatrix3fv.bind(this);break;case"mat4":e.update=this.setUniformMatrix4fv.bind(this);break;default:this.renderer.production||v(this.type+": This uniform type is not handled : ",e.type)}}setInternalFormat(e){e.value.type==="Vec2"?(e._internalFormat="Vec2",e.lastValue=e.value.clone()):e.value.type==="Vec3"?(e._internalFormat="Vec3",e.lastValue=e.value.clone()):e.value.type==="Mat4"?(e._internalFormat="Mat4",e.lastValue=e.value.clone()):e.value.type==="Quat"?(e._internalFormat="Quat",e.lastValue=e.value.clone()):Array.isArray(e.value)?(e._internalFormat="array",e.lastValue=Array.from(e.value)):e.value.constructor===Float32Array?(e._internalFormat="mat",e.lastValue=e.value):(e._internalFormat="float",e.lastValue=e.value)}setUniforms(){if(this.uniforms)for(let e in this.uniforms){let n=this.uniforms[e];n.location=this.gl.getUniformLocation(this.program,n.name),n._internalFormat||this.setInternalFormat(n),n.type||(n._internalFormat==="Vec2"?n.type="2f":n._internalFormat==="Vec3"?n.type="3f":n._internalFormat==="Mat4"?n.type="mat4":n._internalFormat==="array"?n.value.length===4?(n.type="4f",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a 4f (array of 4 floats) uniform type")):n.value.length===3?(n.type="3f",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a 3f (array of 3 floats) uniform type")):n.value.length===2&&(n.type="2f",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a 2f (array of 2 floats) uniform type")):n._internalFormat==="mat"?n.value.length===16?(n.type="mat4",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a mat4 (4x4 matrix array) uniform type")):n.value.length===9?(n.type="mat3",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a mat3 (3x3 matrix array) uniform type")):n.value.length===4&&(n.type="mat2",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a mat2 (2x2 matrix array) uniform type")):(n.type="1f",this.renderer.production||v(this.type+": No uniform type declared for "+n.name+", applied a 1f (float) uniform type"))),this.handleUniformSetting(n),n.update&&n.update(n)}}updateUniforms(){if(this.uniforms)for(let e in this.uniforms){let n=this.uniforms[e],r=!1;n._internalFormat==="Vec2"||n._internalFormat==="Vec3"||n._internalFormat==="Quat"?n.value.equals(n.lastValue)||(r=!0,n.lastValue.copy(n.value)):n.value.length?JSON.stringify(n.value)!==JSON.stringify(n.lastValue)&&(r=!0,n.lastValue=Array.from(n.value)):n.value!==n.lastValue&&(r=!0,n.lastValue=n.value),r&&n.update&&n.update(n)}}setUniform1i(e){this.gl.uniform1i(e.location,e.value)}setUniform1iv(e){this.gl.uniform1iv(e.location,e.value)}setUniform1f(e){this.gl.uniform1f(e.location,e.value)}setUniform1fv(e){this.gl.uniform1fv(e.location,e.value)}setUniform2i(e){e._internalFormat==="Vec2"?this.gl.uniform2i(e.location,e.value.x,e.value.y):this.gl.uniform2i(e.location,e.value[0],e.value[1])}setUniform2iv(e){e._internalFormat==="Vec2"?this.gl.uniform2iv(e.location,[e.value.x,e.value.y]):this.gl.uniform2iv(e.location,e.value)}setUniform2f(e){e._internalFormat==="Vec2"?this.gl.uniform2f(e.location,e.value.x,e.value.y):this.gl.uniform2f(e.location,e.value[0],e.value[1])}setUniform2fv(e){e._internalFormat==="Vec2"?this.gl.uniform2fv(e.location,[e.value.x,e.value.y]):this.gl.uniform2fv(e.location,e.value)}setUniform3i(e){e._internalFormat==="Vec3"?this.gl.uniform3i(e.location,e.value.x,e.value.y,e.value.z):this.gl.uniform3i(e.location,e.value[0],e.value[1],e.value[2])}setUniform3iv(e){e._internalFormat==="Vec3"?this.gl.uniform3iv(e.location,[e.value.x,e.value.y,e.value.z]):this.gl.uniform3iv(e.location,e.value)}setUniform3f(e){e._internalFormat==="Vec3"?this.gl.uniform3f(e.location,e.value.x,e.value.y,e.value.z):this.gl.uniform3f(e.location,e.value[0],e.value[1],e.value[2])}setUniform3fv(e){e._internalFormat==="Vec3"?this.gl.uniform3fv(e.location,[e.value.x,e.value.y,e.value.z]):this.gl.uniform3fv(e.location,e.value)}setUniform4i(e){e._internalFormat==="Quat"?this.gl.uniform4i(e.location,e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]):this.gl.uniform4i(e.location,e.value[0],e.value[1],e.value[2],e.value[3])}setUniform4iv(e){e._internalFormat==="Quat"?this.gl.uniform4iv(e.location,[e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]]):this.gl.uniform4iv(e.location,e.value)}setUniform4f(e){e._internalFormat==="Quat"?this.gl.uniform4f(e.location,e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]):this.gl.uniform4f(e.location,e.value[0],e.value[1],e.value[2],e.value[3])}setUniform4fv(e){e._internalFormat==="Quat"?this.gl.uniform4fv(e.location,[e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]]):this.gl.uniform4fv(e.location,e.value)}setUniformMatrix2fv(e){this.gl.uniformMatrix2fv(e.location,!1,e.value)}setUniformMatrix3fv(e){this.gl.uniformMatrix3fv(e.location,!1,e.value)}setUniformMatrix4fv(e){e._internalFormat==="Mat4"?this.gl.uniformMatrix4fv(e.location,!1,e.value.elements):this.gl.uniformMatrix4fv(e.location,!1,e.value)}};var ND=`
precision mediump float;
`,pt=ND.replace(/\n/g,"");var PD=`
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;
`,ns=PD.replace(/\n/g,"");var OD=`
varying vec3 vVertexPosition;
varying vec2 vTextureCoord;
`,gt=OD.replace(/\n/g,"");var FD=pt+ns+gt+`
uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

void main() {
    vTextureCoord = aTextureCoord;
    vVertexPosition = aVertexPosition;
    
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
}
`,Eh=FD.replace(/\n/g,"");var kD=pt+gt+`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
}
`,xh=kD.replace(/\n/g,"");var LD=pt+ns+gt+`
void main() {
    vTextureCoord = aTextureCoord;
    vVertexPosition = aVertexPosition;
    
    gl_Position = vec4(aVertexPosition, 1.0);
}
`,Ih=LD.replace(/\n/g,"");var jD=pt+gt+`
uniform sampler2D uRenderTexture;

void main() {
    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);
}
`,Mh=jD.replace(/\n/g,"");var Sh=0,Dr=class{constructor(e,{parent:n,vertexShader:r,fragmentShader:i}={}){if(this.type="Program",!e||e.type!=="Renderer")z(this.type+": Renderer not passed as first argument",e);else if(!e.gl){z(this.type+": Renderer WebGL context is undefined",e);return}this.renderer=e,this.gl=this.renderer.gl,this.parent=n,this.defaultVsCode=this.parent.type==="Plane"?Eh:Ih,this.defaultFsCode=this.parent.type==="Plane"?xh:Mh,r?this.vsCode=r:(!this.renderer.production&&this.parent.type==="Plane"&&v(this.parent.type+": No vertex shader provided, will use a default one"),this.vsCode=this.defaultVsCode),i?this.fsCode=i:(this.renderer.production||v(this.parent.type+": No fragment shader provided, will use a default one"),this.fsCode=this.defaultFsCode),this.compiled=!0,this.setupProgram()}createShader(e,n){let r=this.gl.createShader(n);if(this.gl.shaderSource(r,e),this.gl.compileShader(r),!this.renderer.production&&!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)){let i=n===this.gl.VERTEX_SHADER?"vertex shader":"fragment shader",o=this.gl.getShaderSource(r).split(`
`);for(let a=0;a<o.length;a++)o[a]=a+1+": "+o[a];return o=o.join(`
`),v(this.type+": Errors occurred while compiling the",i,`:
`,this.gl.getShaderInfoLog(r)),z(o),v(this.type+": Will use a default",i),this.createShader(n===this.gl.VERTEX_SHADER?this.defaultVsCode:this.defaultFsCode,n)}return r}useNewShaders(){this.vertexShader=this.createShader(this.vsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.fsCode,this.gl.FRAGMENT_SHADER),(!this.vertexShader||!this.fragmentShader)&&(this.renderer.production||v(this.type+": Unable to find or compile the vertex or fragment shader"))}setupProgram(){let e=this.renderer.cache.getProgramFromShaders(this.vsCode,this.fsCode);e?(this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.activeUniforms=e.activeUniforms,this.activeAttributes=e.activeAttributes,this.createProgram()):(this.useNewShaders(),this.compiled&&(this.createProgram(),this.renderer.cache.addProgram(this)))}createProgram(){if(Sh++,this.id=Sh,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.renderer.production&&!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){v(this.type+": Unable to initialize the shader program: "+this.gl.getProgramInfoLog(this.program)),v(this.type+": Will use default vertex and fragment shaders"),this.vertexShader=this.createShader(this.defaultVsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.defaultFsCode,this.gl.FRAGMENT_SHADER),this.createProgram();return}if(this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),!this.activeUniforms||!this.activeAttributes){this.activeUniforms={textures:[],textureMatrices:[]};let e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let r=0;r<e;r++){let i=this.gl.getActiveUniform(this.program,r);i.type===this.gl.SAMPLER_2D&&this.activeUniforms.textures.push(i.name),i.type===this.gl.FLOAT_MAT4&&i.name!=="uMVMatrix"&&i.name!=="uPMatrix"&&this.activeUniforms.textureMatrices.push(i.name)}this.activeAttributes=[];let n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let i=this.gl.getActiveAttrib(this.program,r);this.activeAttributes.push(i.name)}}}createUniforms(e){this.uniformsManager=new ts(this.renderer,this.program,e),this.setUniforms()}setUniforms(){this.renderer.useProgram(this),this.uniformsManager.setUniforms()}updateUniforms(){this.renderer.useProgram(this),this.uniformsManager.updateUniforms()}};var rs=class{constructor(e,{program:n=null,width:r=1,height:i=1}={}){if(this.type="Geometry",!e||e.type!=="Renderer")z(this.type+": Renderer not passed as first argument",e);else if(!e.gl){z(this.type+": Renderer WebGL context is undefined",e);return}this.renderer=e,this.gl=this.renderer.gl,this.definition={id:r*i+r,width:r,height:i},this.setDefaultAttributes(),this.setVerticesUVs()}restoreContext(e){this.program=null,this.setDefaultAttributes(),this.setVerticesUVs(),this.setProgram(e)}setDefaultAttributes(){this.attributes={vertexPosition:{name:"aVertexPosition",size:3,isActive:!1},textureCoord:{name:"aTextureCoord",size:3,isActive:!1}}}setVerticesUVs(){let e=this.renderer.cache.getGeometryFromID(this.definition.id);e?(this.attributes.vertexPosition.array=e.vertices,this.attributes.textureCoord.array=e.uvs):(this.computeVerticesUVs(),this.renderer.cache.addGeometry(this.definition.id,this.attributes.vertexPosition.array,this.attributes.textureCoord.array))}setProgram(e){this.program=e,this.initAttributes(),this.renderer._isWebGL2?(this._vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this._vao)):this.renderer.extensions.OES_vertex_array_object&&(this._vao=this.renderer.extensions.OES_vertex_array_object.createVertexArrayOES(),this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),this.initializeBuffers()}initAttributes(){for(let e in this.attributes){if(this.attributes[e].isActive=this.program.activeAttributes.includes(this.attributes[e].name),!this.attributes[e].isActive)return;this.attributes[e].location=this.gl.getAttribLocation(this.program.program,this.attributes[e].name),this.attributes[e].buffer=this.gl.createBuffer(),this.attributes[e].numberOfItems=this.definition.width*this.definition.height*this.attributes[e].size*2}}computeVerticesUVs(){this.attributes.vertexPosition.array=[],this.attributes.textureCoord.array=[];let e=this.attributes.vertexPosition.array,n=this.attributes.textureCoord.array;for(let r=0;r<this.definition.height;r++){let i=r/this.definition.height;for(let s=0;s<this.definition.width;s++){let o=s/this.definition.width;n.push(o),n.push(i),n.push(0),e.push((o-.5)*2),e.push((i-.5)*2),e.push(0),n.push(o+1/this.definition.width),n.push(i),n.push(0),e.push((o+1/this.definition.width-.5)*2),e.push((i-.5)*2),e.push(0),n.push(o),n.push(i+1/this.definition.height),n.push(0),e.push((o-.5)*2),e.push((i+1/this.definition.height-.5)*2),e.push(0),n.push(o),n.push(i+1/this.definition.height),n.push(0),e.push((o-.5)*2),e.push((i+1/this.definition.height-.5)*2),e.push(0),n.push(o+1/this.definition.width),n.push(i),n.push(0),e.push((o+1/this.definition.width-.5)*2),e.push((i-.5)*2),e.push(0),n.push(o+1/this.definition.width),n.push(i+1/this.definition.height),n.push(0),e.push((o+1/this.definition.width-.5)*2),e.push((i+1/this.definition.height-.5)*2),e.push(0)}}}initializeBuffers(){if(this.attributes){for(let e in this.attributes){if(!this.attributes[e].isActive)return;this.gl.enableVertexAttribArray(this.attributes[e].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[e].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.attributes[e].array),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.attributes[e].location,this.attributes[e].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}}bindBuffers(){if(this._vao)this.renderer._isWebGL2?this.gl.bindVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao);else for(let e in this.attributes){if(!this.attributes[e].isActive)return;this.gl.enableVertexAttribArray(this.attributes[e].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[e].buffer),this.gl.vertexAttribPointer(this.attributes[e].location,this.attributes[e].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}draw(){this.gl.drawArrays(this.gl.TRIANGLES,0,this.attributes.vertexPosition.numberOfItems)}dispose(){this._vao&&(this.renderer._isWebGL2?this.gl.deleteVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao));for(let e in this.attributes){if(!this.attributes[e].isActive)return;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[e].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(this.attributes[e].buffer)}this.attributes=null,this.renderer.state.currentGeometryID=null}};var Ce=class t{constructor(e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){this.type="Mat4",this.elements=e}setFromArray(e){for(let n=0;n<this.elements.length;n++)this.elements[n]=e[n];return this}copy(e){let n=e.elements;return this.elements[0]=n[0],this.elements[1]=n[1],this.elements[2]=n[2],this.elements[3]=n[3],this.elements[4]=n[4],this.elements[5]=n[5],this.elements[6]=n[6],this.elements[7]=n[7],this.elements[8]=n[8],this.elements[9]=n[9],this.elements[10]=n[10],this.elements[11]=n[11],this.elements[12]=n[12],this.elements[13]=n[13],this.elements[14]=n[14],this.elements[15]=n[15],this}clone(){return new t().copy(this)}multiply(e){let n=this.elements,r=e.elements,i=new t;return i.elements[0]=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12],i.elements[1]=r[0]*n[1]+r[1]*n[5]+r[2]*n[9]+r[3]*n[13],i.elements[2]=r[0]*n[2]+r[1]*n[6]+r[2]*n[10]+r[3]*n[14],i.elements[3]=r[0]*n[3]+r[1]*n[7]+r[2]*n[11]+r[3]*n[15],i.elements[4]=r[4]*n[0]+r[5]*n[4]+r[6]*n[8]+r[7]*n[12],i.elements[5]=r[4]*n[1]+r[5]*n[5]+r[6]*n[9]+r[7]*n[13],i.elements[6]=r[4]*n[2]+r[5]*n[6]+r[6]*n[10]+r[7]*n[14],i.elements[7]=r[4]*n[3]+r[5]*n[7]+r[6]*n[11]+r[7]*n[15],i.elements[8]=r[8]*n[0]+r[9]*n[4]+r[10]*n[8]+r[11]*n[12],i.elements[9]=r[8]*n[1]+r[9]*n[5]+r[10]*n[9]+r[11]*n[13],i.elements[10]=r[8]*n[2]+r[9]*n[6]+r[10]*n[10]+r[11]*n[14],i.elements[11]=r[8]*n[3]+r[9]*n[7]+r[10]*n[11]+r[11]*n[15],i.elements[12]=r[12]*n[0]+r[13]*n[4]+r[14]*n[8]+r[15]*n[12],i.elements[13]=r[12]*n[1]+r[13]*n[5]+r[14]*n[9]+r[15]*n[13],i.elements[14]=r[12]*n[2]+r[13]*n[6]+r[14]*n[10]+r[15]*n[14],i.elements[15]=r[12]*n[3]+r[13]*n[7]+r[14]*n[11]+r[15]*n[15],i}getInverse(){let e=this.elements,n=new t,r=n.elements,i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],u=e[5],c=e[6],d=e[7],h=e[8],f=e[9],p=e[10],m=e[11],D=e[12],I=e[13],F=e[14],A=e[15],H=i*u-s*l,G=i*c-o*l,$=i*d-a*l,q=s*c-o*u,le=s*d-a*u,pe=o*d-a*c,ge=h*I-f*D,ke=h*F-p*D,tt=h*A-m*D,nt=f*F-p*I,rt=f*A-m*I,it=p*A-m*F,W=H*it-G*rt+$*nt+q*tt-le*ke+pe*ge;return W?(W=1/W,r[0]=(u*it-c*rt+d*nt)*W,r[1]=(o*rt-s*it-a*nt)*W,r[2]=(I*pe-F*le+A*q)*W,r[3]=(p*le-f*pe-m*q)*W,r[4]=(c*tt-l*it-d*ke)*W,r[5]=(i*it-o*tt+a*ke)*W,r[6]=(F*$-D*pe-A*G)*W,r[7]=(h*pe-p*$+m*G)*W,r[8]=(l*rt-u*tt+d*ge)*W,r[9]=(s*tt-i*rt-a*ge)*W,r[10]=(D*le-I*$+A*H)*W,r[11]=(f*$-h*le-m*H)*W,r[12]=(u*ke-l*nt-c*ge)*W,r[13]=(i*nt-s*ke+o*ge)*W,r[14]=(I*G-D*q-F*H)*W,r[15]=(h*q-f*G+p*H)*W,n):null}scale(e){let n=this.elements;return n[0]*=e.x,n[1]*=e.x,n[2]*=e.x,n[3]*=e.x,n[4]*=e.y,n[5]*=e.y,n[6]*=e.y,n[7]*=e.y,n[8]*=e.z,n[9]*=e.z,n[10]*=e.z,n[11]*=e.z,this}compose(e,n,r){let i=this.elements,s=n.elements[0],o=n.elements[1],a=n.elements[2],l=n.elements[3],u=s+s,c=o+o,d=a+a,h=s*u,f=s*c,p=s*d,m=o*c,D=o*d,I=a*d,F=l*u,A=l*c,H=l*d,G=r.x,$=r.y,q=r.z;return i[0]=(1-(m+I))*G,i[1]=(f+H)*G,i[2]=(p-A)*G,i[3]=0,i[4]=(f-H)*$,i[5]=(1-(h+I))*$,i[6]=(D+F)*$,i[7]=0,i[8]=(p+A)*q,i[9]=(D-F)*q,i[10]=(1-(h+m))*q,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}composeFromOrigin(e,n,r,i){let s=this.elements,o=n.elements[0],a=n.elements[1],l=n.elements[2],u=n.elements[3],c=o+o,d=a+a,h=l+l,f=o*c,p=o*d,m=o*h,D=a*d,I=a*h,F=l*h,A=u*c,H=u*d,G=u*h,$=r.x,q=r.y,le=r.z,pe=i.x,ge=i.y,ke=i.z,tt=(1-(D+F))*$,nt=(p+G)*$,rt=(m-H)*$,it=(p-G)*q,W=(1-(f+F))*q,Ga=(I+A)*q,qa=(m+H)*le,Za=(I-A)*le,Ya=(1-(f+D))*le;return s[0]=tt,s[1]=nt,s[2]=rt,s[3]=0,s[4]=it,s[5]=W,s[6]=Ga,s[7]=0,s[8]=qa,s[9]=Za,s[10]=Ya,s[11]=0,s[12]=e.x+pe-(tt*pe+it*ge+qa*ke),s[13]=e.y+ge-(nt*pe+W*ge+Za*ke),s[14]=e.z+ke-(rt*pe+Ga*ge+Ya*ke),s[15]=1,this}};var re=class t{constructor(e=0,n=e){this.type="Vec2",this._x=e,this._y=n}get x(){return this._x}get y(){return this._y}set x(e){let n=e!==this._x;this._x=e,n&&this._onChangeCallback&&this._onChangeCallback()}set y(e){let n=e!==this._y;this._y=e,n&&this._onChangeCallback&&this._onChangeCallback()}onChange(e){return e&&(this._onChangeCallback=e),this}set(e,n){return this._x=e,this._y=n,this}add(e){return this._x+=e.x,this._y+=e.y,this}addScalar(e){return this._x+=e,this._y+=e,this}sub(e){return this._x-=e.x,this._y-=e.y,this}subScalar(e){return this._x-=e,this._y-=e,this}multiply(e){return this._x*=e.x,this._y*=e.y,this}multiplyScalar(e){return this._x*=e,this._y*=e,this}copy(e){return this._x=e.x,this._y=e.y,this}clone(){return new t(this._x,this._y)}sanitizeNaNValuesWith(e){return this._x=isNaN(this._x)?e.x:parseFloat(this._x),this._y=isNaN(this._y)?e.y:parseFloat(this._y),this}max(e){return this._x=Math.max(this._x,e.x),this._y=Math.max(this._y,e.y),this}min(e){return this._x=Math.min(this._x,e.x),this._y=Math.min(this._y,e.y),this}equals(e){return this._x===e.x&&this._y===e.y}normalize(){let e=this._x*this._x+this._y*this._y;return e>0&&(e=1/Math.sqrt(e)),this._x*=e,this._y*=e,this}dot(e){return this._x*e.x+this._y*e.y}};var B=class t{constructor(e=0,n=e,r=e){this.type="Vec3",this._x=e,this._y=n,this._z=r}get x(){return this._x}get y(){return this._y}get z(){return this._z}set x(e){let n=e!==this._x;this._x=e,n&&this._onChangeCallback&&this._onChangeCallback()}set y(e){let n=e!==this._y;this._y=e,n&&this._onChangeCallback&&this._onChangeCallback()}set z(e){let n=e!==this._z;this._z=e,n&&this._onChangeCallback&&this._onChangeCallback()}onChange(e){return e&&(this._onChangeCallback=e),this}set(e,n,r){return this._x=e,this._y=n,this._z=r,this}add(e){return this._x+=e.x,this._y+=e.y,this._z+=e.z,this}addScalar(e){return this._x+=e,this._y+=e,this._z+=e,this}sub(e){return this._x-=e.x,this._y-=e.y,this._z-=e.z,this}subScalar(e){return this._x-=e,this._y-=e,this._z-=e,this}multiply(e){return this._x*=e.x,this._y*=e.y,this._z*=e.z,this}multiplyScalar(e){return this._x*=e,this._y*=e,this._z*=e,this}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this}clone(){return new t(this._x,this._y,this._z)}sanitizeNaNValuesWith(e){return this._x=isNaN(this._x)?e.x:parseFloat(this._x),this._y=isNaN(this._y)?e.y:parseFloat(this._y),this._z=isNaN(this._z)?e.z:parseFloat(this._z),this}max(e){return this._x=Math.max(this._x,e.x),this._y=Math.max(this._y,e.y),this._z=Math.max(this._z,e.z),this}min(e){return this._x=Math.min(this._x,e.x),this._y=Math.min(this._y,e.y),this._z=Math.min(this._z,e.z),this}equals(e){return this._x===e.x&&this._y===e.y&&this._z===e.z}normalize(){let e=this._x*this._x+this._y*this._y+this._z*this._z;return e>0&&(e=1/Math.sqrt(e)),this._x*=e,this._y*=e,this._z*=e,this}dot(e){return this._x*e.x+this._y*e.y+this._z*e.z}applyMat4(e){let n=this._x,r=this._y,i=this._z,s=e.elements,o=s[3]*n+s[7]*r+s[11]*i+s[15];return o=o||1,this._x=(s[0]*n+s[4]*r+s[8]*i+s[12])/o,this._y=(s[1]*n+s[5]*r+s[9]*i+s[13])/o,this._z=(s[2]*n+s[6]*r+s[10]*i+s[14])/o,this}applyQuat(e){let n=this._x,r=this._y,i=this._z,s=e.elements[0],o=e.elements[1],a=e.elements[2],l=e.elements[3],u=l*n+o*i-a*r,c=l*r+a*n-s*i,d=l*i+s*r-o*n,h=-s*n-o*r-a*i;return this._x=u*l+h*-s+c*-a-d*-o,this._y=c*l+h*-o+d*-s-u*-a,this._z=d*l+h*-a+u*-o-c*-s,this}project(e){return this.applyMat4(e.viewMatrix).applyMat4(e.projectionMatrix),this}unproject(e){return this.applyMat4(e.projectionMatrix.getInverse()).applyMat4(e.worldMatrix),this}};var Wa=new re,VD=new B,UD=new Ce,Ee=class{constructor(e,{isFBOTexture:n=!1,fromTexture:r=!1,loader:i,sampler:s,floatingPoint:o="none",premultiplyAlpha:a=!1,anisotropy:l=1,generateMipmap:u=null,wrapS:c,wrapT:d,minFilter:h,magFilter:f}={}){if(this.type="Texture",e=e&&e.renderer||e,!e||e.type!=="Renderer")z(this.type+": Renderer not passed as first argument",e);else if(!e.gl){e.production||z(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined");return}if(this.renderer=e,this.gl=this.renderer.gl,this.uuid=vr(),this._globalParameters={unpackAlignment:4,flipY:!n,premultiplyAlpha:!1,shouldPremultiplyAlpha:a,floatingPoint:o,type:this.gl.UNSIGNED_BYTE,internalFormat:this.gl.RGBA,format:this.gl.RGBA},this.parameters={anisotropy:l,generateMipmap:u,wrapS:c||this.gl.CLAMP_TO_EDGE,wrapT:d||this.gl.CLAMP_TO_EDGE,minFilter:h||this.gl.LINEAR,magFilter:f||this.gl.LINEAR,_shouldUpdate:!0},this._initState(),this.sourceType=n?"fbo":"empty",this._useCache=!0,this._samplerName=s,this._sampler={isActive:!1,isTextureBound:!1,texture:this.gl.createTexture()},this._textureMatrix={matrix:new Ce,isActive:!1},this._size={width:1,height:1},this.scale=new re(1),this.scale.onChange(()=>this.resize()),this.offset=new re,this.offset.onChange(()=>this.resize()),this._loader=i,this._sourceLoaded=!1,this._uploaded=!1,this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.userData={},this._canDraw=!1,r){this._copyOnInit=!0,this._copiedFrom=r;return}this._copyOnInit=!1,this._initTexture()}_initState(){this._state={anisotropy:1,generateMipmap:!1,wrapS:null,wrapT:null,minFilter:null,magFilter:this.gl.LINEAR}}_initTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.sourceType==="empty"&&(this._globalParameters.flipY=!1,this._updateGlobalTexParameters(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),this._canDraw=!0)}_restoreFromTexture(){this._copyOnInit||this._initTexture(),this._parent&&(this._setTextureUniforms(),this._setSize()),this.copy(this._copiedFrom),this._canDraw=!0}_restoreContext(){if(this._canDraw=!1,this._sampler.texture=this.gl.createTexture(),this._sampler.isActive=!1,this._sampler.isTextureBound=!1,this._textureMatrix.isActive=!1,this._initState(),this._state.generateMipmap=!1,this.parameters._shouldUpdate=!0,!this._copiedFrom)this._initTexture(),this._parent&&this._setParent(),this.source&&(this.setSource(this.source),this.sourceType==="image"?this.renderer.cache.addTexture(this):this.needUpdate()),this._canDraw=!0;else{let e=this.renderer.nextRender.add(()=>{this._copiedFrom._canDraw&&(this._restoreFromTexture(),e.keep=!1)},!0)}}addParent(e){if(!e||e.type!=="Plane"&&e.type!=="PingPongPlane"&&e.type!=="ShaderPass"&&e.type!=="RenderTarget"){this.renderer.production||v(this.type+": cannot add texture as a child of ",e," because it is not a valid parent");return}this._parent=e,this.index=this._parent.textures.length,this._parent.textures.push(this),this._setParent()}_setParent(){if(this._sampler.name=this._samplerName||"uSampler"+this.index,this._textureMatrix.name=this._samplerName?this._samplerName+"Matrix":"uTextureMatrix"+this.index,this._parent._program){if(!this._parent._program.compiled){this.renderer.production||v(this.type+": Unable to create the texture because the program is not valid");return}if(this._setTextureUniforms(),this._copyOnInit){let e=this.renderer.nextRender.add(()=>{this._copiedFrom._canDraw&&this._copiedFrom._uploaded&&(this.copy(this._copiedFrom),e.keep=!1)},!0);return}this.source?this._parent.loader&&this._parent.loader._addSourceToParent(this.source,this.sourceType):this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setSize()}else this._parent.type==="RenderTarget"&&(this._size={width:this._parent._size&&this._parent._size.width||this.renderer._boundingRect.width,height:this._parent._size&&this._parent._size.height||this.renderer._boundingRect.height},this._upload(),this._updateTexParameters(),this._canDraw=!0)}hasParent(){return!!this._parent}_setTextureUniforms(){let e=this._parent._program.activeUniforms;for(let n=0;n<e.textures.length;n++)e.textures[n]===this._sampler.name&&(this._sampler.isActive=!0,this.renderer.useProgram(this._parent._program),this._sampler.location=this.gl.getUniformLocation(this._parent._program.program,this._sampler.name),e.textureMatrices.find(i=>i===this._textureMatrix.name)&&(this._textureMatrix.isActive=!0,this._textureMatrix.location=this.gl.getUniformLocation(this._parent._program.program,this._textureMatrix.name)),this.gl.uniform1i(this._sampler.location,this.index))}copy(e){if(!e||e.type!=="Texture"){this.renderer.production||v(this.type+": Unable to set the texture from texture:",e);return}this._globalParameters=Object.assign({},e._globalParameters),this._state=Object.assign({},e._state),this.parameters.generateMipmap=e.parameters.generateMipmap,this._state.generateMipmap=null,this._size=e._size,!this._sourceLoaded&&e._sourceLoaded&&this._onSourceLoadedCallback&&this._onSourceLoadedCallback(),this._sourceLoaded=e._sourceLoaded,!this._uploaded&&e._uploaded&&this._onSourceUploadedCallback&&this._onSourceUploadedCallback(),this._uploaded=e._uploaded,this.sourceType=e.sourceType,this.source=e.source,this._videoFrameCallbackID=e._videoFrameCallbackID,this._sampler.texture=e._sampler.texture,this._copiedFrom=e,this._parent&&this._parent._program&&(!this._canDraw||!this._textureMatrix.matrix)&&(this._setSize(),this._canDraw=!0),this._updateTexParameters(),this.renderer.needRender()}setSource(e){this._sourceLoaded||this.renderer.nextRender.add(()=>this._onSourceLoadedCallback&&this._onSourceLoadedCallback());let n=e.tagName.toUpperCase()==="IMG"?"image":e.tagName.toLowerCase();if((n==="video"||n==="canvas")&&(this._useCache=!1),this._useCache){let r=this.renderer.cache.getTextureFromSource(e);if(r&&r.uuid!==this.uuid){this._uploaded||(this.renderer.nextRender.add(()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback()),this._uploaded=!0),this.copy(r),this.resize();return}}if(this.sourceType==="empty"||this.sourceType!==n)if(n==="video")this._willUpdate=!1,this.shouldUpdate=!0;else if(n==="canvas")this._willUpdate=!0,this.shouldUpdate=!0;else if(n==="image")this._willUpdate=!1,this.shouldUpdate=!1;else{this.renderer.production||v(this.type+": this HTML tag could not be converted into a texture:",e.tagName);return}this.source=e,this.sourceType=n,this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0,this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.resize(),this._globalParameters.flipY=!0,this._globalParameters.premultiplyAlpha=this._globalParameters.shouldPremultiplyAlpha,this.sourceType==="image"&&(this.parameters.generateMipmap=this.parameters.generateMipmap||this.parameters.generateMipmap===null,this.parameters._shouldUpdate=this.parameters.generateMipmap,this._state.generateMipmap=!1,this._upload()),this.renderer.needRender()}_updateGlobalTexParameters(){this.renderer.state.unpackAlignment!==this._globalParameters.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this._globalParameters.unpackAlignment),this.renderer.state.unpackAlignment=this._globalParameters.unpackAlignment),this.renderer.state.flipY!==this._globalParameters.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this._globalParameters.flipY),this.renderer.state.flipY=this._globalParameters.flipY),this.renderer.state.premultiplyAlpha!==this._globalParameters.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._globalParameters.premultiplyAlpha),this.renderer.state.premultiplyAlpha=this._globalParameters.premultiplyAlpha),this._globalParameters.floatingPoint==="half-float"?this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.HALF_FLOAT):this.renderer.extensions.OES_texture_half_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:this.renderer.production||v(this.type+": could not use half-float textures because the extension is not available"):this._globalParameters.floatingPoint==="float"&&(this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.FLOAT):this.renderer.extensions.OES_texture_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.FLOAT:this.renderer.production||v(this.type+": could not use float textures because the extension is not available"))}_updateTexParameters(){this.index&&this.renderer.state.activeTexture!==this.index&&this._bindTexture(),this.parameters.wrapS!==this._state.wrapS&&(!this.renderer._isWebGL2&&(!Fe(this._size.width)||!Fe(this._size.height))&&(this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.parameters.wrapS!==this.gl.REPEAT&&this.parameters.wrapS!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapS!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||v(this.type+": Wrong wrapS value",this.parameters.wrapS,"for this texture:",this,`
gl.CLAMP_TO_EDGE wrapping will be used instead`),this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.parameters.wrapS),this._state.wrapS=this.parameters.wrapS),this.parameters.wrapT!==this._state.wrapT&&(!this.renderer._isWebGL2&&(!Fe(this._size.width)||!Fe(this._size.height))&&(this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.parameters.wrapT!==this.gl.REPEAT&&this.parameters.wrapT!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapT!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||v(this.type+": Wrong wrapT value",this.parameters.wrapT,"for this texture:",this,`
gl.CLAMP_TO_EDGE wrapping will be used instead`),this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.parameters.wrapT),this._state.wrapT=this.parameters.wrapT),this.parameters.generateMipmap&&!this._state.generateMipmap&&this.source&&(!this.renderer._isWebGL2&&(!Fe(this._size.width)||!Fe(this._size.height))?this.parameters.generateMipmap=!1:this.gl.generateMipmap(this.gl.TEXTURE_2D),this._state.generateMipmap=this.parameters.generateMipmap),this.parameters.minFilter!==this._state.minFilter&&(!this.renderer._isWebGL2&&(!Fe(this._size.width)||!Fe(this._size.height))&&(this.parameters.minFilter=this.gl.LINEAR),!this.parameters.generateMipmap&&this.parameters.generateMipmap!==null&&(this.parameters.minFilter=this.gl.LINEAR),this.parameters.minFilter!==this.gl.LINEAR&&this.parameters.minFilter!==this.gl.NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_LINEAR&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_LINEAR&&(this.renderer.production||v(this.type+": Wrong minFilter value",this.parameters.minFilter,"for this texture:",this,`
gl.LINEAR filtering will be used instead`),this.parameters.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.parameters.minFilter),this._state.minFilter=this.parameters.minFilter),this.parameters.magFilter!==this._state.magFilter&&(!this.renderer._isWebGL2&&(!Fe(this._size.width)||!Fe(this._size.height))&&(this.parameters.magFilter=this.gl.LINEAR),this.parameters.magFilter!==this.gl.LINEAR&&this.parameters.magFilter!==this.gl.NEAREST&&(this.renderer.production||v(this.type+": Wrong magFilter value",this.parameters.magFilter,"for this texture:",this,`
gl.LINEAR filtering will be used instead`),this.parameters.magFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.parameters.magFilter),this._state.magFilter=this.parameters.magFilter);let e=this.renderer.extensions.EXT_texture_filter_anisotropic;if(e&&this.parameters.anisotropy!==this._state.anisotropy){let n=this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.parameters.anisotropy=Math.max(1,Math.min(this.parameters.anisotropy,n)),this.gl.texParameterf(this.gl.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,this.parameters.anisotropy),this._state.anisotropy=this.parameters.anisotropy}}setWrapS(e){this.parameters.wrapS!==e&&(this.parameters.wrapS=e,this.parameters._shouldUpdate=!0)}setWrapT(e){this.parameters.wrapT!==e&&(this.parameters.wrapT=e,this.parameters._shouldUpdate=!0)}setMinFilter(e){this.parameters.minFilter!==e&&(this.parameters.minFilter=e,this.parameters._shouldUpdate=!0)}setMagFilter(e){this.parameters.magFilter!==e&&(this.parameters.magFilter=e,this.parameters._shouldUpdate=!0)}setAnisotropy(e){e=isNaN(e)?this.parameters.anisotropy:e,this.parameters.anisotropy!==e&&(this.parameters.anisotropy=e,this.parameters._shouldUpdate=!0)}needUpdate(){this._forceUpdate=!0}_videoFrameCallback(){if(this._willUpdate=!0,this.source)this.source.requestVideoFrameCallback(()=>this._videoFrameCallback());else{let e=this.renderer.nextRender.add(()=>{this.source&&(e.keep=!1,this.source.requestVideoFrameCallback(()=>this._videoFrameCallback()))},!0)}}_upload(){this._updateGlobalTexParameters(),this.source?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._globalParameters.format,this._globalParameters.type,this.source):this.sourceType==="fbo"&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,this.source||null),this._uploaded||(this.renderer.nextRender.add(()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback()),this._uploaded=!0)}_getSizes(){if(this.sourceType==="fbo")return{parentWidth:this._parent._boundingRect.document.width,parentHeight:this._parent._boundingRect.document.height,sourceWidth:this._parent._boundingRect.document.width,sourceHeight:this._parent._boundingRect.document.height,xOffset:0,yOffset:0};let e=this._parent.scale?Wa.set(this._parent.scale.x,this._parent.scale.y):Wa.set(1,1),n=this._parent._boundingRect.document.width*e.x,r=this._parent._boundingRect.document.height*e.y,i=this._size.width,s=this._size.height,o=i/s,a=n/r,l=0,u=0;return a>o?u=Math.min(0,r-n*(1/o)):a<o&&(l=Math.min(0,n-r*o)),{parentWidth:n,parentHeight:r,sourceWidth:i,sourceHeight:s,xOffset:l,yOffset:u}}setScale(e){if(!e.type||e.type!=="Vec2"){this.renderer.production||v(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",e);return}e.sanitizeNaNValuesWith(this.scale).max(Wa.set(.001,.001)),e.equals(this.scale)||(this.scale.copy(e),this.resize())}setOffset(e){if(!e.type||e.type!=="Vec2"){this.renderer.production||v(this.type+": Cannot set offset because the parameter passed is not of Vec2 type:",scale);return}e.sanitizeNaNValuesWith(this.offset),e.equals(this.offset)||(this.offset.copy(e),this.resize())}_setSize(){if(this._parent&&this._parent._program){let e=this._getSizes();this._updateTextureMatrix(e)}}resize(){this.sourceType==="fbo"?(this._size={width:this._parent._size&&this._parent._size.width||this._parent._boundingRect.document.width,height:this._parent._size&&this._parent._size.height||this._parent._boundingRect.document.height},this._copiedFrom||(this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,null))):this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight}),this._setSize()}_updateTextureMatrix(e){let n=VD.set(e.parentWidth/(e.parentWidth-e.xOffset),e.parentHeight/(e.parentHeight-e.yOffset),1);n.x/=this.scale.x,n.y/=this.scale.y,this._textureMatrix.matrix=UD.setFromArray([n.x,0,0,0,0,n.y,0,0,0,0,1,0,(1-n.x)/2+this.offset.x,(1-n.y)/2+this.offset.y,0,1]),this._updateMatrixUniform()}_updateMatrixUniform(){this._textureMatrix.isActive&&(this.renderer.useProgram(this._parent._program),this.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix.elements))}_onSourceLoaded(e){this.setSource(e),this.sourceType==="image"&&this.renderer.cache.addTexture(this)}_bindTexture(){this._canDraw&&(this.renderer.state.activeTexture!==this.index&&(this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.renderer.state.activeTexture=this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this._sampler.isTextureBound||(this._sampler.isTextureBound=!!this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._sampler.isTextureBound&&this.renderer.needRender()))}_draw(){this._sampler.isActive&&(this._bindTexture(),this.sourceType==="video"&&this.source&&!this._videoFrameCallbackID&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&!this.source.paused&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&(this._state.generateMipmap=!1,this._upload()),this.sourceType==="video"&&(this._willUpdate=!1),this._forceUpdate=!1),this.parameters._shouldUpdate&&(this._updateTexParameters(),this.parameters._shouldUpdate=!1)}onSourceLoaded(e){return e&&(this._onSourceLoadedCallback=e),this}onSourceUploaded(e){return e&&(this._onSourceUploadedCallback=e),this}_dispose(e=!1){this.sourceType==="video"||this.sourceType==="image"&&!this.renderer.state.isActive?(this._loader&&this._loader._removeSource(this),this.source=null):this.sourceType==="canvas"&&(this.source.width=this.source.width,this.source=null),this._parent=null,this.gl&&!this._copiedFrom&&(e||this.sourceType!=="image"||!this.renderer.state.isActive)&&(this._canDraw=!1,this.renderer.cache.removeTexture(this),this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.deleteTexture(this._sampler.texture))}};var wr=class{constructor(e,n="anonymous"){if(this.type="TextureLoader",e=e&&e.renderer||e,!e||e.type!=="Renderer")z(this.type+": Renderer not passed as first argument",e);else if(!e.gl){z(this.type+": Renderer WebGL context is undefined",e);return}this.renderer=e,this.gl=this.renderer.gl,this.crossOrigin=n,this.elements=[]}_addElement(e,n,r,i){let s={source:e,texture:n,load:this._sourceLoaded.bind(this,e,n,r),error:this._sourceLoadError.bind(this,e,i)};return this.elements.push(s),s}_sourceLoadError(e,n,r){n&&n(e,r)}_sourceLoaded(e,n,r){n._sourceLoaded||(n._onSourceLoaded(e),this._parent&&(this._increment&&this._increment(),this.renderer.nextRender.add(()=>this._parent._onLoadingCallback&&this._parent._onLoadingCallback(n))),r&&r(n))}_getSourceType(e){let n;return typeof e=="string"?e.match(/\.(jpeg|jpg|jfif|pjpeg|pjp|gif|bmp|png|webp|svg|avif|apng)$/)!==null?n="image":e.match(/\.(webm|mp4|mpg|mpeg|avi|ogg|ogm|ogv|mov|av1)$/)!==null&&(n="video"):e.tagName.toUpperCase()==="IMG"?n="image":e.tagName.toUpperCase()==="VIDEO"?n="video":e.tagName.toUpperCase()==="CANVAS"&&(n="canvas"),n}_createImage(e){if(typeof e=="string"||!e.hasAttribute("crossOrigin")){let n=new Image;return n.crossOrigin=this.crossOrigin,typeof e=="string"?n.src=e:(n.src=e.src,e.hasAttribute("data-sampler")&&n.setAttribute("data-sampler",e.getAttribute("data-sampler"))),n}else return e}_createVideo(e){if(typeof e=="string"||e.getAttribute("crossOrigin")===null){let n=document.createElement("video");return n.crossOrigin=this.crossOrigin,typeof e=="string"?n.src=e:(n.src=e.src,e.hasAttribute("data-sampler")&&n.setAttribute("data-sampler",e.getAttribute("data-sampler"))),n}else return e}loadSource(e,n,r,i){switch(this._getSourceType(e)){case"image":this.loadImage(e,n,r,i);break;case"video":this.loadVideo(e,n,r,i);break;case"canvas":this.loadCanvas(e,n,r);break;default:this._sourceLoadError(e,i,"this source could not be converted into a texture: "+e);break}}loadSources(e,n,r,i){for(let s=0;s<e.length;s++)this.loadSource(e[s],n,r,i)}loadImage(e,n={},r,i){let s=this.renderer.cache.getTextureFromSource(e),o=Object.assign({},n);if(this._parent&&(o=Object.assign(o,this._parent._texturesOptions)),o.loader=this,s){o.sampler=typeof e!="string"&&e.hasAttribute("data-sampler")?e.getAttribute("data-sampler"):o.sampler,o.fromTexture=s;let c=new Ee(this.renderer,o);this._sourceLoaded(s.source,c,r),this._parent&&this._addToParent(c,s.source,"image");return}let a=this._createImage(e);o.sampler=a.hasAttribute("data-sampler")?a.getAttribute("data-sampler"):o.sampler;let l=new Ee(this.renderer,o),u=this._addElement(a,l,r,i);a.complete?this._sourceLoaded(a,l,r):a.decode?a.decode().then(this._sourceLoaded.bind(this,a,l,r)).catch(()=>{a.addEventListener("load",u.load,!1),a.addEventListener("error",u.error,!1)}):(a.addEventListener("load",u.load,!1),a.addEventListener("error",u.error,!1)),this._parent&&this._addToParent(l,a,"image")}loadImages(e,n,r,i){for(let s=0;s<e.length;s++)this.loadImage(e[s],n,r,i)}loadVideo(e,n={},r,i){let s=this._createVideo(e);s.preload=!0,s.muted=!0,s.loop=!0,s.setAttribute("playsinline",""),s.crossOrigin=this.crossOrigin;let o=Object.assign({},n);this._parent&&(o=Object.assign(n,this._parent._texturesOptions)),o.loader=this,o.sampler=s.hasAttribute("data-sampler")?s.getAttribute("data-sampler"):o.sampler;let a=new Ee(this.renderer,o),l=this._addElement(s,a,r,i);s.addEventListener("canplaythrough",l.load,!1),s.addEventListener("error",l.error,!1),s.readyState>=s.HAVE_FUTURE_DATA&&r&&this._sourceLoaded(s,a,r),s.load(),this._addToParent&&this._addToParent(a,s,"video"),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(l.videoFrameCallback=a._videoFrameCallback.bind(a),a._videoFrameCallbackID=s.requestVideoFrameCallback(l.videoFrameCallback))}loadVideos(e,n,r,i){for(let s=0;s<e.length;s++)this.loadVideo(e[s],n,r,i)}loadCanvas(e,n={},r){let i=Object.assign({},n);this._parent&&(i=Object.assign(n,this._parent._texturesOptions)),i.loader=this,i.sampler=e.hasAttribute("data-sampler")?e.getAttribute("data-sampler"):i.sampler;let s=new Ee(this.renderer,i);this._addElement(e,s,r,null),this._sourceLoaded(e,s,r),this._parent&&this._addToParent(s,e,"canvas")}loadCanvases(e,n,r){for(let i=0;i<e.length;i++)this.loadCanvas(e[i],n,r)}_removeSource(e){let n=this.elements.find(r=>r.texture.uuid===e.uuid);n&&(e.sourceType==="image"?n.source.removeEventListener("load",n.load,!1):e.sourceType==="video"&&(n.videoFrameCallback&&e._videoFrameCallbackID&&n.source.cancelVideoFrameCallback(e._videoFrameCallbackID),n.source.removeEventListener("canplaythrough",n.load,!1),n.source.pause(),n.source.removeAttribute("src"),n.source.load()),n.source.removeEventListener("error",n.error,!1))}};var is=class extends wr{constructor(e,n,{sourcesLoaded:r=0,sourcesToLoad:i=0,complete:s=!1,onComplete:o=()=>{}}={}){super(e,n.crossOrigin),this.type="PlaneTextureLoader",this._parent=n,this._parent.type!=="Plane"&&this._parent.type!=="PingPongPlane"&&this._parent.type!=="ShaderPass"&&(v(this.type+": Wrong parent type assigned to this loader"),this._parent=null),this.sourcesLoaded=r,this.sourcesToLoad=i,this.complete=s,this.onComplete=o}_setLoaderSize(e){this.sourcesToLoad=e,this.sourcesToLoad===0&&(this.complete=!0,this.renderer.nextRender.add(()=>this.onComplete&&this.onComplete()))}_increment(){this.sourcesLoaded++,this.sourcesLoaded>=this.sourcesToLoad&&!this.complete&&(this.complete=!0,this.renderer.nextRender.add(()=>this.onComplete&&this.onComplete()))}_addSourceToParent(e,n){if(n==="image"){let r=this._parent.images;!r.find(s=>s.src===e.src)&&r.push(e)}else if(n==="video"){let r=this._parent.videos;!r.find(s=>s.src===e.src)&&r.push(e)}else if(n==="canvas"){let r=this._parent.canvases;!r.find(s=>s.isSameNode(e))&&r.push(e)}}_addToParent(e,n,r){this._addSourceToParent(n,r),this._parent&&e.addParent(this._parent)}};var ss=class{constructor(e,n="Mesh",{vertexShaderID:r,fragmentShaderID:i,vertexShader:s,fragmentShader:o,uniforms:a={},widthSegments:l=1,heightSegments:u=1,renderOrder:c=0,depthTest:d=!0,cullFace:h="back",texturesOptions:f={},crossOrigin:p="anonymous"}={}){if(this.type=n,e=e&&e.renderer||e,(!e||e.type!=="Renderer")&&(z(this.type+": Curtains not passed as first argument or Curtains Renderer is missing",e),setTimeout(()=>{this._onErrorCallback&&this._onErrorCallback()},0)),this.renderer=e,this.gl=this.renderer.gl,!this.gl){this.renderer.production||z(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"),setTimeout(()=>{this._onErrorCallback&&this._onErrorCallback()},0);return}this._canDraw=!1,this.renderOrder=c,this._depthTest=d,this.cullFace=h,this.cullFace!=="back"&&this.cullFace!=="front"&&this.cullFace!=="none"&&(this.cullFace="back"),this.textures=[],this._texturesOptions=Object.assign({premultiplyAlpha:!1,anisotropy:1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},f),this.crossOrigin=p,!s&&r&&document.getElementById(r)&&(s=document.getElementById(r).innerHTML),!o&&i&&document.getElementById(i)&&(o=document.getElementById(i).innerHTML),this._initMesh(),l=parseInt(l),u=parseInt(u),this._geometry=new rs(this.renderer,{width:l,height:u}),this._program=new Dr(this.renderer,{parent:this,vertexShader:s,fragmentShader:o}),this._program.compiled?(this._program.createUniforms(a),this.uniforms=this._program.uniformsManager.uniforms,this._geometry.setProgram(this._program),this.renderer.onSceneChange()):this.renderer.nextRender.add(()=>this._onErrorCallback&&this._onErrorCallback())}_initMesh(){this.uuid=vr(),this.loader=new is(this.renderer,this,{sourcesLoaded:0,initSourcesToLoad:0,complete:!1,onComplete:()=>{this._onReadyCallback&&this._onReadyCallback(),this.renderer.needRender()}}),this.images=[],this.videos=[],this.canvases=[],this.userData={},this._canDraw=!0}_restoreContext(){this._canDraw=!1,this._matrices&&(this._matrices=null),this._program=new Dr(this.renderer,{parent:this,vertexShader:this._program.vsCode,fragmentShader:this._program.fsCode}),this._program.compiled&&(this._geometry.restoreContext(this._program),this._program.createUniforms(this.uniforms),this.uniforms=this._program.uniformsManager.uniforms,this._programRestored())}setRenderTarget(e){if(!e||e.type!=="RenderTarget"){this.renderer.production||v(this.type+": Could not set the render target because the argument passed is not a RenderTarget class object",e);return}this.type==="Plane"&&this.renderer.scene.removePlane(this),this.target=e,this.type==="Plane"&&this.renderer.scene.addPlane(this)}setRenderOrder(e=0){e=isNaN(e)?this.renderOrder:parseInt(e),e!==this.renderOrder&&(this.renderOrder=e,this.renderer.scene.setPlaneRenderOrder(this))}createTexture(e={}){let n=new Ee(this.renderer,Object.assign(e,this._texturesOptions));return n.addParent(this),n}addTexture(e){if(!e||e.type!=="Texture"){this.renderer.production||v(this.type+": cannot add ",e," to this "+this.type+" because it is not a valid texture");return}e.addParent(this)}loadSources(e,n={},r,i){for(let s=0;s<e.length;s++)this.loadSource(e[s],n,r,i)}loadSource(e,n={},r,i){this.loader.loadSource(e,Object.assign(n,this._texturesOptions),s=>{r&&r(s)},(s,o)=>{this.renderer.production||v(this.type+": this HTML tag could not be converted into a texture:",s.tagName),i&&i(s,o)})}loadImage(e,n={},r,i){this.loader.loadImage(e,Object.assign(n,this._texturesOptions),s=>{r&&r(s)},(s,o)=>{this.renderer.production||v(this.type+`: There has been an error:
`,o,`
while loading this image:
`,s),i&&i(s,o)})}loadVideo(e,n={},r,i){this.loader.loadVideo(e,Object.assign(n,this._texturesOptions),s=>{r&&r(s)},(s,o)=>{this.renderer.production||v(this.type+`: There has been an error:
`,o,`
while loading this video:
`,s),i&&i(s,o)})}loadCanvas(e,n={},r){this.loader.loadCanvas(e,Object.assign(n,this._texturesOptions),i=>{r&&r(i)})}loadImages(e,n={},r,i){for(let s=0;s<e.length;s++)this.loadImage(e[s],n,r,i)}loadVideos(e,n={},r,i){for(let s=0;s<e.length;s++)this.loadVideo(e[s],n,r,i)}loadCanvases(e,n={},r){for(let i=0;i<e.length;i++)this.loadCanvas(e[i],n,r)}playVideos(){for(let e=0;e<this.textures.length;e++){let n=this.textures[e];if(n.sourceType==="video"){let r=n.source.play();r!==void 0&&r.catch(i=>{this.renderer.production||v(this.type+": Could not play the video : ",i)})}}}_draw(){this.renderer.setDepthTest(this._depthTest),this.renderer.setFaceCulling(this.cullFace),this._program.updateUniforms(),this._geometry.bindBuffers(),this.renderer.state.forceBufferUpdate=!1;for(let e=0;e<this.textures.length;e++)if(this.textures[e]._draw(),this.textures[e]._sampler.isActive&&!this.textures[e]._sampler.isTextureBound)return;this._geometry.draw(),this.renderer.state.activeTexture=null,this._onAfterRenderCallback&&this._onAfterRenderCallback()}onError(e){return e&&(this._onErrorCallback=e),this}onLoading(e){return e&&(this._onLoadingCallback=e),this}onReady(e){return e&&(this._onReadyCallback=e),this}onRender(e){return e&&(this._onRenderCallback=e),this}onAfterRender(e){return e&&(this._onAfterRenderCallback=e),this}remove(){this._canDraw=!1,this.target&&this.renderer.bindFrameBuffer(null),this._dispose(),this.type==="Plane"?this.renderer.removePlane(this):this.type==="ShaderPass"&&(this.target&&(this.target._shaderPass=null,this.target.remove(),this.target=null),this.renderer.removeShaderPass(this))}_dispose(){if(this.gl){this._geometry&&this._geometry.dispose(),this.target&&this.type==="ShaderPass"&&(this.renderer.removeRenderTarget(this.target),this.textures.shift());for(let e=0;e<this.textures.length;e++)this.textures[e]._dispose();this.textures=[]}}};var Th=new re,BD=new re,_r=class extends ss{constructor(e,n,r="DOMMesh",{widthSegments:i,heightSegments:s,renderOrder:o,depthTest:a,cullFace:l,uniforms:u,vertexShaderID:c,fragmentShaderID:d,vertexShader:h,fragmentShader:f,texturesOptions:p,crossOrigin:m}={}){c=c||n&&n.getAttribute("data-vs-id"),d=d||n&&n.getAttribute("data-fs-id"),super(e,r,{widthSegments:i,heightSegments:s,renderOrder:o,depthTest:a,cullFace:l,uniforms:u,vertexShaderID:c,fragmentShaderID:d,vertexShader:h,fragmentShader:f,texturesOptions:p,crossOrigin:m}),this.gl&&(this.htmlElement=n,(!this.htmlElement||this.htmlElement.length===0)&&(this.renderer.production||v(this.type+": The HTML element you specified does not currently exists in the DOM")),this._setDocumentSizes())}_setDocumentSizes(){let e=this.htmlElement.getBoundingClientRect();this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:e.width*this.renderer.pixelRatio,height:e.height*this.renderer.pixelRatio,top:e.top*this.renderer.pixelRatio,left:e.left*this.renderer.pixelRatio}}getBoundingRect(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}}resize(){this._setDocumentSizes(),this.type==="Plane"&&(this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions());for(let e=0;e<this.textures.length;e++)this.textures[e].resize();this.renderer.nextRender.add(()=>this._onAfterResizeCallback&&this._onAfterResizeCallback())}mouseToPlaneCoords(e){let n=this.scale?this.scale:BD.set(1,1),r=Th.set((this._boundingRect.document.width-this._boundingRect.document.width*n.x)/2,(this._boundingRect.document.height-this._boundingRect.document.height*n.y)/2),i={width:this._boundingRect.document.width*n.x/this.renderer.pixelRatio,height:this._boundingRect.document.height*n.y/this.renderer.pixelRatio,top:(this._boundingRect.document.top+r.y)/this.renderer.pixelRatio,left:(this._boundingRect.document.left+r.x)/this.renderer.pixelRatio};return Th.set((e.x-i.left)/i.width*2-1,1-(e.y-i.top)/i.height*2)}onAfterResize(e){return e&&(this._onAfterResizeCallback=e),this}};var os=class{constructor({fov:e=50,near:n=.1,far:r=150,width:i,height:s,pixelRatio:o=1}={}){this.position=new B,this.projectionMatrix=new Ce,this.worldMatrix=new Ce,this.viewMatrix=new Ce,this._shouldUpdate=!1,this.setSize(),this.setPerspective(e,n,r,i,s,o)}setFov(e){e=isNaN(e)?this.fov:parseFloat(e),e=Math.max(1,Math.min(e,179)),e!==this.fov&&(this.fov=e,this.setPosition(),this._shouldUpdate=!0),this.setCSSPerspective()}setNear(e){e=isNaN(e)?this.near:parseFloat(e),e=Math.max(e,.01),e!==this.near&&(this.near=e,this._shouldUpdate=!0)}setFar(e){e=isNaN(e)?this.far:parseFloat(e),e=Math.max(e,50),e!==this.far&&(this.far=e,this._shouldUpdate=!0)}setPixelRatio(e){e!==this.pixelRatio&&(this._shouldUpdate=!0),this.pixelRatio=e}setSize(e,n){(e!==this.width||n!==this.height)&&(this._shouldUpdate=!0),this.width=e,this.height=n}setPerspective(e,n,r,i,s,o){this.setPixelRatio(o),this.setSize(i,s),this.setFov(e),this.setNear(n),this.setFar(r),this._shouldUpdate&&this.updateProjectionMatrix()}setPosition(){this.position.set(0,0,1),this.worldMatrix.setFromArray([1,0,0,0,0,1,0,0,0,0,1,0,this.position.x,this.position.y,this.position.z,1]),this.viewMatrix=this.viewMatrix.copy(this.worldMatrix).getInverse()}setCSSPerspective(){this.CSSPerspective=Math.pow(Math.pow(this.width/(2*this.pixelRatio),2)+Math.pow(this.height/(2*this.pixelRatio),2),.5)/Math.tan(this.fov*.5*Math.PI/180)}getScreenRatiosFromFov(e=0){let n=this.position.z;e<n?e-=n:e+=n;let r=this.fov*Math.PI/180,i=2*Math.tan(r/2)*Math.abs(e);return{width:i*this.width/this.height,height:i}}updateProjectionMatrix(){let e=this.width/this.height,n=this.near*Math.tan(Math.PI/180*.5*this.fov),r=2*n,i=e*r,s=-.5*i,o=s+i,a=n-r,l=2*this.near/(o-s),u=2*this.near/(n-a),c=(o+s)/(o-s),d=(n+a)/(n-a),h=-(this.far+this.near)/(this.far-this.near),f=-2*this.far*this.near/(this.far-this.near);this.projectionMatrix.setFromArray([l,0,0,0,0,u,0,0,c,d,h,-1,0,0,f,0])}forceUpdate(){this._shouldUpdate=!0}cancelUpdate(){this._shouldUpdate=!1}};var bn=class t{constructor(e=new Float32Array([0,0,0,1]),n="XYZ"){this.type="Quat",this.elements=e,this.axisOrder=n}setFromArray(e){return this.elements[0]=e[0],this.elements[1]=e[1],this.elements[2]=e[2],this.elements[3]=e[3],this}setAxisOrder(e){switch(e=e.toUpperCase(),e){case"XYZ":case"YXZ":case"ZXY":case"ZYX":case"YZX":case"XZY":this.axisOrder=e;break;default:this.axisOrder="XYZ"}return this}copy(e){return this.elements=e.elements,this.axisOrder=e.axisOrder,this}clone(){return new t().copy(this)}equals(e){return this.elements[0]===e.elements[0]&&this.elements[1]===e.elements[1]&&this.elements[2]===e.elements[2]&&this.elements[3]===e.elements[3]&&this.axisOrder===e.axisOrder}setFromVec3(e){let n=e.x*.5,r=e.y*.5,i=e.z*.5,s=Math.cos(n),o=Math.cos(r),a=Math.cos(i),l=Math.sin(n),u=Math.sin(r),c=Math.sin(i);return this.axisOrder==="XYZ"?(this.elements[0]=l*o*a+s*u*c,this.elements[1]=s*u*a-l*o*c,this.elements[2]=s*o*c+l*u*a,this.elements[3]=s*o*a-l*u*c):this.axisOrder==="YXZ"?(this.elements[0]=l*o*a+s*u*c,this.elements[1]=s*u*a-l*o*c,this.elements[2]=s*o*c-l*u*a,this.elements[3]=s*o*a+l*u*c):this.axisOrder==="ZXY"?(this.elements[0]=l*o*a-s*u*c,this.elements[1]=s*u*a+l*o*c,this.elements[2]=s*o*c+l*u*a,this.elements[3]=s*o*a-l*u*c):this.axisOrder==="ZYX"?(this.elements[0]=l*o*a-s*u*c,this.elements[1]=s*u*a+l*o*c,this.elements[2]=s*o*c-l*u*a,this.elements[3]=s*o*a+l*u*c):this.axisOrder==="YZX"?(this.elements[0]=l*o*a+s*u*c,this.elements[1]=s*u*a+l*o*c,this.elements[2]=s*o*c-l*u*a,this.elements[3]=s*o*a-l*u*c):this.axisOrder==="XZY"&&(this.elements[0]=l*o*a-s*u*c,this.elements[1]=s*u*a-l*o*c,this.elements[2]=s*o*c+l*u*a,this.elements[3]=s*o*a+l*u*c),this}};var $D=new re,HD=new B,zD=new B,WD=new B,GD=new B,qD=new B,ZD=new B,xe=new B,Ie=new B,Rh=new bn,YD=new B(.5,.5,0),QD=new B,XD=new B,KD=new B,JD=new B,ew=new re,Cn=class extends _r{constructor(e,n,{widthSegments:r,heightSegments:i,renderOrder:s,depthTest:o,cullFace:a,uniforms:l,vertexShaderID:u,fragmentShaderID:c,vertexShader:d,fragmentShader:h,texturesOptions:f,crossOrigin:p,alwaysDraw:m=!1,visible:D=!0,transparent:I=!1,drawCheckMargins:F={top:0,right:0,bottom:0,left:0},autoloadSources:A=!0,watchScroll:H=!0,fov:G=50}={}){super(e,n,"Plane",{widthSegments:r,heightSegments:i,renderOrder:s,depthTest:o,cullFace:a,uniforms:l,vertexShaderID:u,fragmentShaderID:c,vertexShader:d,fragmentShader:h,texturesOptions:f,crossOrigin:p}),this.gl&&(this.index=this.renderer.planes.length,this.target=null,this.alwaysDraw=m,this._shouldDraw=!0,this.visible=D,this._transparent=I,this.drawCheckMargins=F,this.autoloadSources=A,this.watchScroll=H,this._updateMVMatrix=!1,this.camera=new os({fov:G,width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height,pixelRatio:this.renderer.pixelRatio}),this._program.compiled&&(this._initPlane(),this.renderer.scene.addPlane(this),this.renderer.planes.push(this)))}_programRestored(){this.target&&this.setRenderTarget(this.renderer.renderTargets[this.target.index]),this._initMatrices(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions(),this.renderer.scene.addPlane(this);for(let e=0;e<this.textures.length;e++)this.textures[e]._parent=this,this.textures[e]._restoreContext();this._canDraw=!0}_initPlane(){this._initTransformValues(),this._initPositions(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._initSources()}_initTransformValues(){this.rotation=new B,this.rotation.onChange(()=>this._applyRotation()),this.quaternion=new bn,this.relativeTranslation=new B,this.relativeTranslation.onChange(()=>this._setTranslation()),this._translation=new B,this.scale=new B(1),this.scale.onChange(()=>{this.scale.z=1,this._applyScale()}),this.transformOrigin=new B(.5,.5,0),this.transformOrigin.onChange(()=>{this._setWorldTransformOrigin(),this._updateMVMatrix=!0})}resetPlane(e){this._initTransformValues(),this._setWorldTransformOrigin(),e!==null&&e?(this.htmlElement=e,this.resize()):!e&&!this.renderer.production&&v(this.type+": You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.")}removeRenderTarget(){this.target&&(this.renderer.scene.removePlane(this),this.target=null,this.renderer.scene.addPlane(this))}_initPositions(){this._initMatrices(),this._setWorldSizes(),this._applyWorldPositions()}_initMatrices(){let e=new Ce;this._matrices={world:{matrix:e},modelView:{name:"uMVMatrix",matrix:e,location:this.gl.getUniformLocation(this._program.program,"uMVMatrix")},projection:{name:"uPMatrix",matrix:e,location:this.gl.getUniformLocation(this._program.program,"uPMatrix")},modelViewProjection:{matrix:e}}}_setPerspectiveMatrix(){this.camera._shouldUpdate&&(this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.projection.location,!1,this._matrices.projection.matrix.elements)),this.camera.cancelUpdate()}setPerspective(e,n,r){this.camera.setPerspective(e,n,r,this.renderer._boundingRect.width,this.renderer._boundingRect.height,this.renderer.pixelRatio),this.renderer.state.isContextLost&&this.camera.forceUpdate(),this._matrices.projection.matrix=this.camera.projectionMatrix,this.camera._shouldUpdate&&(this._setWorldSizes(),this._applyWorldPositions(),this._translation.z=this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=this.camera._shouldUpdate}_setMVMatrix(){this._updateMVMatrix&&(this._matrices.world.matrix=this._matrices.world.matrix.composeFromOrigin(this._translation,this.quaternion,this.scale,this._boundingRect.world.transformOrigin),this._matrices.world.matrix.scale({x:this._boundingRect.world.width,y:this._boundingRect.world.height,z:1}),this._matrices.modelView.matrix.copy(this._matrices.world.matrix),this._matrices.modelView.matrix.elements[14]-=this.camera.position.z,this._matrices.modelViewProjection.matrix=this._matrices.projection.matrix.multiply(this._matrices.modelView.matrix),this.alwaysDraw||this._shouldDrawCheck(),this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.modelView.location,!1,this._matrices.modelView.matrix.elements)),this._updateMVMatrix=!1}_setWorldTransformOrigin(){this._boundingRect.world.transformOrigin=new B((this.transformOrigin.x*2-1)*this._boundingRect.world.width,-(this.transformOrigin.y*2-1)*this._boundingRect.world.height,this.transformOrigin.z)}_documentToWorldSpace(e){return zD.set(e.x*this.renderer.pixelRatio/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width,-(e.y*this.renderer.pixelRatio/this.renderer._boundingRect.height)*this._boundingRect.world.ratios.height,e.z)}_setWorldSizes(){let e=this.camera.getScreenRatiosFromFov();this._boundingRect.world={width:this._boundingRect.document.width/this.renderer._boundingRect.width*e.width/2,height:this._boundingRect.document.height/this.renderer._boundingRect.height*e.height/2,ratios:e},this._setWorldTransformOrigin()}_setWorldPosition(){let e={x:this._boundingRect.document.width/2+this._boundingRect.document.left,y:this._boundingRect.document.height/2+this._boundingRect.document.top},n={x:this.renderer._boundingRect.width/2+this.renderer._boundingRect.left,y:this.renderer._boundingRect.height/2+this.renderer._boundingRect.top};this._boundingRect.world.top=(n.y-e.y)/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,this._boundingRect.world.left=(e.x-n.x)/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width}setScale(e){if(!e.type||e.type!=="Vec2"){this.renderer.production||v(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",e);return}e.sanitizeNaNValuesWith(this.scale).max($D.set(.001,.001)),(e.x!==this.scale.x||e.y!==this.scale.y)&&(this.scale.set(e.x,e.y,1),this._applyScale())}_applyScale(){for(let e=0;e<this.textures.length;e++)this.textures[e].resize();this._updateMVMatrix=!0}setRotation(e){if(!e.type||e.type!=="Vec3"){this.renderer.production||v(this.type+": Cannot set rotation because the parameter passed is not of Vec3 type:",e);return}e.sanitizeNaNValuesWith(this.rotation),e.equals(this.rotation)||(this.rotation.copy(e),this._applyRotation())}_applyRotation(){this.quaternion.setFromVec3(this.rotation),this._updateMVMatrix=!0}setTransformOrigin(e){if(!e.type||e.type!=="Vec3"){this.renderer.production||v(this.type+": Cannot set transform origin because the parameter passed is not of Vec3 type:",e);return}e.sanitizeNaNValuesWith(this.transformOrigin),e.equals(this.transformOrigin)||(this.transformOrigin.copy(e),this._setWorldTransformOrigin(),this._updateMVMatrix=!0)}_setTranslation(){let e=HD.set(0,0,0);this.relativeTranslation.equals(e)||(e=this._documentToWorldSpace(this.relativeTranslation)),this._translation.set(this._boundingRect.world.left+e.x,this._boundingRect.world.top+e.y,this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=!0}setRelativeTranslation(e){if(!e.type||e.type!=="Vec3"){this.renderer.production||v(this.type+": Cannot set translation because the parameter passed is not of Vec3 type:",e);return}e.sanitizeNaNValuesWith(this.relativeTranslation),e.equals(this.relativeTranslation)||(this.relativeTranslation.copy(e),this._setTranslation())}_applyWorldPositions(){this._setWorldPosition(),this._setTranslation()}updatePosition(){this._setDocumentSizes(),this._applyWorldPositions()}updateScrollPosition(e,n){(e||n)&&(this._boundingRect.document.top+=n*this.renderer.pixelRatio,this._boundingRect.document.left+=e*this.renderer.pixelRatio,this._applyWorldPositions())}_getIntersection(e,n){let r=n.clone().sub(e),i=e.clone();for(;i.z>-1;)i.add(r);return i}_getNearPlaneIntersections(e,n,r){let i=this._matrices.modelViewProjection.matrix;if(r.length===1)r[0]===0?(n[0]=this._getIntersection(n[1],xe.set(.95,1,0).applyMat4(i)),n.push(this._getIntersection(n[3],Ie.set(-1,-.95,0).applyMat4(i)))):r[0]===1?(n[1]=this._getIntersection(n[0],xe.set(-.95,1,0).applyMat4(i)),n.push(this._getIntersection(n[2],Ie.set(1,-.95,0).applyMat4(i)))):r[0]===2?(n[2]=this._getIntersection(n[3],xe.set(-.95,-1,0).applyMat4(i)),n.push(this._getIntersection(n[1],Ie.set(1,.95,0).applyMat4(i)))):r[0]===3&&(n[3]=this._getIntersection(n[2],xe.set(.95,-1,0).applyMat4(i)),n.push(this._getIntersection(n[0],Ie.set(-1,.95,0).applyMat4(i))));else if(r.length===2)r[0]===0&&r[1]===1?(n[0]=this._getIntersection(n[3],xe.set(-1,-.95,0).applyMat4(i)),n[1]=this._getIntersection(n[2],Ie.set(1,-.95,0).applyMat4(i))):r[0]===1&&r[1]===2?(n[1]=this._getIntersection(n[0],xe.set(-.95,1,0).applyMat4(i)),n[2]=this._getIntersection(n[3],Ie.set(-.95,-1,0).applyMat4(i))):r[0]===2&&r[1]===3?(n[2]=this._getIntersection(n[1],xe.set(1,.95,0).applyMat4(i)),n[3]=this._getIntersection(n[0],Ie.set(-1,.95,0).applyMat4(i))):r[0]===0&&r[1]===3&&(n[0]=this._getIntersection(n[1],xe.set(.95,1,0).applyMat4(i)),n[3]=this._getIntersection(n[2],Ie.set(.95,-1,0).applyMat4(i)));else if(r.length===3){let s=0;for(let o=0;o<e.length;o++)r.includes(o)||(s=o);n=[n[s]],s===0?(n.push(this._getIntersection(n[0],xe.set(-.95,1,0).applyMat4(i))),n.push(this._getIntersection(n[0],Ie.set(-1,.95,0).applyMat4(i)))):s===1?(n.push(this._getIntersection(n[0],xe.set(.95,1,0).applyMat4(i))),n.push(this._getIntersection(n[0],Ie.set(1,.95,0).applyMat4(i)))):s===2?(n.push(this._getIntersection(n[0],xe.set(.95,-1,0).applyMat4(i))),n.push(this._getIntersection(n[0],Ie.set(1,-.95,0).applyMat4(i)))):s===3&&(n.push(this._getIntersection(n[0],xe.set(-.95,-1,0).applyMat4(i))),n.push(this._getIntersection(n[0],Ie.set(-1-.95,0).applyMat4(i))))}else for(let s=0;s<e.length;s++)n[s][0]=1e4,n[s][1]=1e4;return n}_getWorldCoords(){let e=[WD.set(-1,1,0),GD.set(1,1,0),qD.set(1,-1,0),ZD.set(-1,-1,0)],n=[],r=[];for(let l=0;l<e.length;l++){let u=e[l].applyMat4(this._matrices.modelViewProjection.matrix);n.push(u),Math.abs(u.z)>1&&r.push(l)}r.length&&(n=this._getNearPlaneIntersections(e,n,r));let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n.length;l++){let u=n[l];u.x<i&&(i=u.x),u.x>s&&(s=u.x),u.y<o&&(o=u.y),u.y>a&&(a=u.y)}return{top:a,right:s,bottom:o,left:i}}_computeWebGLBoundingRect(){let e=this._getWorldCoords(),n={top:1-(e.top+1)/2,right:(e.right+1)/2,bottom:1-(e.bottom+1)/2,left:(e.left+1)/2};n.width=n.right-n.left,n.height=n.bottom-n.top,this._boundingRect.worldToDocument={width:n.width*this.renderer._boundingRect.width,height:n.height*this.renderer._boundingRect.height,top:n.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top,left:n.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left,right:n.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left+n.width*this.renderer._boundingRect.width,bottom:n.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top+n.height*this.renderer._boundingRect.height}}getWebGLBoundingRect(){if(this._matrices.modelViewProjection)(!this._boundingRect.worldToDocument||this.alwaysDraw)&&this._computeWebGLBoundingRect();else return this._boundingRect.document;return this._boundingRect.worldToDocument}_getWebGLDrawRect(){return this._computeWebGLBoundingRect(),{top:this._boundingRect.worldToDocument.top-this.drawCheckMargins.top,right:this._boundingRect.worldToDocument.right+this.drawCheckMargins.right,bottom:this._boundingRect.worldToDocument.bottom+this.drawCheckMargins.bottom,left:this._boundingRect.worldToDocument.left-this.drawCheckMargins.left}}_shouldDrawCheck(){let e=this._getWebGLDrawRect();Math.round(e.right)<=this.renderer._boundingRect.left||Math.round(e.left)>=this.renderer._boundingRect.left+this.renderer._boundingRect.width||Math.round(e.bottom)<=this.renderer._boundingRect.top||Math.round(e.top)>=this.renderer._boundingRect.top+this.renderer._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,this.renderer.nextRender.add(()=>this._onLeaveViewCallback&&this._onLeaveViewCallback())):(this._shouldDraw||this.renderer.nextRender.add(()=>this._onReEnterViewCallback&&this._onReEnterViewCallback()),this._shouldDraw=!0)}isDrawn(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)}enableDepthTest(e){this._depthTest=e}_initSources(){let e=0;if(this.autoloadSources){let n=this.htmlElement.getElementsByTagName("img"),r=this.htmlElement.getElementsByTagName("video"),i=this.htmlElement.getElementsByTagName("canvas");n.length&&this.loadImages(n),r.length&&this.loadVideos(r),i.length&&this.loadCanvases(i),e=n.length+r.length+i.length}this.loader._setLoaderSize(e),this._canDraw=!0}_startDrawing(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this.target?this.renderer.bindFrameBuffer(this.target):this.renderer.state.scenePassIndex===null&&this.renderer.bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix(),(this.alwaysDraw||this._shouldDraw)&&this.visible&&this._draw())}mouseToPlaneCoords(e){if(Rh.setAxisOrder(this.quaternion.axisOrder),Rh.equals(this.quaternion)&&YD.equals(this.transformOrigin))return super.mouseToPlaneCoords(e);{let n={x:2*(e.x/(this.renderer._boundingRect.width/this.renderer.pixelRatio))-1,y:2*(1-e.y/(this.renderer._boundingRect.height/this.renderer.pixelRatio))-1},r=this.camera.position.clone(),i=QD.set(n.x,n.y,-.5);i.unproject(this.camera),i.sub(r).normalize();let s=XD.set(0,0,-1);s.applyQuat(this.quaternion).normalize();let o=JD.set(0,0,0),a=s.dot(i);if(Math.abs(a)>=1e-4){let l=this._matrices.world.matrix.getInverse().multiply(this.camera.viewMatrix),u=this._boundingRect.world.transformOrigin.clone().add(this._translation),c=KD.set(this._translation.x-u.x,this._translation.y-u.y,this._translation.z-u.z);c.applyQuat(this.quaternion),u.add(c);let d=s.dot(u.clone().sub(r))/a;o.copy(r.add(i.multiplyScalar(d))),o.applyMat4(l)}else o.set(1/0,1/0,1/0);return ew.set(o.x,o.y)}}onReEnterView(e){return e&&(this._onReEnterViewCallback=e),this}onLeaveView(e){return e&&(this._onLeaveViewCallback=e),this}};var Nh=(()=>{let e=class e{onWindowLoad(){let r=new re,i=new re,s={max:0,applied:0},o=new yr({container:"canvas",watchScroll:!1,pixelRatio:Math.min(1.5,window.devicePixelRatio)}),a=document.getElementsByClassName("curtain"),c={vertexShader:`
        precision mediump float;

        // default mandatory variables
        attribute vec3 aVertexPosition;
        attribute vec2 aTextureCoord;

        uniform mat4 uMVMatrix;
        uniform mat4 uPMatrix;

        // our texture matrix uniform
        uniform mat4 simplePlaneVideoTextureMatrix;

        // custom variables
        varying vec3 vVertexPosition;
        varying vec2 vTextureCoord;

        uniform float uTime;
        uniform vec2 uResolution;
        uniform vec2 uMousePosition;
        uniform float uMouseMoveStrength;


        void main() {

            vec3 vertexPosition = aVertexPosition;

            // get the distance between our vertex and the mouse position
            float distanceFromMouse = distance(uMousePosition, vec2(vertexPosition.x, vertexPosition.y));

            // calculate our wave effect
            float waveSinusoid = cos(5.0 * (distanceFromMouse - (uTime / 75.0)));

            // attenuate the effect based on mouse distance
            float distanceStrength = (0.4 / (distanceFromMouse + 0.4));

            // calculate our distortion effect
            float distortionEffect = distanceStrength * waveSinusoid * uMouseMoveStrength;

            // apply it to our vertex position
            vertexPosition.z +=  distortionEffect / 30.0;
            vertexPosition.x +=  (distortionEffect / 30.0 * (uResolution.x / uResolution.y) * (uMousePosition.x - vertexPosition.x));
            vertexPosition.y +=  distortionEffect / 30.0 * (uMousePosition.y - vertexPosition.y);

            gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);

            // varyings
            vTextureCoord = (simplePlaneVideoTextureMatrix * vec4(aTextureCoord, 0.0, 1.0)).xy;
            vVertexPosition = vertexPosition;
        }
    `,fragmentShader:`
        precision mediump float;

        varying vec3 vVertexPosition;
        varying vec2 vTextureCoord;

        uniform sampler2D simplePlaneVideoTexture;

        void main() {
            // apply our texture
            vec4 finalColor = texture2D(simplePlaneVideoTexture, vTextureCoord);

            // fake shadows based on vertex position along Z axis
            finalColor.rgb -= clamp(-vVertexPosition.z, 0.0, 1.0);
            // fake lights based on vertex position along Z axis
            finalColor.rgb += clamp(vVertexPosition.z, 0.0, 1.0);

            // handling premultiplied alpha (useful if we were using a png with transparency)
            finalColor = vec4(finalColor.rgb * finalColor.a, finalColor.a);

            gl_FragColor = finalColor;
        }
    `,widthSegments:20,heightSegments:20,uniforms:{resolution:{name:"uResolution",type:"2f",value:[a[0].clientWidth,a[0].clientHeight]},time:{name:"uTime",type:"1f",value:0},mousePosition:{name:"uMousePosition",type:"2f",value:r},mouseMoveStrength:{name:"uMouseMoveStrength",type:"1f",value:0}}},d=new Cn(o,a[0],c);d.onReady(()=>{document.body.classList.add("curtains-ready"),d.setPerspective(105);let f=document.getElementById("page-wrap");f?.addEventListener("mousemove",p=>{h(p,d)}),f?.addEventListener("touchmove",p=>{h(p,d)},{passive:!0}),document.body.classList.add("video-started"),s.max=3,d.playVideos()}).onRender(()=>{d.uniforms.time.value++,s.applied+=(s.max-s.applied)*.02,s.max+=(0-s.max)*.01,d.uniforms.mouseMoveStrength.value=s.applied}).onAfterResize(()=>{let f=d.getBoundingRect();console.log(f),d.uniforms.resolution.value=[f.width,f.height]});function h(f,p){i.copy(r);let m=new re;if(f.targetTouches?m.set(f.targetTouches[0].clientX,f.targetTouches[0].clientY):m.set(f.clientX,f.clientY),r.set(o.lerp(r.x,m.x,.3),o.lerp(r.y,m.y,.3)),p.uniforms.mousePosition.value=p.mouseToPlaneCoords(r),i.x&&i.y){let D=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))/30;D=Math.min(4,D),D>=s.max&&(s.max=D)}}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Un({type:e,selectors:[["","appCurtainsJs",""]],hostBindings:function(i,s){i&1&&Ii("load",function(){return s.onWindowLoad()},!1,Tc)},standalone:!0});let t=e;return t})();var Ph=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fi({type:e,selectors:[["app-root"]],standalone:!0,features:[Mi],decls:12,vars:0,consts:[[2,"display","flex","flex-direction","column","width","100%","margin","0 auto","padding-top","4rem","align-items","center","justify-content","center"],["width","200","src","angular-logo.svg"],[2,"color","white","margin-top","1rem"],[2,"font-weight","700"],["appCurtainsJs",""],["id","page-wrap"],["id","canvas"],[1,"curtain-wrapper"],[1,"curtain"],["src","0512.mov","crossorigin","","data-sampler","simplePlaneVideoTexture"]],template:function(i,s){i&1&&(dt(0,"div",0),Tt(1,"img",1),dt(2,"div",2),Go(3," Made with \u2764\uFE0F by "),dt(4,"span",3),Go(5,"Khang Tran"),zn()()(),dt(6,"div",4)(7,"div",5),Tt(8,"div",6),dt(9,"div",7)(10,"div",8),Tt(11,"video",9),zn()()()())},dependencies:[Nh],styles:["#page-wrap[_ngcontent-%COMP%]{width:100%;height:100vh;overflow:hidden}#canvas[_ngcontent-%COMP%]{height:100vh;width:100vw;opacity:0;transition:opacity .5s ease-in}.video-started[_nghost-%COMP%]   #canvas[_ngcontent-%COMP%], .video-started   [_nghost-%COMP%]   #canvas[_ngcontent-%COMP%]{opacity:1}.curtain-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:15;inset:20%}.curtain[_ngcontent-%COMP%]{position:absolute;inset:0}.curtain[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .curtain[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;opacity:0}"]});let t=e;return t})();Ld(Ph,bh).catch(t=>console.error(t));
